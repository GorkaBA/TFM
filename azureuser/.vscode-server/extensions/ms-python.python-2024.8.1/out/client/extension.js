/*! For license information please see extension.js.LICENSE.txt */
(()=>{var __webpack_modules__={69145:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionActivationManager=void 0;const o=n(86700),s=n(77651),a=n(17585),c=n(77570),l=n(84974),u=n(61684),d=n(87282),p=n(19735),h=n(98634),f=n(90819);let g=class{constructor(e,t,n,r,i,o,s,a,c){this.activationServices=e,this.singleActivationServices=t,this.documentManager=n,this.autoSelection=r,this.appDiagnostics=i,this.workspaceService=o,this.fileSystem=s,this.activeResourceService=a,this.interpreterPathService=c,this.activatedWorkspaces=new Set,this.isInterpreterSetForWorkspacePromises=new Map,this.disposables=[]}filterServices(){this.workspaceService.isTrusted||(this.activationServices=this.activationServices.filter((e=>e.supportedWorkspaceTypes.untrustedWorkspace)),this.singleActivationServices=this.singleActivationServices.filter((e=>e.supportedWorkspaceTypes.untrustedWorkspace))),this.workspaceService.isVirtualWorkspace&&(this.activationServices=this.activationServices.filter((e=>e.supportedWorkspaceTypes.virtualWorkspace)),this.singleActivationServices=this.singleActivationServices.filter((e=>e.supportedWorkspaceTypes.virtualWorkspace)))}dispose(){for(;this.disposables.length>0;)this.disposables.shift().dispose();this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}async activate(e){this.filterServices(),await this.initialize(),await Promise.all([...this.singleActivationServices.map((e=>e.activate())),this.activateWorkspace(this.activeResourceService.getActiveResource(),e)])}async activateWorkspace(e,t){const n=this.workspaceService.getWorkspaceFolder(e);e=n?n.uri:void 0;const r=this.getWorkspaceKey(e);this.activatedWorkspaces.has(r)||(this.activatedWorkspaces.add(r),this.workspaceService.isTrusted&&(await this.autoSelection.autoSelectInterpreter(e),await this.interpreterPathService.copyOldInterpreterStorageValuesToNew(e)),await(0,h.sendActivationTelemetry)(this.fileSystem,this.workspaceService,e),await Promise.all(this.activationServices.map((n=>n.activate(e,t)))),await this.appDiagnostics.performPreStartupHealthCheck(e))}async initialize(){this.addHandlers(),this.addRemoveDocOpenedHandlers()}onDocOpened(e){var t;if(e.languageId!==c.PYTHON_LANGUAGE)return;const n=this.getWorkspaceKey(e.uri),r=((null===(t=this.workspaceService.workspaceFolders)||void 0===t?void 0:t.length)||0)>0;""===n&&r||this.activatedWorkspaces.has(n)||this.activateWorkspace(e.uri).ignoreErrors()}addHandlers(){this.disposables.push(this.workspaceService.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this))}addRemoveDocOpenedHandlers(){this.hasMultipleWorkspaces()?this.docOpenedHandler||(this.docOpenedHandler=this.documentManager.onDidOpenTextDocument(this.onDocOpened,this)):this.docOpenedHandler&&(this.docOpenedHandler.dispose(),this.docOpenedHandler=void 0)}onWorkspaceFoldersChanged(){const e=this.workspaceService.workspaceFolders.map((e=>this.getWorkspaceKey(e.uri))),t=Array.from(this.activatedWorkspaces.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)this.activatedWorkspaces.delete(e);this.addRemoveDocOpenedHandlers()}hasMultipleWorkspaces(){var e;return((null===(e=this.workspaceService.workspaceFolders)||void 0===e?void 0:e.length)||0)>1}getWorkspaceKey(e){return this.workspaceService.getWorkspaceFolderIdentifier(e,"")}};r([(0,p.traceDecoratorError)("Failed to activate a workspace")],g.prototype,"activateWorkspace",null),g=r([(0,o.injectable)(),i(0,(0,o.multiInject)(f.IExtensionActivationService)),i(1,(0,o.multiInject)(f.IExtensionSingleActivationService)),i(2,(0,o.inject)(a.IDocumentManager)),i(3,(0,o.inject)(d.IInterpreterAutoSelectionService)),i(4,(0,o.inject)(s.IApplicationDiagnostics)),i(5,(0,o.inject)(a.IWorkspaceService)),i(6,(0,o.inject)(l.IFileSystem)),i(7,(0,o.inject)(a.IActiveResourceService)),i(8,(0,o.inject)(u.IInterpreterPathService))],g),t.ExtensionActivationManager=g},23826:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Commands=void 0,(t.Commands||(t.Commands={})).RestartLS="python.analysis.restartLanguageServer"},10464:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerAnalysisOptionsWithEnv=t.LanguageServerAnalysisOptionsBase=void 0;const i=n(66828),o=n(52847),s=n(77570),a=n(36952),c=n(19735);class l{constructor(e,t){this.workspace=t,this.didChange=new i.EventEmitter,this.output=e.channel}async initialize(e,t){}get onDidChange(){return this.didChange.event}dispose(){this.didChange.dispose()}async getAnalysisOptions(){const e=this.getWorkspaceFolder();return{documentSelector:this.getDocumentFilters(e),workspaceFolder:e,synchronize:{configurationSection:this.getConfigSectionsToSynchronize()},outputChannel:this.output,revealOutputChannelOn:o.RevealOutputChannelOn.Never,initializationOptions:await this.getInitializationOptions()}}getWorkspaceFolder(){}getDocumentFilters(e){return this.workspace.isVirtualWorkspace?[{language:s.PYTHON_LANGUAGE}]:s.PYTHON}getConfigSectionsToSynchronize(){return[s.PYTHON_LANGUAGE]}async getInitializationOptions(){}}r([(0,c.traceDecoratorError)("Failed to get analysis options")],l.prototype,"getAnalysisOptions",null),t.LanguageServerAnalysisOptionsBase=l;class u extends l{constructor(e,t,n){super(t,n),this.envVarsProvider=e,this.disposables=[],this.envPythonPath=""}async initialize(e,t){const n=this.envVarsProvider.onDidEnvironmentVariablesChange(this.onEnvVarChange,this);this.disposables.push(n)}dispose(){super.dispose(),this.disposables.forEach((e=>e.dispose()))}async getEnvPythonPath(){const e=await this.envVarsProvider.getEnvironmentVariables();return this.envPythonPath=e.PYTHONPATH||"",this.envPythonPath}onEnvVarChange(){this.notifyifEnvPythonPathChanged().ignoreErrors()}async notifyifEnvPythonPathChanged(){const e=(await this.envVarsProvider.getEnvironmentVariables()).PYTHONPATH||"";this.envPythonPath!==e&&this.didChange.fire()}}r([(0,a.debounceSync)(1e3)],u.prototype,"onEnvVarChange",null),t.LanguageServerAnalysisOptionsWithEnv=u},17347:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileBasedCancellationStrategy=void 0;const r=n(6113),i=n(57147),o=n(22037),s=n(71017),a=n(52847);function c(e){return s.join(o.tmpdir(),"python-languageserver-cancellation",e)}function l(e,t){return s.join(c(e),`cancellation-${String(t)}.tmp`)}function u(e){try{e()}catch(e){}}class d{constructor(e){this.folderName=e;const t=c(e);u((()=>i.mkdirSync(t,{recursive:!0})))}async sendCancellation(e,t){const n=l(this.folderName,t);u((()=>i.writeFileSync(n,"",{flag:"w"})))}cleanup(e){u((()=>i.unlinkSync(l(this.folderName,e))))}dispose(){const e=c(this.folderName);function t(e){const n=i.lstatSync(e);if(n)if(n.isDirectory()&&!n.isSymbolicLink()){for(const n of i.readdirSync(e))t(s.join(e,n));i.rmdirSync(e)}else i.unlinkSync(e)}u((()=>t(e)))}}t.FileBasedCancellationStrategy=class{constructor(){const e=(0,r.randomBytes)(21).toString("hex");this._sender=new d(e)}get receiver(){return a.CancellationReceiverStrategy.Message}get sender(){return this._sender}getCommandLineArguments(){return[`--cancellationReceive=file:${this._sender.folderName}`]}dispose(){this._sender.dispose()}}},14306:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.setDefaultLanguageServer=void 0;const i=n(86700),o=n(77570),s=n(61684),a=n(90819);let c=class{constructor(e){this.defaultLSType=e}};c=r([(0,i.injectable)()],c),t.setDefaultLanguageServer=async function(e,t){const n=await async function(e){return e.getExtension(o.PYLANCE_EXTENSION_ID)?a.LanguageServerType.Node:a.LanguageServerType.Jedi}(e);t.addSingletonInstance(s.IDefaultLanguageServer,new c(n))}},65188:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerChangeHandler=t.promptForPylanceInstall=void 0;const r=n(66828),i=n(77570),o=n(59314),s=n(67098),a=n(90819);async function c(e,t,n,o){const c=await e.showWarningMessage(s.Pylance.pylanceRevertToJediPrompt,s.Pylance.pylanceInstallPylance,s.Pylance.pylanceRevertToJedi,s.Pylance.remindMeLater);if(c===s.Pylance.pylanceInstallPylance)t.executeCommand("extension.open",i.PYLANCE_EXTENSION_ID);else if(c===s.Pylance.pylanceRevertToJedi){const e=n.getConfiguration("python").inspect("languageServer");let t;(null==e?void 0:e.workspaceValue)?t=r.ConfigurationTarget.Workspace:(null==e?void 0:e.globalValue)&&(t=r.ConfigurationTarget.Global),t&&await o.updateSetting("languageServer",a.LanguageServerType.Jedi,void 0,t)}}t.promptForPylanceInstall=c,t.LanguageServerChangeHandler=class{constructor(e,t,n,r,i,s){this.currentLsType=e,this.extensions=t,this.appShell=n,this.commands=r,this.workspace=i,this.configService=s,this.pylanceInstallCompletedDeferred=(0,o.createDeferred)(),this.disposables=[],this.pylanceInstalled=!1,this.pylanceInstalled=this.isPylanceInstalled(),this.disposables.push(t.onDidChange((async()=>{await this.extensionsChangeHandler()})))}dispose(){for(var e;this.disposables.length;)null===(e=this.disposables.pop())||void 0===e||e.dispose()}get pylanceInstallCompleted(){return this.pylanceInstallCompletedDeferred.promise}async handleLanguageServerChange(e){this.currentLsType!==e&&e!==a.LanguageServerType.Microsoft&&(e!==a.LanguageServerType.Node||this.isPylanceInstalled()||await c(this.appShell,this.commands,this.workspace,this.configService),this.currentLsType=e)}async extensionsChangeHandler(){const e=this.pylanceInstalled;this.pylanceInstalled=this.isPylanceInstalled(),e===this.pylanceInstalled&&this.pylanceInstallCompletedDeferred.resolve()}isPylanceInstalled(){return!!this.extensions.getExtension(i.PYLANCE_EXTENSION_ID)}}},52228:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LoadLanguageServerExtension=void 0;const o=n(86700),s=n(17585),a=n(61684);let c=class{constructor(e,t){this.commandManager=e,this.disposables=t,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}activate(){const e=this.commandManager.registerCommand("python._loadLanguageServerExtension",(()=>{}));return this.disposables.push(e),Promise.resolve()}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager)),i(1,(0,o.inject)(a.IDisposableRegistry))],c),t.LoadLanguageServerExtension=c},63265:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageServerOutputChannel=void 0;const o=n(86700),s=n(17585);n(32727);const a=n(61684),c=n(67098);let l=class{constructor(e,t,n){this.appShell=e,this.commandManager=t,this.disposable=n,this.registered=!1}get channel(){return this.output||(this.output=this.appShell.createOutputChannel(c.OutputChannelNames.languageServer),this.disposable.push(this.output),this.registerCommand().ignoreErrors()),this.output}async registerCommand(){this.registered||(this.registered=!0,await this.commandManager.executeCommand("setContext","python.hasLanguageServerOutputChannel",!0),this.disposable.push(this.commandManager.registerCommand("python.viewLanguageServerOutput",(()=>{var e;return null===(e=this.output)||void 0===e?void 0:e.show(!0)}))),this.disposable.push({dispose:()=>{this.registered=!1}}))}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IApplicationShell)),i(1,(0,o.inject)(s.ICommandManager)),i(2,(0,o.inject)(a.IDisposableRegistry))],l),t.LanguageServerOutputChannel=l},61702:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionSurveyPrompt=t.extensionSurveyStateKeys=void 0;const o=n(86700),s=n(63477),a=n(66828),c=n(17585),l=n(60717);n(32727);const u=n(84974),d=n(61684),p=n(67098),h=n(19735),f=n(54813),g=n(61522);var m;!function(e){e.doNotShowAgain="doNotShowExtensionSurveyAgain",e.disableSurveyForTime="doNotShowExtensionSurveyUntilTime"}(m=t.extensionSurveyStateKeys||(t.extensionSurveyStateKeys={}));const v=72576e5;let y=class{constructor(e,t,n,r,i,o,s,a=10,c=108e5){this.appShell=e,this.browserService=t,this.persistentState=n,this.random=r,this.experiments=i,this.appEnvironment=o,this.platformService=s,this.sampleSizePerOneHundredUsers=a,this.waitTimeToShowSurvey=c,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){await this.experiments.inExperiment(l.ShowExtensionSurveyPrompt.experiment)&&this.shouldShowBanner()&&setTimeout((()=>this.showSurvey().ignoreErrors()),this.waitTimeToShowSurvey)}shouldShowBanner(){return a.env.uiKind!==(null===a.UIKind||void 0===a.UIKind?void 0:a.UIKind.Web)&&(!this.persistentState.createGlobalPersistentState(m.doNotShowAgain,!1).value&&(!this.persistentState.createGlobalPersistentState(m.disableSurveyForTime,!1,v).value&&!(this.random.getRandomInt(0,100)>=this.sampleSizePerOneHundredUsers)))}async showSurvey(){const e=[p.ExtensionSurveyBanner.bannerLabelYes,p.ExtensionSurveyBanner.maybeLater,p.Common.doNotShowAgain],t=await this.appShell.showInformationMessage(p.ExtensionSurveyBanner.bannerMessage,...e);(0,f.sendTelemetryEvent)(g.EventName.EXTENSION_SURVEY_PROMPT,void 0,{selection:t?["Yes","Maybe later","Don't show again"][e.indexOf(t)]:void 0}),t&&(t===p.ExtensionSurveyBanner.bannerLabelYes?(this.launchSurvey(),await this.persistentState.createGlobalPersistentState(m.disableSurveyForTime,!1,v).updateValue(!0)):t===p.Common.doNotShowAgain&&await this.persistentState.createGlobalPersistentState(m.doNotShowAgain,!1).updateValue(!0))}launchSurvey(){const e=`https://aka.ms/AA5rjx5?${s.stringify({o:encodeURIComponent(this.platformService.osType),v:encodeURIComponent(this.appEnvironment.vscodeVersion),e:encodeURIComponent(this.appEnvironment.packageJson.version),m:encodeURIComponent(this.appEnvironment.sessionId)})}`;this.browserService.launch(e)}};r([(0,h.traceDecoratorError)("Failed to check whether to display prompt for extension survey")],y.prototype,"shouldShowBanner",null),r([(0,h.traceDecoratorError)("Failed to display prompt for extension survey")],y.prototype,"showSurvey",null),y=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IApplicationShell)),i(1,(0,o.inject)(d.IBrowserService)),i(2,(0,o.inject)(d.IPersistentStateFactory)),i(3,(0,o.inject)(d.IRandom)),i(4,(0,o.inject)(d.IExperimentService)),i(5,(0,o.inject)(c.IApplicationEnvironment)),i(6,(0,o.inject)(u.IPlatformService)),i(7,(0,o.optional)()),i(8,(0,o.optional)())],y),t.ExtensionSurveyPrompt=y},67220:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerAnalysisOptions=void 0;const r=n(71017),i=n(10464);class o extends i.LanguageServerAnalysisOptionsWithEnv{constructor(e,t,n,r){super(e,t,r),this.configurationService=n,this.resource=void 0}async initialize(e,t){return this.resource=e,this.interpreter=t,super.initialize(e,t)}getWorkspaceFolder(){return this.workspace.getWorkspaceFolder(this.resource)}async getInitializationOptions(){var e,t;const n=this.configurationService.getSettings(this.resource),i=null===(e=this.getWorkspaceFolder())||void 0===e?void 0:e.uri.fsPath,o=n.autoComplete?n.autoComplete.extraPaths.map((e=>r.isAbsolute(e)?e:i?r.join(i,e):"")):[];return i&&o.unshift(i),{markupKindPreferred:"markdown",completion:{resolveEagerly:!1,disableSnippets:!0},diagnostics:{enable:!0,didOpen:!0,didSave:!0,didChange:!0},hover:{disable:{keyword:{all:!0}}},workspace:{extraPaths:o.filter((e=>e.length>0)).filter(((e,t,n)=>n.indexOf(e)===t)),environmentPath:null===(t=this.interpreter)||void 0===t?void 0:t.path,symbols:{maxSymbols:0}}}}}t.JediLanguageServerAnalysisOptions=o},49532:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageClientFactory=void 0;const r=n(71017),i=n(52847),o=n(77570);t.JediLanguageClientFactory=class{constructor(e){this.interpreterService=e}async createLanguageClient(e,t,n){const s=r.join(o.EXTENSION_ROOT_DIR,"python_files","run-jedi-language-server.py"),a=await this.interpreterService.getActiveInterpreter(e),c={command:a?a.path:"python",args:[s]};return new i.LanguageClient(o.PYTHON_LANGUAGE,"Python Jedi",c,n)}}},74381:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageClientMiddleware=void 0;const r=n(1158),i=n(90819);class o extends r.LanguageClientMiddleware{constructor(e,t){super(e,i.LanguageServerType.Jedi,t),this.setupHidingMiddleware(e)}}t.JediLanguageClientMiddleware=o},17192:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerProxy=void 0,n(32727);const i=n(54813),o=n(61522),s=n(12133),a=n(18699),c=n(19735);class l{constructor(e){this.factory=e,this.disposables=[]}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stop().ignoreErrors()}async start(e,t,n){var r;this.lsVersion=null!==(r=n.middleware?n.middleware.serverVersion:void 0)&&void 0!==r?r:"0.19.3";try{const r=await this.factory.createLanguageClient(e,t,n);this.registerHandlers(r),await r.start(),this.languageClient=r}catch(e){throw(0,c.traceError)("Failed to start language server:",e),new Error("Launching Jedi language server using python failed, see output.")}}async stop(){for(var e;this.disposables.length>0;)this.disposables.shift().dispose();if(this.languageClient){const t=this.languageClient;this.languageClient=void 0;const n=null===(e=t._serverProcess)||void 0===e?void 0:e.pid,r=()=>{n&&(0,a.killPid)(n)};try{await t.stop(),await t.dispose(),r()}catch(e){(0,c.traceError)("Stopping language client failed",e),r()}}}loadExtension(){}registerHandlers(e){const t=new s.ProgressReporting(e);this.disposables.push(t)}}r([(0,c.traceDecoratorVerbose)("Disposing language server")],l.prototype,"dispose",null),r([(0,c.traceDecoratorError)("Failed to start language server"),(0,i.captureTelemetry)(o.EventName.JEDI_LANGUAGE_SERVER_ENABLED,void 0,!0,void 0,l.versionTelemetryProps)],l.prototype,"start",null),r([(0,c.traceDecoratorVerbose)("Stopping language server")],l.prototype,"stop",null),r([(0,i.captureTelemetry)(o.EventName.JEDI_LANGUAGE_SERVER_READY,void 0,!0,void 0,l.versionTelemetryProps)],l.prototype,"registerHandlers",null),t.JediLanguageServerProxy=l},73461:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.JediLanguageServerManager=void 0;const i=n(55674),o=n(71017);n(32727);const s=n(36952),a=n(63281),c=n(54813),l=n(61522),u=n(23826),d=n(74381),p=n(19735);class h{constructor(e,t,n,r){this.serviceContainer=e,this.analysisOptions=t,this.languageServerProxy=n,this.disposables=[],this.connected=!1,h.commandDispose&&h.commandDispose.dispose(),h.commandDispose=r.registerCommand(u.Commands.RestartLS,(()=>{this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stopLanguageServer().ignoreErrors(),h.commandDispose.dispose(),this.disposables.forEach((e=>e.dispose()))}async start(e,t){this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);try{const e=await i.readFile(o.join(a.EXTENSION_ROOT_DIR,"python_files","jedilsp_requirements","requirements.txt"),"utf-8"),t=/jedi-language-server==([0-9\.]*)/.exec(e);t&&2===t.length&&([,this.lsVersion]=t)}catch(e){(0,p.traceVerbose)("Failed to get jedi-language-server version: ",e)}await this.analysisOptions.initialize(e,t),await this.startLanguageServer()}connect(){var e;this.connected||(this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect())}disconnect(){var e;this.connected&&(this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect())}restartLanguageServerDebounced(){this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){await this.stopLanguageServer(),await this.startLanguageServer()}async startLanguageServer(){const e=await this.analysisOptions.getAnalysisOptions();this.middleware=new d.JediLanguageClientMiddleware(this.serviceContainer,this.lsVersion),e.middleware=this.middleware,this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e)}async stopLanguageServer(){this.languageServerProxy&&await this.languageServerProxy.stop()}}r([(0,p.traceDecoratorError)("Failed to start language server")],h.prototype,"start",null),r([(0,s.debounceSync)(1e3)],h.prototype,"restartLanguageServerDebounced",null),r([(0,p.traceDecoratorError)("Failed to restart language server"),(0,p.traceDecoratorVerbose)("Restarting language server")],h.prototype,"restartLanguageServer",null),r([(0,c.captureTelemetry)(l.EventName.JEDI_LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,h.versionTelemetryProps),(0,p.traceDecoratorVerbose)("Starting language server")],h.prototype,"startLanguageServer",null),r([(0,p.traceDecoratorVerbose)("Stopping language server")],h.prototype,"stopLanguageServer",null),t.JediLanguageServerManager=h},1158:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageClientMiddleware=void 0;const r=n(17585),i=n(61684),o=n(54813),s=n(42857),a=n(1730);class c extends s.LanguageClientMiddlewareBase{constructor(e,t,n){super(e,t,o.sendTelemetryEvent,n)}setupHidingMiddleware(e){const t=e.get(r.IJupyterExtensionDependencyManager),n=e.get(i.IDisposableRegistry)||[],o=e.get(i.IExtensions);this.shouldCreateHidingMiddleware(t)&&(this.notebookAddon=(0,a.createHidingMiddleware)()),n.push(null==o?void 0:o.onDidChange((async()=>{await this.onExtensionChange(t)})))}shouldCreateHidingMiddleware(e){return e&&e.isJupyterExtensionInstalled}async onExtensionChange(e){e&&(this.notebookAddon&&!this.shouldCreateHidingMiddleware(e)?this.notebookAddon=void 0:!this.notebookAddon&&this.shouldCreateHidingMiddleware(e)&&(this.notebookAddon=(0,a.createHidingMiddleware)()))}}t.LanguageClientMiddleware=c},42857:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageClientMiddlewareBase=void 0;const r=n(71017),i=n(66828),o=n(92850),s=n(77570),a=n(59314),c=n(70057),l=n(19909),u=n(18639),d=n(61522),p=n(90819),h=3e5,f=6e4;t.LanguageClientMiddlewareBase=class{constructor(e,t,n,r){this.serviceContainer=e,this.sendTelemetryEventFunc=n,this.serverVersion=r,this.lastCaptured=new Map,this.nextWindow=0,this.eventCount=0,this.workspace={configuration:async(e,t,n)=>{var r,s;if(!this.serviceContainer)return n(e,t);const c=this.serviceContainer.get(u.IInterpreterService),d=this.serviceContainer.get(l.IEnvironmentVariablesProvider);let p=n(e,t);if((0,a.isThenable)(p)&&(p=await p),p instanceof o.ResponseError)return p;for(const[t,n]of e.items.entries()){if("python"===n.section){const e=n.scopeUri?i.Uri.parse(n.scopeUri):void 0,o=p[t];o.pythonPath=null!==(s=null===(r=await c.getActiveInterpreter(e))||void 0===r?void 0:r.path)&&void 0!==s?s:"python";const a=(await d.getEnvironmentVariables(e)).PYTHONPATH;a&&(o._envPYTHONPATH=a)}this.configurationHook(n,p[t])}return p}},this.connectedPromise=(0,a.createDeferred)(),this.notebooks={didOpen:this.didOpenNotebook.bind(this),didSave:this.didSaveNotebook.bind(this),didChange:this.didChangeNotebook.bind(this),didClose:this.didCloseNotebook.bind(this)},this.handleDiagnostics=this.handleDiagnostics.bind(this),this.didOpen=this.didOpen.bind(this),this.didSave=this.didSave.bind(this),this.didChange=this.didChange.bind(this),this.didClose=this.didClose.bind(this),this.willSave=this.willSave.bind(this),this.willSaveWaitUntil=this.willSaveWaitUntil.bind(this),t===p.LanguageServerType.Node?this.eventName=d.EventName.LANGUAGE_SERVER_REQUEST:t===p.LanguageServerType.Jedi&&(this.eventName=d.EventName.JEDI_LANGUAGE_SERVER_REQUEST)}configurationHook(e,t){}get connected(){return this.connectedPromise.promise}connect(){this.connectedPromise.resolve(!0)}disconnect(){this.connectedPromise=(0,a.createDeferred)(),this.connectedPromise.resolve(!1)}didChange(){return this.callNext("didChange",arguments)}didOpen(){return this.callNext("didOpen",arguments)}didClose(){return this.callNext("didClose",arguments)}didSave(){return this.callNext("didSave",arguments)}willSave(){return this.callNext("willSave",arguments)}willSaveWaitUntil(){return this.callNext("willSaveWaitUntil",arguments)}async didOpenNotebook(){return this.callNotebooksNext("didOpen",arguments)}async didSaveNotebook(){return this.callNotebooksNext("didSave",arguments)}async didChangeNotebook(){return this.callNotebooksNext("didChange",arguments)}async didCloseNotebook(){return this.callNotebooksNext("didClose",arguments)}async provideCompletionItem(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/completion",h,"provideCompletionItem",arguments,((e,t)=>t?{resultLength:Array.isArray(t)?t.length:t.items.length}:{resultLength:0}))}async provideHover(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/hover",h,"provideHover",arguments)}async handleDiagnostics(e,t,n){if(await this.connected){const t=e.fsPath,n=t?r.basename(t):void 0;if(!n||!n.startsWith(s.HiddenFilePrefix))return this.callNext("handleDiagnostics",arguments)}}async resolveCompletionItem(){if(await this.connected)return this.callNextAndSendTelemetry("completionItem/resolve",h,"resolveCompletionItem",arguments)}async provideSignatureHelp(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/signatureHelp",h,"provideSignatureHelp",arguments)}async provideDefinition(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/definition",f,"provideDefinition",arguments)}async provideReferences(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/references",f,"provideReferences",arguments)}async provideDocumentHighlights(){if(await this.connected)return this.callNext("provideDocumentHighlights",arguments)}async provideDocumentSymbols(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/documentSymbol",h,"provideDocumentSymbols",arguments)}async provideWorkspaceSymbols(){if(await this.connected)return this.callNextAndSendTelemetry("workspace/symbol",f,"provideWorkspaceSymbols",arguments)}async provideCodeActions(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/codeAction",h,"provideCodeActions",arguments)}async provideCodeLenses(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/codeLens",h,"provideCodeLenses",arguments)}async resolveCodeLens(){if(await this.connected)return this.callNextAndSendTelemetry("codeLens/resolve",h,"resolveCodeLens",arguments)}async provideDocumentFormattingEdits(){if(await this.connected)return this.callNext("provideDocumentFormattingEdits",arguments)}async provideDocumentRangeFormattingEdits(){if(await this.connected)return this.callNext("provideDocumentRangeFormattingEdits",arguments)}async provideOnTypeFormattingEdits(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/onTypeFormatting",h,"provideOnTypeFormattingEdits",arguments)}async provideRenameEdits(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/rename",f,"provideRenameEdits",arguments)}async prepareRename(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/prepareRename",f,"prepareRename",arguments)}async provideDocumentLinks(){if(await this.connected)return this.callNext("provideDocumentLinks",arguments)}async resolveDocumentLink(){if(await this.connected)return this.callNext("resolveDocumentLink",arguments)}async provideDeclaration(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/declaration",f,"provideDeclaration",arguments)}async provideTypeDefinition(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/typeDefinition",f,"provideTypeDefinition",arguments)}async provideImplementation(){if(await this.connected)return this.callNext("provideImplementation",arguments)}async provideDocumentColors(){if(await this.connected)return this.callNext("provideDocumentColors",arguments)}async provideColorPresentations(){if(await this.connected)return this.callNext("provideColorPresentations",arguments)}async provideFoldingRanges(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/foldingRange",h,"provideFoldingRanges",arguments)}async provideSelectionRanges(){if(await this.connected)return this.callNextAndSendTelemetry("textDocument/selectionRange",f,"provideSelectionRanges",arguments)}async prepareCallHierarchy(){if(await this.connected)return this.callNext("prepareCallHierarchy",arguments)}async provideCallHierarchyIncomingCalls(){if(await this.connected)return this.callNext("provideCallHierarchyIncomingCalls",arguments)}async provideCallHierarchyOutgoingCalls(){if(await this.connected)return this.callNext("provideCallHierarchyOutgoingCalls",arguments)}async provideDocumentSemanticTokens(){if(await this.connected)return this.callNext("provideDocumentSemanticTokens",arguments)}async provideDocumentSemanticTokensEdits(){if(await this.connected)return this.callNext("provideDocumentSemanticTokensEdits",arguments)}async provideDocumentRangeSemanticTokens(){if(await this.connected)return this.callNext("provideDocumentRangeSemanticTokens",arguments)}async provideLinkedEditingRange(){if(await this.connected)return this.callNext("provideLinkedEditingRange",arguments)}callNext(e,t){return this.notebookAddon&&this.notebookAddon[e]?this.notebookAddon[e](...t):t[t.length-1](...t)}callNotebooksNext(e,t){var n;return(null===(n=this.notebookAddon)||void 0===n?void 0:n.notebooks)&&this.notebookAddon.notebooks[e]?this.notebookAddon.notebooks[e](...t):t[t.length-1](...t)}callNextAndSendTelemetry(e,t,n,r,i){const o=Date.now(),s=new c.StopWatch;let l=!1;const u=[...r];u[u.length-1]=(...e)=>(l=!0,r[r.length-1](...e)),o>this.nextWindow&&(this.nextWindow=o+36e5,this.eventCount=0);const d=this.lastCaptured.get(e),p=n=>{if(this.eventName&&l&&this.eventCount<100&&(!d||o-d>t)){this.lastCaptured.set(e,o),this.eventCount+=1;const t=e.replace(/\//g,"."),r={lsVersion:this.serverVersion||"unknown",method:t};let a=s.elapsedTime;i&&(a={duration:a,...i(this,n)}),this.sendTelemetryEventFunc(this.eventName,a,r)}return n},h=this.callNext(n,u);return(0,a.isThenable)(h)?h.then(p):p(h)}}},22473:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerAnalysisOptions=void 0;const r=n(10464);class i extends r.LanguageServerAnalysisOptionsBase{constructor(e,t){super(e,t)}getConfigSectionsToSynchronize(){return[...super.getConfigSectionsToSynchronize(),"jupyter.runStartupCommands"]}async getInitializationOptions(){return{experimentationSupport:!0,trustedWorkspaceSupport:!0}}}t.NodeLanguageServerAnalysisOptions=i},46888:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageClientFactory=t.PYLANCE_NAME=void 0;const r=n(71017),i=n(52847),o=n(77570);t.PYLANCE_NAME="Pylance",t.NodeLanguageClientFactory=class{constructor(e,t){this.fs=e,this.extensions=t}async createLanguageClient(e,n,s){var a;const c=(null===(a=s.connectionOptions)||void 0===a?void 0:a.cancellationStrategy).getCommandLineArguments(),l=this.extensions.getExtension(o.PYLANCE_EXTENSION_ID),u=l?l.extensionPath:"",d=r.join(u,"dist","server.bundle.js"),p=r.join(u,"dist","server.js"),h=await this.fs.fileExists(p)?p:d,f={run:{module:d,transport:i.TransportKind.ipc,args:c},debug:{module:h,transport:i.TransportKind.ipc,options:{execArgv:["--nolazy","--inspect=6600"]},args:c}};return new i.LanguageClient(o.PYTHON_LANGUAGE,t.PYLANCE_NAME,f,s)}}},95479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageClientMiddleware=void 0;const r=n(1158),i=n(90819);class o extends r.LanguageClientMiddleware{constructor(e,t){super(e,i.LanguageServerType.Node,t),this.setupHidingMiddleware(e)}shouldCreateHidingMiddleware(e){return!1}}t.NodeLanguageClientMiddleware=o},82602:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerProxy=void 0,n(32727);const i=n(52847),o=n(54813),s=n(61522),a=n(17347),c=n(12133),l=n(19735),u=n(77570);var d,p;!function(e){e.Method="python/inExperiment"}(d||(d={})),function(e){e.Method="python/getExperimentValue"}(p||(p={}));class h{constructor(e,t,n,r,i,o){this.factory=e,this.experimentService=t,this.interpreterPathService=n,this.environmentService=r,this.workspace=i,this.extensions=o,this.disposables=[]}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stop().ignoreErrors()}async start(e,t,n){const r=await this.getPylanceExtension();this.lsVersion=(null==r?void 0:r.packageJSON.version)||"0";const i=null==r?void 0:r.exports;if(i&&i.client&&i.client.isEnabled())return this.pylanceApi=i,void await i.client.start();this.cancellationStrategy=new a.FileBasedCancellationStrategy,n.connectionOptions={cancellationStrategy:this.cancellationStrategy};const o=await this.factory.createLanguageClient(e,t,n);this.registerHandlers(o,e),this.disposables.push(this.workspace.onDidGrantWorkspaceTrust((()=>{o.sendNotification("python/workspaceTrusted",{isTrusted:!0})}))),await o.start(),this.languageClient=o}async stop(){if(this.pylanceApi){const e=this.pylanceApi;this.pylanceApi=void 0,await e.client.stop()}for(;this.disposables.length>0;)this.disposables.shift().dispose();if(this.languageClient){const e=this.languageClient;this.languageClient=void 0;try{await e.stop(),await e.dispose()}catch(e){(0,l.traceError)("Stopping language client failed",e)}}this.cancellationStrategy&&(this.cancellationStrategy.dispose(),this.cancellationStrategy=void 0)}loadExtension(){}registerHandlers(e,t){const n=new c.ProgressReporting(e);this.disposables.push(n),this.disposables.push(this.interpreterPathService.onDidChange((()=>{e.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})}))),this.disposables.push(this.environmentService.onDidEnvironmentVariablesChange((()=>{e.sendNotification(i.DidChangeConfigurationNotification.type,{settings:null})}))),e.onTelemetry((e=>{var t;const n=e.EventName||s.EventName.LANGUAGE_SERVER_TELEMETRY,r={...e.Properties,method:null===(t=e.Properties.method)||void 0===t?void 0:t.replace(/\//g,".")};(0,o.sendTelemetryEvent)(n,e.Measurements,r,e.Exception)})),e.onRequest(d.Method,(async e=>({inExperiment:await this.experimentService.inExperiment(e.experimentName)}))),e.onRequest(p.Method,(async e=>({value:await this.experimentService.getExperimentValue(e.experimentName)}))),this.disposables.push(e.onRequest("python/isTrustedWorkspace",(async()=>({isTrusted:this.workspace.isTrusted}))))}async getPylanceExtension(){const e=this.extensions.getExtension(u.PYLANCE_EXTENSION_ID);if(e)return e.isActive||await e.activate(),e}}r([(0,l.traceDecoratorVerbose)("Disposing language server")],h.prototype,"dispose",null),r([(0,l.traceDecoratorError)("Failed to start language server"),(0,o.captureTelemetry)(s.EventName.LANGUAGE_SERVER_ENABLED,void 0,!0,void 0,h.versionTelemetryProps)],h.prototype,"start",null),r([(0,l.traceDecoratorVerbose)("Disposing language server")],h.prototype,"stop",null),r([(0,o.captureTelemetry)(s.EventName.LANGUAGE_SERVER_READY,void 0,!0,void 0,h.versionTelemetryProps)],h.prototype,"registerHandlers",null),t.NodeLanguageServerProxy=h},57582:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.NodeLanguageServerManager=void 0,n(32727);const i=n(36952),o=n(54813),s=n(61522),a=n(23826),c=n(95479),l=n(19735),u=n(77570);class d{constructor(e,t,n,r,i){this.serviceContainer=e,this.analysisOptions=t,this.languageServerProxy=n,this.extensions=i,this.disposables=[],this.connected=!1,this.started=!1,d.commandDispose&&d.commandDispose.dispose(),d.commandDispose=r.registerCommand(a.Commands.RestartLS,(()=>{(0,o.sendTelemetryEvent)(s.EventName.LANGUAGE_SERVER_RESTART,void 0,{reason:"command"}),this.restartLanguageServer().ignoreErrors()}))}static versionTelemetryProps(e){return{lsVersion:e.lsVersion}}dispose(){this.stopLanguageServer().ignoreErrors(),d.commandDispose.dispose(),this.disposables.forEach((e=>e.dispose()))}async start(e,t){if(this.started)throw new Error("Language server already started");this.resource=e,this.interpreter=t,this.analysisOptions.onDidChange(this.restartLanguageServerDebounced,this,this.disposables);const n=this.extensions.getExtension(u.PYLANCE_EXTENSION_ID);this.lsVersion=(null==n?void 0:n.packageJSON.version)||"0",await this.analysisOptions.initialize(e,t),await this.startLanguageServer(),this.started=!0}connect(){var e;this.connected||(this.connected=!0,null===(e=this.middleware)||void 0===e||e.connect())}disconnect(){var e;this.connected&&(this.connected=!1,null===(e=this.middleware)||void 0===e||e.disconnect())}restartLanguageServerDebounced(){(0,o.sendTelemetryEvent)(s.EventName.LANGUAGE_SERVER_RESTART,void 0,{reason:"settings"}),this.restartLanguageServer().ignoreErrors()}async restartLanguageServer(){await this.stopLanguageServer(),await this.startLanguageServer()}async startLanguageServer(){const e=await this.analysisOptions.getAnalysisOptions();this.middleware=new c.NodeLanguageClientMiddleware(this.serviceContainer,this.lsVersion),e.middleware=this.middleware,this.connected&&this.middleware.connect(),await this.languageServerProxy.start(this.resource,this.interpreter,e)}async stopLanguageServer(){this.languageServerProxy&&await this.languageServerProxy.stop()}}r([(0,l.traceDecoratorError)("Failed to start language server")],d.prototype,"start",null),r([(0,i.debounceSync)(1e3)],d.prototype,"restartLanguageServerDebounced",null),r([(0,l.traceDecoratorError)("Failed to restart language server"),(0,l.traceDecoratorVerbose)("Restarting language server")],d.prototype,"restartLanguageServer",null),r([(0,o.captureTelemetry)(s.EventName.LANGUAGE_SERVER_STARTUP,void 0,!0,void 0,d.versionTelemetryProps),(0,l.traceDecoratorVerbose)("Starting language server")],d.prototype,"startLanguageServer",null),r([(0,l.traceDecoratorVerbose)("Stopping language server")],d.prototype,"stopLanguageServer",null),t.NodeLanguageServerManager=d},22430:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PartialModeStatusItem=void 0;const o=n(86700),s=n(17585),a=n(61684),c=n(67098);let l=class{constructor(e,t){this.workspace=e,this.disposables=t,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}async activate(){const{isTrusted:e,isVirtualWorkspace:t}=this.workspace;if(e&&!t)return;const n=this.createStatusItem();n&&this.disposables.push(n)}createStatusItem(){const e=n(66828);if("createLanguageStatusItem"in e.languages){const t=e.languages.createLanguageStatusItem("python.projectStatus",{language:"python"});return t.name=c.LanguageService.statusItem.name,t.severity=e.LanguageStatusSeverity.Warning,t.text=c.LanguageService.statusItem.text,t.detail=this.workspace.isTrusted?c.LanguageService.virtualWorkspaceStatusItem.detail:c.LanguageService.statusItem.detail,t.command={title:c.Common.learnMore,command:"vscode.open",arguments:[e.Uri.parse("https://aka.ms/AAdzyh4")]},t}}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IWorkspaceService)),i(1,(0,o.inject)(a.IDisposableRegistry))],l),t.PartialModeStatusItem=l},12133:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressReporting=void 0;const r=n(66828),i=n(59314);t.ProgressReporting=class{constructor(e){this.languageClient=e,this.languageClient.onNotification("python/setStatusBarMessage",(e=>{this.statusBarMessage&&this.statusBarMessage.dispose(),this.statusBarMessage=r.window.setStatusBarMessage(e)})),this.languageClient.onNotification("python/beginProgress",(e=>{this.progressDeferred||this.beginProgress()})),this.languageClient.onNotification("python/reportProgress",(e=>{this.progress||this.beginProgress(),this.progress.report({message:e})})),this.languageClient.onNotification("python/endProgress",(e=>{this.progressDeferred&&(this.progressDeferred.resolve(),this.progressDeferred=void 0,this.progress=void 0)}))}dispose(){this.statusBarMessage&&this.statusBarMessage.dispose()}beginProgress(){this.progressDeferred=(0,i.createDeferred)(),r.window.withProgress({location:r.ProgressLocation.Window,title:""},(e=>(this.progress=e,this.progressDeferred.promise)))}}},83796:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.RequirementsTxtLinkActivator=t.generatePyPiLink=void 0;const i=n(86700),o=n(66828);function s(e){const t=e.match(/^([A-Z0-9]|[A-Z0-9][A-Z0-9._-]*)($|=| |;|\[)/i);return t?`https://pypi.org/project/${t[1]}/`:null}t.generatePyPiLink=s;let a=class{constructor(){this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}async activate(){o.languages.registerHoverProvider([{pattern:"**/*requirement*.txt"},{pattern:"**/requirements/*.txt"}],{provideHover(e,t){const n=s(e.lineAt(t.line).text);return n?new o.Hover(n):null}})}};a=r([(0,i.injectable)()],a),t.RequirementsTxtLinkActivator=a},76546:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(69145),i=n(61702),o=n(63265),s=n(90819),a=n(52228),c=n(22430),l=n(72391),u=n(8335),d=n(83796);t.registerTypes=function(e){e.addSingleton(s.IExtensionActivationService,c.PartialModeStatusItem),e.add(s.IExtensionActivationManager,r.ExtensionActivationManager),e.addSingleton(s.ILanguageServerOutputChannel,o.LanguageServerOutputChannel),e.addSingleton(s.IExtensionSingleActivationService,i.ExtensionSurveyPrompt),e.addSingleton(s.IExtensionSingleActivationService,a.LoadLanguageServerExtension),e.addSingleton(l.ILanguageServerWatcher,u.LanguageServerWatcher),e.addBinding(l.ILanguageServerWatcher,s.IExtensionActivationService),e.addSingleton(s.IExtensionSingleActivationService,d.RequirementsTxtLinkActivator)}},90819:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.IExtensionSingleActivationService=t.ILanguageServerOutputChannel=t.ILanguageServerProxy=t.ILanguageServerManager=t.ILanguageServerAnalysisOptions=t.ILanguageClientFactory=t.ILanguageServerActivator=t.LanguageServerType=t.IExtensionActivationService=t.IExtensionActivationManager=void 0,t.IExtensionActivationManager=Symbol("IExtensionActivationManager"),t.IExtensionActivationService=Symbol("IExtensionActivationService"),(n=t.LanguageServerType||(t.LanguageServerType={})).Jedi="Jedi",n.JediLSP="JediLSP",n.Microsoft="Microsoft",n.Node="Pylance",n.None="None",t.ILanguageServerActivator=Symbol("ILanguageServerActivator"),t.ILanguageClientFactory=Symbol("ILanguageClientFactory"),t.ILanguageServerAnalysisOptions=Symbol("ILanguageServerAnalysisOptions"),t.ILanguageServerManager=Symbol("ILanguageServerManager"),t.ILanguageServerProxy=Symbol("ILanguageServerProxy"),t.ILanguageServerOutputChannel=Symbol("ILanguageServerOutputChannel"),t.IExtensionSingleActivationService=Symbol("IExtensionSingleActivationService")},10063:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildApi=void 0;const r=n(52847),i=n(46888),o=n(90819),s=n(77570),a=n(61684),c=n(12187),l=n(18639),u=n(66259),d=n(19735),p=n(12304),h=n(54813),f=n(8028),g=n(49575);t.buildApi=function(e,t,n,m){const v=n.get(a.IConfigurationService),y=n.get(l.IInterpreterService);t.addSingleton(u.JupyterExtensionIntegration,u.JupyterExtensionIntegration),t.addSingleton(f.TensorboardExtensionIntegration,f.TensorboardExtensionIntegration);const b=n.get(u.JupyterExtensionIntegration),S=n.get(f.TensorboardExtensionIntegration),_=n.get(o.ILanguageServerOutputChannel),E={ready:e.catch((e=>((0,d.traceError)("Failure during activation.",e),Promise.reject(e)))),jupyter:{registerHooks:()=>b.integrateWithJupyterExtension()},tensorboard:{registerHooks:()=>S.integrateWithTensorboardExtension()},debug:{getRemoteLauncherCommand:async(e,t,n=!0)=>(0,c.getDebugpyLauncherArgs)({host:e,port:t,waitUntilDebuggerAttaches:n}),getDebuggerPackagePath:async()=>(0,g.getDebugpyPath)()},settings:{onDidChangeExecutionDetails:y.onDidChangeInterpreterConfiguration,getExecutionDetails(e){const{pythonPath:t}=v.getSettings(e);return{execCommand:""===t?void 0:[t]}}},pylance:{createClient:(...e)=>{var t;const n=e[1];return n.outputChannel=null!==(t=n.outputChannel)&&void 0!==t?t:_.channel,new r.LanguageClient(s.PYTHON_LANGUAGE,i.PYLANCE_NAME,e[0],n)},start:e=>e.start(),stop:e=>e.stop(),getTelemetryReporter:()=>(0,h.getTelemetryReporter)()},environments:(0,p.buildEnvironmentApi)(m,n)};return(0,s.isTestExecution)()&&(E.serviceContainer=n,E.serviceManager=t),E}},5899:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExtension=t.PVSC_EXTENSION_ID=void 0;const r=n(66828);t.PVSC_EXTENSION_ID="ms-python.python",(t.PythonExtension||(t.PythonExtension={})).api=async function(){const e=r.extensions.getExtension(t.PVSC_EXTENSION_ID);if(void 0===e)throw new Error("Python extension is not installed or is disabled");return e.isActive||await e.activate(),e.exports}},19897:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationDiagnostics=void 0;const o=n(86700),s=n(66828),a=n(17585),c=n(77570),l=n(77498),u=n(19735),d=n(93971);async function p(e,t){await Promise.all(e.map((async e=>{const n=await e.diagnose(t);n.length>0&&(function(e){e.forEach((e=>{const t=`Diagnostic Code: ${e.code}, Message: ${e.message}`;switch(e.severity){case s.DiagnosticSeverity.Error:case s.DiagnosticSeverity.Warning:(0,u.traceLog)(t);break;default:(0,u.traceVerbose)(t)}}))}(n),await e.handle(n))})))}let h=class{constructor(e){this.serviceContainer=e}register(){this.serviceContainer.get(d.ISourceMapSupportService).register()}async performPreStartupHealthCheck(e){if((0,c.isTestExecution)())return;let t=this.serviceContainer.getAll(d.IDiagnosticsService);this.serviceContainer.get(a.IWorkspaceService).isTrusted||(t=t.filter((e=>e.runInUntrustedWorkspace))),await p(t.filter((e=>!e.runInBackground)),e),p(t.filter((e=>e.runInBackground)),e).ignoreErrors()}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IServiceContainer))],h),t.ApplicationDiagnostics=h},66674:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},o=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDiagnosticsService=t.BaseDiagnostic=void 0;const s=n(86700),a=n(17585),c=n(99910),l=n(54813),u=n(61522),d=n(93971);let p=class{constructor(e,t,n,r,i,o=!0,s="default"){this.code=e,this.message=t,this.severity=n,this.scope=r,this.resource=i,this.shouldShowPrompt=o,this.invokeHandler=s}};p=i([(0,s.injectable)()],p),t.BaseDiagnostic=p;let h=r=class{constructor(e,t,n,r=!1,i=!1){this.supportedDiagnosticCodes=e,this.serviceContainer=t,this.disposableRegistry=n,this.runInBackground=r,this.runInUntrustedWorkspace=i,this.filterService=t.get(d.IDiagnosticFilterService),n.push(this)}dispose(){}async handle(e){if(0===e.length)return;const t=await(0,c.asyncFilter)(e,(async e=>{if(!await this.canHandle(e))return!1;if(e.invokeHandler&&"always"===e.invokeHandler)return!0;const t=this.getDiagnosticsKey(e);return-1===r.handledDiagnosticCodeKeys.indexOf(t)&&(r.handledDiagnosticCodeKeys.push(t),!0)}));await this.onHandle(t)}async canHandle(e){return(0,l.sendTelemetryEvent)(u.EventName.DIAGNOSTICS_MESSAGE,void 0,{code:e.code}),this.supportedDiagnosticCodes.filter((t=>t===e.code)).length>0}getDiagnosticsKey(e){if(e.scope===d.DiagnosticScope.Global)return e.code;const t=this.serviceContainer.get(a.IWorkspaceService),n=e.resource?t.getWorkspaceFolder(e.resource):void 0;return`${e.code}dbe75733-0407-4124-a1b2-ca769dc30523${n?n.uri.fsPath:""}`}};h.handledDiagnosticCodeKeys=[],h=r=i([(0,s.injectable)(),o(0,(0,s.unmanaged)()),o(1,(0,s.unmanaged)()),o(2,(0,s.unmanaged)()),o(3,(0,s.unmanaged)()),o(4,(0,s.unmanaged)())],h),t.BaseDiagnosticsService=h},60474:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.EnvironmentPathVariableDiagnosticsService=t.EnvironmentPathVariableDiagnosticsServiceId=void 0;const o=n(86700),s=n(66828),a=n(17585);n(32727);const c=n(84974),l=n(61684),u=n(67098),d=n(77498),p=n(66674),h=n(16356),f=n(7587),g=n(51475),m=n(93971);class v extends p.BaseDiagnostic{constructor(e,t){super(f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic,e,s.DiagnosticSeverity.Warning,m.DiagnosticScope.Global,t)}}t.EnvironmentPathVariableDiagnosticsServiceId="EnvironmentPathVariableDiagnosticsServiceId";let y=class extends p.BaseDiagnosticsService{constructor(e,t){super([f.DiagnosticCodes.InvalidEnvironmentPathVariableDiagnostic],e,t,!0,!0),this.platform=this.serviceContainer.get(c.IPlatformService),this.messageService=e.get(m.IDiagnosticHandlerService,g.DiagnosticCommandPromptHandlerServiceId)}async diagnose(e){if(this.platform.isWindows&&this.doesPathVariableHaveInvalidEntries()){const t=this.serviceContainer.get(a.IApplicationEnvironment),n="The environment variable '{0}' seems to have some paths containing the '\"' character. The existence of such a character is known to have caused the {1} extension to not load. If the extension fails to load please modify your paths to remove this '\"' character.".format(this.platform.pathVariableName,t.extensionName);return[new v(n,e)]}return[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(h.IDiagnosticsCommandFactory),r=[{prompt:u.Common.ignore},{prompt:u.Common.alwaysIgnore,command:n.createCommand(t,{type:"ignore",options:m.DiagnosticScope.Global})},{prompt:u.Common.moreInfo,command:n.createCommand(t,{type:"launch",options:"https://aka.ms/Niq35h"})}];await this.messageService.handle(t,{commandPrompts:r})}doesPathVariableHaveInvalidEntries(){const e=this.serviceContainer.get(l.ICurrentProcess).env[this.platform.pathVariableName],t=this.serviceContainer.get(l.IPathUtils).delimiter;return(e||"").split(t).filter((e=>e.indexOf('"')>=0)).length>0}};y=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IServiceContainer)),i(1,(0,o.inject)(l.IDisposableRegistry))],y),t.EnvironmentPathVariableDiagnosticsService=y},42655:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPythonPathInDebuggerService=t.InvalidPythonPathInDebuggerServiceId=void 0;const o=n(86700),s=n(71017),a=n(66828),c=n(17585);n(32727);const l=n(61684),u=n(67098),d=n(48683),p=n(41691),h=n(18639),f=n(77498),g=n(19735),m=n(66674),v=n(16356),y=n(7587),b=n(51475),S=n(93971),_={[y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic]:u.Diagnostics.invalidPythonPathInDebuggerSettings,[y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic]:u.Diagnostics.invalidPythonPathInDebuggerLaunch};class E extends m.BaseDiagnostic{constructor(e,t){super(e,_[e],a.DiagnosticSeverity.Error,S.DiagnosticScope.WorkspaceFolder,t,void 0,"always")}}t.InvalidPythonPathInDebuggerServiceId="InvalidPythonPathInDebuggerServiceId";let w=class extends m.BaseDiagnosticsService{constructor(e,t,n,r,i,o,s,a){super([y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic],e,s,!0),this.workspace=t,this.commandFactory=n,this.interpreterHelper=r,this.documentManager=i,this.configService=o,this.messageService=a}async diagnose(){return[]}async validatePythonPath(e,t,n){return"${command:python.interpreterPath}"!==(e=e?this.resolveVariables(e,n):void 0)&&e||(e=this.configService.getSettings(n).pythonPath),!!await this.interpreterHelper.getInterpreterInformation(e).catch((()=>{}))||((0,g.traceError)(`Invalid Python Path '${e}'`),t===p.PythonPathSource.launchJson?this.handle([new E(y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic,n)]).catch((e=>(0,g.traceError)("Failed to handle invalid python path in launch.json debugger",e))).ignoreErrors():this.handle([new E(y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic,n)]).catch((e=>(0,g.traceError)("Failed to handle invalid python path in settings.json debugger",e))).ignoreErrors(),!1)}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0],n=this.getCommandPrompts(t);await this.messageService.handle(t,{commandPrompts:n})}resolveVariables(e,t){return new d.SystemVariables(t,void 0,this.workspace).resolveAny(e)}getCommandPrompts(e){switch(e.code){case y.DiagnosticCodes.InvalidPythonPathInDebuggerSettingsDiagnostic:return[{prompt:u.Common.selectPythonInterpreter,command:this.commandFactory.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})}];case y.DiagnosticCodes.InvalidPythonPathInDebuggerLaunchDiagnostic:return[{prompt:u.Common.openLaunch,command:{diagnostic:e,invoke:async()=>{const e=(t=a.workspace.workspaceFolders[0],s.join(t.uri.fsPath,".vscode","launch.json"));var t;const n=await this.documentManager.openTextDocument(e);await this.documentManager.showTextDocument(n)}}}];default:throw new Error("Invalid diagnostic for 'InvalidPythonPathInDebuggerService'")}}};w=r([(0,o.injectable)(),i(0,(0,o.inject)(f.IServiceContainer)),i(1,(0,o.inject)(c.IWorkspaceService)),i(2,(0,o.inject)(v.IDiagnosticsCommandFactory)),i(3,(0,o.inject)(h.IInterpreterHelper)),i(4,(0,o.inject)(c.IDocumentManager)),i(5,(0,o.inject)(l.IConfigurationService)),i(6,(0,o.inject)(l.IDisposableRegistry)),i(7,(0,o.inject)(S.IDiagnosticHandlerService)),i(7,(0,o.named)(b.DiagnosticCommandPromptHandlerServiceId))],w),t.InvalidPythonPathInDebuggerService=w},94117:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.JediPython27NotSupportedDiagnosticService=t.JediPython27NotSupportedDiagnosticServiceId=t.JediPython27NotSupportedDiagnostic=void 0;const o=n(86700),s=n(66828),a=n(90819),c=n(17585),l=n(61684),u=n(67098),d=n(18639),p=n(77498),h=n(66674),f=n(16356),g=n(7587),m=n(51475),v=n(93971);class y extends h.BaseDiagnostic{constructor(e,t){super(g.DiagnosticCodes.JediPython27NotSupportedDiagnostic,e,s.DiagnosticSeverity.Warning,v.DiagnosticScope.Global,t)}}t.JediPython27NotSupportedDiagnostic=y,t.JediPython27NotSupportedDiagnosticServiceId="JediPython27NotSupportedDiagnosticServiceId";let b=class extends h.BaseDiagnosticsService{constructor(e,t,n,r,i,o){super([g.DiagnosticCodes.JediPython27NotSupportedDiagnostic],e,o,!0),this.interpreterService=t,this.workspaceService=n,this.configurationService=r,this.messageService=i}async diagnose(e){var t,n;const r=await this.interpreterService.getActiveInterpreter(e),{languageServer:i}=this.configurationService.getSettings(e);return await this.updateLanguageServerSetting(e),r&&(null!==(n=null===(t=r.version)||void 0===t?void 0:t.major)&&void 0!==n?n:0)<3&&i===a.LanguageServerType.Jedi?[new y(u.Python27Support.jediMessage,e)]:[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(f.IDiagnosticsCommandFactory),r=[{prompt:u.Common.gotIt},{prompt:u.Common.doNotShowAgain,command:n.createCommand(t,{type:"ignore",options:v.DiagnosticScope.Global})}];await this.messageService.handle(t,{commandPrompts:r})}async updateLanguageServerSetting(e){const t=this.workspaceService.getConfiguration("python",e).inspect("languageServer");let n;if((null==t?void 0:t.workspaceValue)===a.LanguageServerType.JediLSP)n=s.ConfigurationTarget.Workspace;else{if((null==t?void 0:t.globalValue)!==a.LanguageServerType.JediLSP)return;n=s.ConfigurationTarget.Global}await this.configurationService.updateSetting("languageServer",a.LanguageServerType.Jedi,e,n)}};b=r([i(0,(0,o.inject)(p.IServiceContainer)),i(1,(0,o.inject)(d.IInterpreterService)),i(2,(0,o.inject)(c.IWorkspaceService)),i(3,(0,o.inject)(l.IConfigurationService)),i(4,(0,o.inject)(v.IDiagnosticHandlerService)),i(4,(0,o.named)(m.DiagnosticCommandPromptHandlerServiceId)),i(5,(0,o.inject)(l.IDisposableRegistry))],b),t.JediPython27NotSupportedDiagnosticService=b},21513:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidMacPythonInterpreterService=t.InvalidMacPythonInterpreterServiceId=t.InvalidMacPythonInterpreterDiagnostic=void 0;const o=n(86700),s=n(66828);n(32727);const a=n(84974),c=n(61684),l=n(18639),u=n(77498),d=n(66674),p=n(16356),h=n(7587),f=n(51475),g=n(93971),m=n(67098),v={[h.DiagnosticCodes.MacInterpreterSelected]:s.l10n.t("The selected macOS system install of Python is not recommended, some functionality in the extension will be limited. [Install another version of Python](https://www.python.org/downloads) or select a different interpreter for the best experience. [Learn more](https://aka.ms/AA7jfor).")};class y extends d.BaseDiagnostic{constructor(e,t){super(e,v[e],s.DiagnosticSeverity.Error,g.DiagnosticScope.WorkspaceFolder,t)}}t.InvalidMacPythonInterpreterDiagnostic=y,t.InvalidMacPythonInterpreterServiceId="InvalidMacPythonInterpreterServiceId";let b=class extends d.BaseDiagnosticsService{constructor(e,t,n,r){super([h.DiagnosticCodes.MacInterpreterSelected],e,t,!0),this.platform=n,this.helper=r,this.changeThrottleTimeout=1e3,this.addPythonPathChangedHandler()}dispose(){this.timeOut&&"number"!=typeof this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0)}async diagnose(e){if(!this.platform.isMac)return[];const t=this.serviceContainer.get(c.IConfigurationService).getSettings(e);return await this.helper.isMacDefaultPythonPath(t.pythonPath)?[new y(h.DiagnosticCodes.MacInterpreterSelected,e)]:[]}async onHandle(e){if(0===e.length)return;const t=this.serviceContainer.get(g.IDiagnosticHandlerService,f.DiagnosticCommandPromptHandlerServiceId);await Promise.all(e.map((async e=>{const n=await this.canHandle(e),r=await this.filterService.shouldIgnoreDiagnostic(e.code);if(!n||r)return;const i=this.getCommandPrompts(e);await t.handle(e,{commandPrompts:i,message:e.message})})))}addPythonPathChangedHandler(){const e=this.serviceContainer.get(c.IDisposableRegistry),t=this.serviceContainer.get(c.IInterpreterPathService);e.push(t.onDidChange((e=>this.onDidChangeConfiguration(e))))}async onDidChangeConfiguration(e){const t=e.uri;this.timeOut&&"number"!=typeof this.timeOut&&(clearTimeout(this.timeOut),this.timeOut=void 0),this.timeOut=setTimeout((()=>{this.timeOut=void 0,this.diagnose(t).then((e=>this.handle(e))).ignoreErrors()}),this.changeThrottleTimeout)}getCommandPrompts(e){const t=this.serviceContainer.get(p.IDiagnosticsCommandFactory);if(e.code===h.DiagnosticCodes.MacInterpreterSelected)return[{prompt:m.Common.selectPythonInterpreter,command:t.createCommand(e,{type:"executeVSCCommand",options:"python.setInterpreter"})},{prompt:m.Common.doNotShowAgain,command:t.createCommand(e,{type:"ignore",options:g.DiagnosticScope.Global})}];throw new Error("Invalid diagnostic for 'InvalidMacPythonInterpreterService'")}};b=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IServiceContainer)),i(1,(0,o.inject)(c.IDisposableRegistry)),i(2,(0,o.inject)(a.IPlatformService)),i(3,(0,o.inject)(l.IInterpreterHelper))],b),t.InvalidMacPythonInterpreterService=b},54205:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PowerShellActivationHackDiagnosticsService=t.PowerShellActivationHackDiagnosticsServiceId=t.PowershellActivationNotAvailableDiagnostic=void 0;const o=n(86700),s=n(66828);n(32727);const a=n(87688),c=n(61684),l=n(67098),u=n(77498),d=n(19735),p=n(54813),h=n(61522),f=n(66674),g=n(16356),m=n(7587),v=n(51475),y=n(93971),b=s.l10n.t("Activation of the selected Python environment is not supported in PowerShell. Consider changing your shell to Command Prompt.");class S extends f.BaseDiagnostic{constructor(e){super(m.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic,b,s.DiagnosticSeverity.Warning,y.DiagnosticScope.Global,e,void 0,"always")}}t.PowershellActivationNotAvailableDiagnostic=S,t.PowerShellActivationHackDiagnosticsServiceId="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic";let _=class extends f.BaseDiagnosticsService{constructor(e,t){super([m.DiagnosticCodes.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic],e,t,!0),this.messageService=e.get(y.IDiagnosticHandlerService,v.DiagnosticCommandPromptHandlerServiceId)}async diagnose(){return[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=this.serviceContainer.get(g.IDiagnosticsCommandFactory),r=this.serviceContainer.get(c.ICurrentProcess),i=this.serviceContainer.get(c.IConfigurationService),o=[{prompt:l.Common.useCommandPrompt,command:{diagnostic:t,invoke:async()=>{(0,p.sendTelemetryEvent)(h.EventName.DIAGNOSTICS_ACTION,void 0,{action:"switchToCommandPrompt"}),(0,a.useCommandPromptAsDefaultShell)(r,i).catch((e=>(0,d.traceError)("Use Command Prompt as default shell",e)))}}},{prompt:l.Common.ignore},{prompt:l.Common.alwaysIgnore,command:n.createCommand(t,{type:"ignore",options:y.DiagnosticScope.Global})},{prompt:l.Common.moreInfo,command:n.createCommand(t,{type:"launch",options:"https://aka.ms/CondaPwsh"})}];await this.messageService.handle(t,{commandPrompts:o})}};_=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IServiceContainer)),i(1,(0,o.inject)(c.IDisposableRegistry))],_),t.PowerShellActivationHackDiagnosticsService=_},9798:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PylanceDefaultDiagnosticService=t.PylanceDefaultDiagnosticServiceId=t.PylanceDefaultDiagnostic=t.PYLANCE_PROMPT_MEMENTO=void 0;const o=n(86700),s=n(66828),a=n(61684),c=n(67098),l=n(77498),u=n(66674),d=n(7587),p=n(51475),h=n(93971);t.PYLANCE_PROMPT_MEMENTO="pylanceDefaultPromptMemento";class f extends u.BaseDiagnostic{constructor(e,t){super(d.DiagnosticCodes.PylanceDefaultDiagnostic,e,s.DiagnosticSeverity.Information,h.DiagnosticScope.Global,t)}}t.PylanceDefaultDiagnostic=f,t.PylanceDefaultDiagnosticServiceId="PylanceDefaultDiagnosticServiceId";let g=class extends u.BaseDiagnosticsService{constructor(e,t,n,r){super([d.DiagnosticCodes.PylanceDefaultDiagnostic],e,r,!0,!0),this.context=t,this.messageService=n,this.initialMementoValue=void 0,this.initialMementoValue=this.context.globalState.get("extensionVersion")}async diagnose(e){return await this.shouldShowPrompt()?[new f(c.Diagnostics.pylanceDefaultMessage,e)]:[]}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];if(await this.filterService.shouldIgnoreDiagnostic(t.code))return;const n=[{prompt:c.Common.ok}];await this.messageService.handle(t,{commandPrompts:n,onClose:this.updateMemento.bind(this)})}async updateMemento(){await this.context.globalState.update(t.PYLANCE_PROMPT_MEMENTO,!0)}async shouldShowPrompt(){const e=this.initialMementoValue,n=this.context.globalState.get(t.PYLANCE_PROMPT_MEMENTO);return void 0===e?(await this.updateMemento(),!1):void 0===n}};g=r([i(0,(0,o.inject)(l.IServiceContainer)),i(1,(0,o.inject)(a.IExtensionContext)),i(2,(0,o.inject)(h.IDiagnosticHandlerService)),i(2,(0,o.named)(p.DiagnosticCommandPromptHandlerServiceId)),i(3,(0,o.inject)(a.IDisposableRegistry))],g),t.PylanceDefaultDiagnosticService=g},81613:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InvalidPythonInterpreterService=t.InvalidPythonInterpreterServiceId=t.DefaultShellDiagnostic=t.InvalidPythonInterpreterDiagnostic=void 0;const o=n(86700),s=n(66828);n(32727);const a=n(71017),c=n(61684),l=n(18639),u=n(77498),d=n(66674),p=n(16356),h=n(7587),f=n(51475),g=n(93971),m=n(67098),v=n(77570),y=n(17585),b=n(54813),S=n(61522),_=n(36952),E=n(3481),w=n(87450),T=n(84974),C=n(19735),P=n(31776),x=n(47237),I=n(29983),R=n(48431),D={[h.DiagnosticCodes.NoPythonInterpretersDiagnostic]:s.l10n.t("No Python interpreter is selected. Please select a Python interpreter to enable features such as IntelliSense, linting, and debugging."),[h.DiagnosticCodes.InvalidPythonInterpreterDiagnostic]:s.l10n.t("An Invalid Python interpreter is selected{0}, please try changing it to enable features such as IntelliSense, linting, and debugging. See output for more details regarding why the interpreter is invalid."),[h.DiagnosticCodes.InvalidComspecDiagnostic]:s.l10n.t('We detected an issue with one of your environment variables that breaks features such as IntelliSense, linting and debugging. Try setting the "ComSpec" variable to a valid Command Prompt path in your system to fix it.'),[h.DiagnosticCodes.IncompletePathVarDiagnostic]:s.l10n.t('We detected an issue with "Path" environment variable that breaks features such as IntelliSense, linting and debugging. Please edit it to make sure it contains the "System32" subdirectories.'),[h.DiagnosticCodes.DefaultShellErrorDiagnostic]:s.l10n.t('We detected an issue with your default shell that breaks features such as IntelliSense, linting and debugging. Try resetting "ComSpec" and "Path" environment variables to fix it.')};class O extends d.BaseDiagnostic{constructor(e,t,n,r=g.DiagnosticScope.WorkspaceFolder){var i;let o="";if(n.workspaceFile&&n.workspaceFolders&&(null===(i=n.workspaceFolders)||void 0===i?void 0:i.length)>1){const e=n.getWorkspaceFolder(t);e&&(o=` ${s.l10n.t("for workspace")} ${a.basename(e.uri.fsPath)}`)}super(e,D[e].format(o),s.DiagnosticSeverity.Error,r,t,void 0,"always")}}t.InvalidPythonInterpreterDiagnostic=O;class k extends d.BaseDiagnostic{constructor(e,t,n=g.DiagnosticScope.Global){super(e,D[e],s.DiagnosticSeverity.Error,n,t,void 0,"always")}}t.DefaultShellDiagnostic=k,t.InvalidPythonInterpreterServiceId="InvalidPythonInterpreterServiceId";let A=class extends d.BaseDiagnosticsService{constructor(e,t){super([h.DiagnosticCodes.NoPythonInterpretersDiagnostic,h.DiagnosticCodes.InvalidPythonInterpreterDiagnostic,h.DiagnosticCodes.InvalidComspecDiagnostic,h.DiagnosticCodes.IncompletePathVarDiagnostic,h.DiagnosticCodes.DefaultShellErrorDiagnostic],e,t,!1),this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){const e=this.serviceContainer.get(y.ICommandManager);this.disposableRegistry.push(e.registerCommand(v.Commands.TriggerEnvironmentSelection,(e=>this.triggerEnvSelectionIfNecessary(e))));const t=this.serviceContainer.get(l.IInterpreterService);this.disposableRegistry.push(t.onDidChangeInterpreterConfiguration((t=>e.executeCommand(v.Commands.TriggerEnvironmentSelection,t).then(E.noop,E.noop))))}async diagnose(e){return this.diagnoseDefaultShell(e)}async _manualDiagnose(e){const t=this.serviceContainer.get(y.IWorkspaceService),n=this.serviceContainer.get(l.IInterpreterService),r=await this.diagnoseDefaultShell(e);if(r.length>0)return r;const i=await n.hasInterpreters(),o="python"===this.serviceContainer.get(c.IInterpreterPathService).get(e);return!i&&o?[new O(h.DiagnosticCodes.NoPythonInterpretersDiagnostic,e,t,g.DiagnosticScope.Global)]:await n.getActiveInterpreter(e)?[]:[new O(h.DiagnosticCodes.InvalidPythonInterpreterDiagnostic,e,t)]}async triggerEnvSelectionIfNecessary(e){const t=await this._manualDiagnose(e);return!t.length||(this.handle(t).ignoreErrors(),!1)}async diagnoseDefaultShell(e){if((0,w.getOSType)()!==w.OSType.Windows)return[];const t=this.serviceContainer.get(l.IInterpreterService);if(await t.getActiveInterpreter(e))return[];try{await this.shellExecPython()}catch(t){if(-4058===t.errno)return(0,C.traceError)("ComSpec is likely set to an invalid value",(0,w.getEnvironmentVariable)("ComSpec")),await this.isComspecInvalid()?[new k(h.DiagnosticCodes.InvalidComspecDiagnostic,e)]:this.isPathVarIncomplete()?((0,C.traceError)("PATH env var appears to be incomplete",process.env.Path,process.env.PATH),[new k(h.DiagnosticCodes.IncompletePathVarDiagnostic,e)]):[new k(h.DiagnosticCodes.DefaultShellErrorDiagnostic,e)]}return[]}async isComspecInvalid(){var e;const t=null!==(e=(0,w.getEnvironmentVariable)("ComSpec"))&&void 0!==e?e:"";return this.serviceContainer.get(T.IFileSystem).fileExists(t).then((e=>!e))}isPathVarIncomplete(){var e;const t=(0,x.getSearchPathEnvVarNames)(),n=null!==(e=(0,w.getEnvironmentVariable)("SystemRoot"))&&void 0!==e?e:"C:\\WINDOWS",r=a.join(n,"system32");for(const e of t){const t=(0,w.getEnvironmentVariable)(e);if(t&&(0,R.normCasePath)(t).includes((0,R.normCasePath)(r)))return!1}return!0}async shellExecPython(){const e=this.serviceContainer.get(c.IConfigurationService),{pythonPath:t}=e.getSettings(),[n]=(0,P.getExecutable)(),r=[t,...n].reduce(((e,t)=>e?`${e} ${t.toCommandArgumentForPythonExt()}`:`${t.toCommandArgumentForPythonExt()}`),""),i=this.serviceContainer.get(I.IProcessServiceFactory);return(await i.create()).shellExec(r,{timeout:15e3})}async onHandle(e){if(0===e.length)return;const t=this.serviceContainer.get(g.IDiagnosticHandlerService,f.DiagnosticCommandPromptHandlerServiceId);await Promise.all(e.map((async e=>{if(!this.canHandle(e))return;const n=this.getCommandPrompts(e),r=function(e){if(e.code===h.DiagnosticCodes.NoPythonInterpretersDiagnostic)return e=>{(0,b.sendTelemetryEvent)(S.EventName.PYTHON_NOT_INSTALLED_PROMPT,void 0,{selection:e?"Download":"Ignore"})}}(e);await t.handle(e,{commandPrompts:n,message:e.message,onClose:r})})))}getCommandPrompts(e){const t=this.serviceContainer.get(p.IDiagnosticsCommandFactory);if(e.code===h.DiagnosticCodes.InvalidComspecDiagnostic||e.code===h.DiagnosticCodes.IncompletePathVarDiagnostic||e.code===h.DiagnosticCodes.DefaultShellErrorDiagnostic){const n={InvalidComspecDiagnostic:"https://aka.ms/AAk3djo",IncompletePathVarDiagnostic:"https://aka.ms/AAk744c",DefaultShellErrorDiagnostic:"https://aka.ms/AAk7qix"};return[{prompt:m.Common.seeInstructions,command:t.createCommand(e,{type:"launch",options:n[e.code]})}]}const n=[{prompt:m.Common.selectPythonInterpreter,command:t.createCommand(e,{type:"executeVSCCommand",options:v.Commands.Set_Interpreter})}];return e.code===h.DiagnosticCodes.InvalidPythonInterpreterDiagnostic&&n.push({prompt:m.Common.openOutputPanel,command:t.createCommand(e,{type:"executeVSCCommand",options:v.Commands.ViewOutput})}),n}};r([(0,_.cache)(-1,!0)],A.prototype,"shellExecPython",null),r([(0,_.cache)(1e3,!0)],A.prototype,"onHandle",null),A=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IServiceContainer)),i(1,(0,o.inject)(c.IDisposableRegistry))],A),t.InvalidPythonInterpreterService=A},49264:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SwitchToDefaultLanguageServerDiagnosticService=t.SwitchToDefaultLanguageServerDiagnosticServiceId=t.SwitchToDefaultLanguageServerDiagnostic=void 0;const o=n(86700),s=n(66828),a=n(90819),c=n(17585),l=n(61684),u=n(67098),d=n(77498),p=n(66674),h=n(7587),f=n(51475),g=n(93971);class m extends p.BaseDiagnostic{constructor(e,t){super(h.DiagnosticCodes.SwitchToDefaultLanguageServerDiagnostic,e,s.DiagnosticSeverity.Warning,g.DiagnosticScope.Global,t)}}t.SwitchToDefaultLanguageServerDiagnostic=m,t.SwitchToDefaultLanguageServerDiagnosticServiceId="SwitchToDefaultLanguageServerDiagnosticServiceId";let v=class extends p.BaseDiagnosticsService{constructor(e,t,n,r){super([h.DiagnosticCodes.JediPython27NotSupportedDiagnostic],e,r,!0,!0),this.workspaceService=t,this.messageService=n}diagnose(e){let t=!1;const n=this.workspaceService.getConfiguration("python"),r=n.inspect("languageServer");return(null==r?void 0:r.workspaceValue)===a.LanguageServerType.Microsoft&&(n.update("languageServer","Default",s.ConfigurationTarget.Workspace),t=!0),(null==r?void 0:r.globalValue)===a.LanguageServerType.Microsoft&&(n.update("languageServer","Default",s.ConfigurationTarget.Global),t=!0),Promise.resolve(t?[new m(u.SwitchToDefaultLS.bannerMessage,e)]:[])}async onHandle(e){if(0===e.length||!this.canHandle(e[0]))return;const t=e[0];await this.filterService.shouldIgnoreDiagnostic(t.code)||await this.messageService.handle(t,{commandPrompts:[{prompt:u.Common.gotIt}]})}};v=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IServiceContainer)),i(1,(0,o.inject)(c.IWorkspaceService)),i(2,(0,o.inject)(g.IDiagnosticHandlerService)),i(2,(0,o.named)(f.DiagnosticCommandPromptHandlerServiceId)),i(3,(0,o.inject)(l.IDisposableRegistry))],v),t.SwitchToDefaultLanguageServerDiagnosticService=v},69686:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDiagnosticCommand=void 0,t.BaseDiagnosticCommand=class{constructor(e){this.diagnostic=e}}},2852:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteVSCCommand=void 0;const r=n(17585),i=n(54813),o=n(61522),s=n(69686);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.commandName=n}async invoke(){return(0,i.sendTelemetryEvent)(o.EventName.DIAGNOSTICS_ACTION,void 0,{commandName:this.commandName}),this.serviceContainer.get(r.ICommandManager).executeCommand(this.commandName).then((()=>{}))}}t.ExecuteVSCCommand=a},23185:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticsCommandFactory=void 0;const o=n(86700),s=n(77498),a=n(2852),c=n(28634),l=n(33690);let u=class{constructor(e){this.serviceContainer=e}createCommand(e,t){const n=t.type;switch(t.type){case"ignore":return new c.IgnoreDiagnosticCommand(e,this.serviceContainer,t.options);case"launch":return new l.LaunchBrowserCommand(e,this.serviceContainer,t.options);case"executeVSCCommand":return new a.ExecuteVSCCommand(e,this.serviceContainer,t.options);default:throw new Error(`Unknown Diagnostic command commandType '${n}'`)}}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],u),t.DiagnosticsCommandFactory=u},28634:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IgnoreDiagnosticCommand=void 0;const r=n(54813),i=n(61522),o=n(93971),s=n(69686);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.scope=n}invoke(){return(0,r.sendTelemetryEvent)(i.EventName.DIAGNOSTICS_ACTION,void 0,{ignoreCode:this.diagnostic.code}),this.serviceContainer.get(o.IDiagnosticFilterService).ignoreDiagnostic(this.diagnostic.code,this.scope)}}t.IgnoreDiagnosticCommand=a},33690:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LaunchBrowserCommand=void 0;const r=n(61684),i=n(54813),o=n(61522),s=n(69686);class a extends s.BaseDiagnosticCommand{constructor(e,t,n){super(e),this.serviceContainer=t,this.url=n}async invoke(){return(0,i.sendTelemetryEvent)(o.EventName.DIAGNOSTICS_ACTION,void 0,{url:this.url}),this.serviceContainer.get(r.IBrowserService).launch(this.url)}}t.LaunchBrowserCommand=a},16356:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IDiagnosticsCommandFactory=void 0,t.IDiagnosticsCommandFactory=Symbol("IDiagnosticsCommandFactory")},7587:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticCodes=void 0,(n=t.DiagnosticCodes||(t.DiagnosticCodes={})).InvalidEnvironmentPathVariableDiagnostic="InvalidEnvironmentPathVariableDiagnostic",n.InvalidDebuggerTypeDiagnostic="InvalidDebuggerTypeDiagnostic",n.NoPythonInterpretersDiagnostic="NoPythonInterpretersDiagnostic",n.MacInterpreterSelected="MacInterpreterSelected",n.InvalidPythonPathInDebuggerSettingsDiagnostic="InvalidPythonPathInDebuggerSettingsDiagnostic",n.InvalidPythonPathInDebuggerLaunchDiagnostic="InvalidPythonPathInDebuggerLaunchDiagnostic",n.EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic="EnvironmentActivationInPowerShellWithBatchFilesNotSupportedDiagnostic",n.InvalidPythonInterpreterDiagnostic="InvalidPythonInterpreterDiagnostic",n.InvalidComspecDiagnostic="InvalidComspecDiagnostic",n.IncompletePathVarDiagnostic="IncompletePathVarDiagnostic",n.DefaultShellErrorDiagnostic="DefaultShellErrorDiagnostic",n.LSNotSupportedDiagnostic="LSNotSupportedDiagnostic",n.PythonPathDeprecatedDiagnostic="PythonPathDeprecatedDiagnostic",n.JustMyCodeDiagnostic="JustMyCodeDiagnostic",n.ConsoleTypeDiagnostic="ConsoleTypeDiagnostic",n.ConfigPythonPathDiagnostic="ConfigPythonPathDiagnostic",n.PylanceDefaultDiagnostic="PylanceDefaultDiagnostic",n.JediPython27NotSupportedDiagnostic="JediPython27NotSupportedDiagnostic",n.SwitchToDefaultLanguageServerDiagnostic="SwitchToDefaultLanguageServerDiagnostic",n.SwitchToPreReleaseExtensionDiagnostic="SwitchToPreReleaseExtensionDiagnostic"},70263:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticFilterService=t.FilterKeys=void 0;const o=n(86700),s=n(61684),a=n(77498),c=n(93971);var l;!function(e){e.GlobalDiagnosticFilter="GLOBAL_DIAGNOSTICS_FILTER",e.WorkspaceDiagnosticFilter="WORKSPACE_DIAGNOSTICS_FILTER"}(l=t.FilterKeys||(t.FilterKeys={}));let u=class{constructor(e){this.serviceContainer=e}async shouldIgnoreDiagnostic(e){const t=this.serviceContainer.get(s.IPersistentStateFactory),n=t.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]),r=t.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]);return n.value.indexOf(e)>=0||r.value.indexOf(e)>=0}async ignoreDiagnostic(e,t){const n=this.serviceContainer.get(s.IPersistentStateFactory),r=t===c.DiagnosticScope.Global?n.createGlobalPersistentState(l.GlobalDiagnosticFilter,[]):n.createWorkspacePersistentState(l.WorkspaceDiagnosticFilter,[]),i=r.value.slice();await r.updateValue(i.concat(e))}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],u),t.DiagnosticFilterService=u},51475:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DiagnosticCommandPromptHandlerService=t.DiagnosticCommandPromptHandlerServiceId=void 0;const o=n(86700),s=n(66828),a=n(17585),c=n(77498);t.DiagnosticCommandPromptHandlerServiceId="DiagnosticCommandPromptHandlerServiceId";let l=class{constructor(e){this.appShell=e.get(a.IApplicationShell)}async handle(e,t={commandPrompts:[]}){const n=t.commandPrompts.map((e=>e.prompt)),r=await this.displayMessage(t.message?t.message:e.message,e.severity,n);if(t.onClose&&t.onClose(r),!r)return;const i=t.commandPrompts.find((e=>e.prompt===r));i&&i.command&&await i.command.invoke()}async displayMessage(e,t,n){switch(t){case s.DiagnosticSeverity.Error:return this.appShell.showErrorMessage(e,...n);case s.DiagnosticSeverity.Warning:return this.appShell.showWarningMessage(e,...n);default:return this.appShell.showInformationMessage(e,...n)}}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],l),t.DiagnosticCommandPromptHandlerService=l},47066:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(90819),i=n(77651),o=n(19897),s=n(60474),a=n(42655),c=n(94117),l=n(21513),u=n(54205),d=n(9798),p=n(81613),h=n(49264),f=n(23185),g=n(16356),m=n(70263),v=n(51475),y=n(93971);t.registerTypes=function(e){e.addSingleton(y.IDiagnosticFilterService,m.DiagnosticFilterService),e.addSingleton(y.IDiagnosticHandlerService,v.DiagnosticCommandPromptHandlerService,v.DiagnosticCommandPromptHandlerServiceId),e.addSingleton(y.IDiagnosticsService,s.EnvironmentPathVariableDiagnosticsService,s.EnvironmentPathVariableDiagnosticsServiceId),e.addSingleton(y.IDiagnosticsService,p.InvalidPythonInterpreterService,p.InvalidPythonInterpreterServiceId),e.addSingleton(r.IExtensionSingleActivationService,p.InvalidPythonInterpreterService),e.addSingleton(y.IDiagnosticsService,a.InvalidPythonPathInDebuggerService,a.InvalidPythonPathInDebuggerServiceId),e.addSingleton(y.IDiagnosticsService,u.PowerShellActivationHackDiagnosticsService,u.PowerShellActivationHackDiagnosticsServiceId),e.addSingleton(y.IDiagnosticsService,l.InvalidMacPythonInterpreterService,l.InvalidMacPythonInterpreterServiceId),e.addSingleton(y.IDiagnosticsService,d.PylanceDefaultDiagnosticService,d.PylanceDefaultDiagnosticServiceId),e.addSingleton(y.IDiagnosticsService,c.JediPython27NotSupportedDiagnosticService,c.JediPython27NotSupportedDiagnosticServiceId),e.addSingleton(y.IDiagnosticsService,h.SwitchToDefaultLanguageServerDiagnosticService,h.SwitchToDefaultLanguageServerDiagnosticServiceId),e.addSingleton(g.IDiagnosticsCommandFactory,f.DiagnosticsCommandFactory),e.addSingleton(i.IApplicationDiagnostics,o.ApplicationDiagnostics)}},62867:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SourceMapSupportService=void 0;const o=n(86700),s=n(66828),a=n(17585),c=n(77570),l=n(61684),u=n(67098);let d=class{constructor(e,t,n,r){this.commandManager=e,this.disposables=t,this.configurationService=n,this.shell=r}register(){this.disposables.push(this.commandManager.registerCommand(c.Commands.Enable_SourceMap_Support,this.onEnable,this))}async enable(){await this.configurationService.updateSetting("diagnostics.sourceMapsEnabled",!0,void 0,s.ConfigurationTarget.Global),await this.commandManager.executeCommand("workbench.action.reloadWindow")}async onEnable(){const e=u.Diagnostics.enableSourceMapsAndReloadVSC;await this.shell.showWarningMessage(u.Diagnostics.warnBeforeEnablingSourceMaps,e)===e&&await this.enable()}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICommandManager)),i(1,(0,o.inject)(l.IDisposableRegistry)),i(2,(0,o.inject)(l.IConfigurationService)),i(3,(0,o.inject)(a.IApplicationShell))],d),t.SourceMapSupportService=d},93971:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ISourceMapSupportService=t.IInvalidPythonPathInDebuggerService=t.IInvalidPythonPathInSettings=t.IDiagnosticHandlerService=t.IDiagnosticFilterService=t.IDiagnosticsService=t.DiagnosticScope=void 0,(n=t.DiagnosticScope||(t.DiagnosticScope={})).Global="Global",n.WorkspaceFolder="WorkspaceFolder",t.IDiagnosticsService=Symbol("IDiagnosticsService"),t.IDiagnosticFilterService=Symbol("IDiagnosticFilterService"),t.IDiagnosticHandlerService=Symbol("IDiagnosticHandlerService"),t.IInvalidPythonPathInSettings=Symbol("IInvalidPythonPathInSettings"),t.IInvalidPythonPathInDebuggerService=Symbol("IInvalidPythonPathInDebuggerService"),t.ISourceMapSupportService=Symbol("ISourceMapSupportService")},30086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(47066),i=n(62867),o=n(93971);t.registerTypes=function(e){e.addSingleton(o.ISourceMapSupportService,i.SourceMapSupportService),(0,r.registerTypes)(e)}},77651:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IApplicationDiagnostics=void 0,t.IApplicationDiagnostics=Symbol("IApplicationDiagnostics")},17792:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveResourceService=void 0;const o=n(86700),s=n(17585);let a=class{constructor(e,t){this.documentManager=e,this.workspaceService=t}getActiveResource(){const e=this.documentManager.activeTextEditor;return e&&!e.document.isUntitled?e.document.uri:Array.isArray(this.workspaceService.workspaceFolders)&&this.workspaceService.workspaceFolders.length>0?this.workspaceService.workspaceFolders[0].uri:void 0}};a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IDocumentManager)),i(1,(0,o.inject)(s.IWorkspaceService))],a),t.ActiveResourceService=a},18718:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationEnvironment=void 0;const o=n(86700),s=n(71017),a=n(81249),c=n(66828),l=n(19735),u=n(84974),d=n(61684),p=n(87450);let h=class{constructor(e,t,n){this.platform=e,this.pathUtils=t,this.process=n}get userSettingsFile(){const e="insiders"===this.channel?"Code - Insiders":"Code";switch(this.platform.osType){case p.OSType.OSX:return s.join(this.pathUtils.home,"Library","Application Support",e,"User","settings.json");case p.OSType.Linux:return s.join(this.pathUtils.home,".config",e,"User","settings.json");case p.OSType.Windows:return this.process.env.APPDATA?s.join(this.process.env.APPDATA,e,"User","settings.json"):void 0;default:return}}get appName(){return c.env.appName}get vscodeVersion(){return c.version}get appRoot(){return c.env.appRoot}get uiKind(){return c.env.uiKind}get language(){return c.env.language}get sessionId(){return c.env.sessionId}get machineId(){return c.env.machineId}get remoteName(){return c.env.remoteName}get extensionName(){return this.packageJson.displayName}get shell(){return c.env.shell}get onDidChangeShell(){try{return c.env.onDidChangeShell}catch(e){return(0,l.traceError)("Failed to get onDidChangeShell API",e),(new c.EventEmitter).event}}get packageJson(){return n(4147)}get channel(){return this.appName.indexOf("Insider")>0?"insiders":"stable"}get extensionChannel(){const e=(0,a.parse)(this.packageJson.version);return!e||e.prerelease.length>0||e.minor%2==1?"insiders":"stable"}get uriScheme(){return c.env.uriScheme}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IPlatformService)),i(1,(0,o.inject)(d.IPathUtils)),i(2,(0,o.inject)(d.ICurrentProcess))],h),t.ApplicationEnvironment=h},13706:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ApplicationShell=void 0;const i=n(86700),o=n(66828),s=n(19735);let a=class{get onDidChangeWindowState(){return o.window.onDidChangeWindowState}showInformationMessage(e,t,...n){return o.window.showInformationMessage(e,t,...n)}showWarningMessage(e,t,...n){return o.window.showWarningMessage(e,t,...n)}showErrorMessage(e,t,...n){return o.window.showErrorMessage(e,t,...n)}showQuickPick(e,t,n){return o.window.showQuickPick(e,t,n)}showOpenDialog(e){return o.window.showOpenDialog(e)}showSaveDialog(e){return o.window.showSaveDialog(e)}showInputBox(e,t){return o.window.showInputBox(e,t)}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openUrl(e){o.env.openExternal(o.Uri.parse(e))}setStatusBarMessage(e,t){return o.window.setStatusBarMessage(e,t)}createStatusBarItem(e,t,n){return n?o.window.createStatusBarItem(n,e,t):o.window.createStatusBarItem(e,t)}showWorkspaceFolderPick(e){return o.window.showWorkspaceFolderPick(e)}withProgress(e,t){return o.window.withProgress(e,t)}withProgressCustomIcon(e,t){const n=(new o.CancellationTokenSource).token,r=this.createStatusBarItem(o.StatusBarAlignment.Left),i={report:t=>{r.text=`${e} ${t.message}`}};return r.show(),t(i,n).then((e=>(r.dispose(),e)))}createQuickPick(){return o.window.createQuickPick()}createInputBox(){return o.window.createInputBox()}createTreeView(e,t){return o.window.createTreeView(e,t)}createOutputChannel(e){return o.window.createOutputChannel(e,{log:!0})}createLanguageStatusItem(e,t){return o.languages.createLanguageStatusItem(e,t)}get onDidWriteTerminalData(){try{return o.window.onDidWriteTerminalData}catch(e){return(0,s.traceError)("Failed to get proposed API onDidWriteTerminalData",e),(new o.EventEmitter).event}}get onDidExecuteTerminalCommand(){try{return o.window.onDidExecuteTerminalCommand}catch(e){return void(0,s.traceError)("Failed to get proposed API TerminalExecutedCommand",e)}}};a=r([(0,i.injectable)()],a),t.ApplicationShell=a},77633:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ClipboardService=void 0;const i=n(86700),o=n(66828);let s=class{async readText(){return o.env.clipboard.readText()}async writeText(e){await o.env.clipboard.writeText(e)}};s=r([(0,i.injectable)()],s),t.ClipboardService=s},17381:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandManager=void 0;const i=n(86700),o=n(66828);let s=class{registerCommand(e,t,n){return o.commands.registerCommand(e,t,n)}registerTextEditorCommand(e,t,n){return o.commands.registerTextEditorCommand(e,t,n)}executeCommand(e,...t){return o.commands.executeCommand(e,...t)}getCommands(e){return o.commands.getCommands(e)}};s=r([(0,i.injectable)()],s),t.CommandManager=s},32907:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CreatePythonFileCommandHandler=void 0;const o=n(86700),s=n(77570),a=n(17585),c=n(54813),l=n(61522),u=n(61684);let d=class{constructor(e,t,n,r){this.commandManager=e,this.workspaceService=t,this.appShell=n,this.disposables=r,this.supportedWorkspaceTypes={untrustedWorkspace:!0,virtualWorkspace:!0}}async activate(){this.disposables.push(this.commandManager.registerCommand(s.Commands.CreateNewFile,this.createPythonFile,this))}async createPythonFile(){const e=await this.workspaceService.openTextDocument({language:"python"});this.appShell.showTextDocument(e),(0,c.sendTelemetryEvent)(l.EventName.CREATE_NEW_FILE_COMMAND)}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICommandManager)),i(1,(0,o.inject)(a.IWorkspaceService)),i(2,(0,o.inject)(a.IApplicationShell)),i(3,(0,o.inject)(u.IDisposableRegistry))],d),t.CreatePythonFileCommandHandler=d},30651:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReloadVSCodeCommandHandler=void 0;const o=n(86700),s=n(67098),a=n(3481),c=n(17585);let l=class{constructor(e,t){this.commandManager=e,this.appShell=t,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0}}async activate(){this.commandManager.registerCommand("python.reloadVSCode",this.onReloadVSCode,this)}async onReloadVSCode(e){await this.appShell.showInformationMessage(e,s.Common.reload)===s.Common.reload&&this.commandManager.executeCommand("workbench.action.reloadWindow").then(a.noop,a.noop)}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(c.ICommandManager)),i(1,(0,o.inject)(c.IApplicationShell))],l),t.ReloadVSCodeCommandHandler=l},5869:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ReportIssueCommandHandler=void 0;const o=n(55674),s=n(22037),a=n(71017),c=n(86700),l=n(96486),u=n(17585),d=n(63281),p=n(18639),h=n(77570),f=n(61684),g=n(54813),m=n(61522),v=n(81387),y=n(89515),b=n(48683),S=n(50189);let _=class{constructor(e,t,n,r,i){var o,s,c;this.commandManager=e,this.workspaceService=t,this.interpreterService=n,this.configurationService=r,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this.argSettingsPath=a.join(d.EXTENSION_ROOT_DIR,"resources","report_issue_user_settings.json"),this.templatePath=a.join(d.EXTENSION_ROOT_DIR,"resources","report_issue_template.md"),this.userDataTemplatePath=a.join(d.EXTENSION_ROOT_DIR,"resources","report_issue_user_data_template.md"),this.packageJSONSettings=null===(c=null===(s=null===(o=i.packageJson)||void 0===o?void 0:o.contributes)||void 0===s?void 0:s.configuration)||void 0===c?void 0:c.properties}async activate(){this.commandManager.registerCommand(h.Commands.ReportIssue,this.openReportIssue,this)}async openReportIssue(){var e,t,n,r;const i=this.configurationService.getSettings(),a=JSON.parse(await o.readFile(this.argSettingsPath,"utf8"));let c="";Object.keys(i).forEach((e=>{const t=a[e];if(t)if("object"==typeof t){let n=!1;const r=i[e];"object"==typeof r&&Object.keys(t).forEach((i=>{const o=t[i];if(o){const t=this.getDefaultValue(`${e}.${i}`);if(void 0===t||!(0,l.isEqual)(t,r[i])){n||(c=c.concat(s.EOL,e,s.EOL),n=!0);const t=!0===o?JSON.stringify(r[i]):'"<placeholder>"';c=c.concat(" ",i,": ",t,s.EOL)}}}))}else{const n=this.getDefaultValue(e);if(void 0===n||!(0,l.isEqual)(n,i[e])){const n=!0===t?JSON.stringify(i[e]):'"<placeholder>"';c=c.concat(s.EOL,e,": ",n,s.EOL)}}}));const u=await o.readFile(this.templatePath,"utf8"),d=await o.readFile(this.userDataTemplatePath,"utf8"),p=await this.interpreterService.getActiveInterpreter(),h=null!==(t=null===(e=null==p?void 0:p.version)||void 0===e?void 0:e.raw)&&void 0!==t?t:"",f=this.workspaceService.getConfiguration("python").get("languageServer")||"Not Found",y=(null==p?void 0:p.envType)||v.EnvironmentType.Unknown,b=(null!==(r=null===(n=this.workspaceService.workspaceFolders)||void 0===n?void 0:n.length)&&void 0!==r?r:0)>1&&""!==c?`Multiroot scenario, following user settings may not apply:${s.EOL}`:"",_=(0,S.getExtensions)().filter((e=>!e.id.startsWith("vscode."))).sort(((e,t)=>e.packageJSON.displayName.localeCompare(t.packageJSON.displayName))).map((e=>`|${e.packageJSON.displayName}|${e.id}|${e.packageJSON.version}|`));await this.commandManager.executeCommand("workbench.action.openIssueReporter",{extensionId:"ms-python.python",issueBody:u,data:d.format(h,y,f,b,c,_.join("\n"))}),(0,g.sendTelemetryEvent)(m.EventName.USE_REPORT_ISSUE_COMMAND,void 0,{})}getDefaultValue(e){var t;if(!this.packageJSONSettings)return;const n=y.PythonSettings.getSettingsUriAndTarget(void 0,this.workspaceService).uri;return new b.SystemVariables(n,void 0,this.workspaceService).resolveAny(null===(t=this.packageJSONSettings[`python.${e}`])||void 0===t?void 0:t.default)}};_=r([(0,c.injectable)(),i(0,(0,c.inject)(u.ICommandManager)),i(1,(0,c.inject)(u.IWorkspaceService)),i(2,(0,c.inject)(p.IInterpreterService)),i(3,(0,c.inject)(f.IConfigurationService)),i(4,(0,c.inject)(u.IApplicationEnvironment))],_),t.ReportIssueCommandHandler=_},54094:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKeyManager=void 0;const o=n(86700),s=n(17585);let a=class{constructor(e){this.commandManager=e,this.values=new Map}async setContext(e,t){return this.values.get(e)===t?Promise.resolve():(this.values.set(e,t),this.commandManager.executeCommand("setContext",e,t))}};a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.ICommandManager))],a),t.ContextKeyManager=a},56994:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionContextKey=void 0,(n=t.ExtensionContextKey||(t.ExtensionContextKey={})).showInstallPythonTile="showInstallPythonTile",n.HasFailedTests="hasFailedTests",n.RefreshingTests="refreshingTests",n.IsJupyterInstalled="isJupyterInstalled"},54144:function(e,t,n){"use strict";var r,i=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugService=void 0;const o=n(86700),s=n(66828);let a=r=class{get activeDebugConsole(){return s.debug.activeDebugConsole}get activeDebugSession(){return s.debug.activeDebugSession}get breakpoints(){return s.debug.breakpoints}get onDidChangeActiveDebugSession(){return s.debug.onDidChangeActiveDebugSession}get onDidStartDebugSession(){return s.debug.onDidStartDebugSession}get onDidReceiveDebugSessionCustomEvent(){return s.debug.onDidReceiveDebugSessionCustomEvent}get onDidTerminateDebugSession(){return s.debug.onDidTerminateDebugSession}get onDidChangeBreakpoints(){return s.debug.onDidChangeBreakpoints}registerDebugConfigurationProvider(e,t){return s.debug.registerDebugConfigurationProvider(e,t)}registerDebugAdapterTrackerFactory(e,t){return s.debug.registerDebugAdapterTrackerFactory(e,t)}startDebugging(e,t,n){return s.debug.startDebugging(e,t,n)}addBreakpoints(e){s.debug.addBreakpoints(e)}removeBreakpoints(e){s.debug.removeBreakpoints(e)}registerDebugAdapterDescriptorFactory(e,t){return s.debug.registerDebugAdapterDescriptorFactory(e,t)}};a.instance=new r,a=r=i([(0,o.injectable)()],a),t.DebugService=a},67808:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DebugSessionTelemetry=void 0;const o=n(86700),s=n(54813),a=n(61522),c=n(61684),l=n(70057),u=n(17585);class d{constructor(e){this.timer=new l.StopWatch,this.trigger="launch",this.trigger=e.configuration.request;const t=e.configuration;this.console=t.console}onWillStartSession(){this.sendTelemetry(a.EventName.DEBUG_SESSION_START)}onDidSendMessage(e){"response"===e.type&&"configurationDone"===e.command&&this.sendTelemetry(a.EventName.DEBUG_SESSION_USER_CODE_RUNNING)}onWillStopSession(){this.sendTelemetry(a.EventName.DEBUG_SESSION_STOP)}onError(e){this.sendTelemetry(a.EventName.DEBUG_SESSION_ERROR)}sendTelemetry(e){e===a.EventName.DEBUG_SESSION_START&&this.timer.reset();const t={trigger:this.trigger,console:this.console};(0,s.sendTelemetryEvent)(e,this.timer.elapsedTime,t)}}let p=class{constructor(e,t){this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},e.push(t.registerDebugAdapterTrackerFactory("python",this))}async activate(){}createDebugAdapterTracker(e){return new d(e)}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IDisposableRegistry)),i(1,(0,o.inject)(u.IDebugService))],p),t.DebugSessionTelemetry=p},72874:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.DocumentManager=void 0;const i=n(86700),o=n(66828);let s=class{get textDocuments(){return o.workspace.textDocuments}get activeTextEditor(){return o.window.activeTextEditor}get visibleTextEditors(){return o.window.visibleTextEditors}get onDidChangeActiveTextEditor(){return o.window.onDidChangeActiveTextEditor}get onDidChangeTextDocument(){return o.workspace.onDidChangeTextDocument}get onDidChangeVisibleTextEditors(){return o.window.onDidChangeVisibleTextEditors}get onDidChangeTextEditorSelection(){return o.window.onDidChangeTextEditorSelection}get onDidChangeTextEditorOptions(){return o.window.onDidChangeTextEditorOptions}get onDidChangeTextEditorViewColumn(){return o.window.onDidChangeTextEditorViewColumn}get onDidOpenTextDocument(){return o.workspace.onDidOpenTextDocument}get onDidCloseTextDocument(){return o.workspace.onDidCloseTextDocument}get onDidSaveTextDocument(){return o.workspace.onDidSaveTextDocument}showTextDocument(e,t,n){return o.window.showTextDocument(e,t,n)}openTextDocument(e){return o.workspace.openTextDocument(e)}applyEdit(e){return o.workspace.applyEdit(e)}createTextEditorDecorationType(e){return o.window.createTextEditorDecorationType(e)}};s=r([(0,i.injectable)()],s),t.DocumentManager=s},13578:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.Extensions=void 0;const o=n(86700),s=n(66828),a=n(77911),c=n(71017),l=n(84974),u=n(77570);let d=class{constructor(e){this.fs=e}get all(){return s.extensions.all}get onDidChange(){return s.extensions.onDidChange}getExtension(e){return s.extensions.getExtension(e)}get cachedExtensions(){return this._cachedExtensions||(this._cachedExtensions=s.extensions.all,s.extensions.onDidChange((()=>{this._cachedExtensions=s.extensions.all}))),this._cachedExtensions}async determineExtensionFromCallStack(){const{stack:e}=new Error;if(e){const t=c.join(u.EXTENSION_ROOT_DIR.toLowerCase(),c.sep),n=e.split("\n").map((e=>{const t=/\((.*)\)/.exec(e);if(t)return t[1]})).filter((e=>e&&!e.toLowerCase().startsWith(t))).filter((e=>this.cachedExtensions.some((t=>e.includes(t.extensionUri.path)||e.includes(t.extensionUri.fsPath)))));a.parse(new Error("Ex")).forEach((e=>{const r=e.getFileName();r&&!r.toLowerCase().startsWith(t)&&n.push(r)}));for(const e of n){let t=c.dirname(e),n=e;for(;t&&t.length<n.length;){const e=c.join(t,"package.json");if(await this.fs.pathExists(e)){const t=await this.fs.readFile(e);try{const e=JSON.parse(t);return{extensionId:`${e.publisher}.${e.name}`,displayName:e.displayName}}catch(e){}}n=t,t=c.dirname(t)}}}return{extensionId:"unknown",displayName:"unknown"}}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IFileSystem))],d),t.Extensions=d},64991:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.LanguageService=void 0;const i=n(86700),o=n(66828);let s=class{registerCompletionItemProvider(e,t,...n){return o.languages.registerCompletionItemProvider(e,t,...n)}};s=r([(0,i.injectable)()],s),t.LanguageService=s},17597:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressService=void 0;const r=n(59314);t.ProgressService=class{constructor(e){this.shell=e}showProgress(e){this.deferred||this.createProgress(e)}hideProgress(){this.deferred&&(this.deferred.resolve(),this.deferred=void 0)}createProgress(e){this.shell.withProgress(e,(()=>(this.deferred=(0,r.createDeferred)(),this.deferred.promise)))}}},53314:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalManager=void 0;const i=n(86700),o=n(66828),s=n(19735);let a=class{constructor(){this.didOpenTerminal=new o.EventEmitter,o.window.onDidOpenTerminal((e=>{this.didOpenTerminal.fire(c(e))}))}get onDidCloseTerminal(){return o.window.onDidCloseTerminal}get onDidOpenTerminal(){return this.didOpenTerminal.event}createTerminal(e){return c(o.window.createTerminal(e))}};function c(e){if(!e.isPatched){const t=e.sendText.bind(e);e.sendText=(e,n=!0)=>((0,s.traceLog)(`Send text to terminal: ${e}`),t(e,n)),e.isPatched=!0}return e}a=r([(0,i.injectable)()],a),t.TerminalManager=a},17585:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IClipboard=t.IActiveResourceService=t.ILanguageService=t.IApplicationEnvironment=t.IDebugService=t.ITerminalManager=t.IWorkspaceService=t.IDocumentManager=t.IJupyterExtensionDependencyManager=t.IContextKeyManager=t.ICommandManager=t.IApplicationShell=void 0,t.IApplicationShell=Symbol("IApplicationShell"),t.ICommandManager=Symbol("ICommandManager"),t.IContextKeyManager=Symbol("IContextKeyManager"),t.IJupyterExtensionDependencyManager=Symbol("IJupyterExtensionDependencyManager"),t.IDocumentManager=Symbol("IDocumentManager"),t.IWorkspaceService=Symbol("IWorkspaceService"),t.ITerminalManager=Symbol("ITerminalManager"),t.IDebugService=Symbol("IDebugManager"),t.IApplicationEnvironment=Symbol("IApplicationEnvironment"),t.ILanguageService=Symbol("ILanguageService"),t.IActiveResourceService=Symbol("IActiveResourceService"),t.IClipboard=Symbol("IClipboard")},91932:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PythonWelcome=void 0,(n=t.PythonWelcome||(t.PythonWelcome={})).name="pythonWelcome",n.windowsInstallId="python.installPythonWin8",n.linuxInstallId="python.installPythonLinux",n.macOSInstallId="python.installPythonMac"},56792:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.WorkspaceService=void 0;const i=n(86700),o=n(71017),s=n(66828),a=n(87450);let c=class{get onDidChangeConfiguration(){return s.workspace.onDidChangeConfiguration}get rootPath(){return Array.isArray(s.workspace.workspaceFolders)&&s.workspace.workspaceFolders.length>0?s.workspace.workspaceFolders[0].uri.fsPath:void 0}get workspaceFolders(){return s.workspace.workspaceFolders}get onDidChangeWorkspaceFolders(){return s.workspace.onDidChangeWorkspaceFolders}get workspaceFile(){return s.workspace.workspaceFile}getConfiguration(e,t,n=!1){return n?s.workspace.getConfiguration(e,{uri:t,languageId:"python"}):s.workspace.getConfiguration(e,t)}getWorkspaceFolder(e){return e?s.workspace.getWorkspaceFolder(e):void 0}asRelativePath(e,t){return s.workspace.asRelativePath(e,t)}createFileSystemWatcher(e,t,n,r){return s.workspace.createFileSystemWatcher(e,t,n,r)}findFiles(e,t,n,r){const i=void 0===t?this.searchExcludes:t;return s.workspace.findFiles(e,i,n,r)}getWorkspaceFolderIdentifier(e,t=""){const n=e?s.workspace.getWorkspaceFolder(e):void 0;return n?o.normalize((0,a.getOSType)()===a.OSType.Windows?n.uri.fsPath.toUpperCase():n.uri.fsPath):t}get isVirtualWorkspace(){return!(!s.workspace.workspaceFolders||!s.workspace.workspaceFolders.every((e=>"file"!==e.uri.scheme)))}get isTrusted(){return s.workspace.isTrusted}get onDidGrantWorkspaceTrust(){return s.workspace.onDidGrantWorkspaceTrust}openTextDocument(e){return s.workspace.openTextDocument(e)}get searchExcludes(){const e=this.getConfiguration("search.exclude");return`{${Object.keys(e).filter((t=>!0===e.get(t))).join(",")}}`}async save(e){try{return await s.workspace.save(e)}catch(e){return}}};c=r([(0,i.injectable)()],c),t.WorkspaceService=c},29979:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cancellation=t.wrapCancellationTokens=t.createPromiseFromCancellation=t.CancellationError=void 0;const r=n(66828),i=n(59314),o=n(67098);class s extends Error{constructor(){super(o.Common.canceled)}}t.CancellationError=s,t.createPromiseFromCancellation=function(e){return new Promise(((t,n)=>{e.token&&e.token.onCancellationRequested((()=>{if(e.token.isCancellationRequested){if("resolve"===e.cancelAction)return t(e.defaultValue);if("reject"===e.cancelAction)return n(new s)}}))}))},t.wrapCancellationTokens=function(...e){const t=new r.CancellationTokenSource;for(const n of e)if(n){if(n.isCancellationRequested)return n;n.onCancellationRequested((()=>t.cancel()))}return t.token},function(e){function t(e){return!!e&&e.isCancellationRequested}e.race=function(e,t){if(t){const n=(0,i.createDeferred)();return t.onCancellationRequested((()=>{n.completed||n.reject(new s)})),t.isCancellationRequested?n.reject(new s):e(t).then((e=>{n.completed||n.resolve(e)})).catch((e=>{n.completed||n.reject(e)})),n.promise}return e()},e.isCanceled=t,e.throwIfCanceled=function(e){if(t(e))throw new s}}(t.Cancellation||(t.Cancellation={}))},89515:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonSettings=void 0;const i=n(71017),o=n(57147),s=n(66828),a=n(90819);n(32727);const c=n(54813),l=n(61522),u=n(98634),d=n(56792),p=n(77570),h=n(36952),f=n(48683),g=n(87450),m=n(65243),v=n(58967);class y{constructor(e,t,n,r,i){this.interpreterAutoSelectionService=t,this.interpreterPathService=r,this.defaultLS=i,this.envFile="",this.venvPath="",this.venvFolders=[],this.activeStateToolPath="",this.condaPath="",this.pipenvPath="",this.poetryPath="",this.devOptions=[],this.globalModuleInstallation=!1,this.languageServer=a.LanguageServerType.Node,this.languageServerIsDefault=!0,this.changed=new s.EventEmitter,this.disposables=[],this._pythonPath="python",this._defaultInterpreterPath="",this.workspace=n||new d.WorkspaceService,this.workspaceRoot=e,this.initialize()}get onDidChange(){return this.changed.event}static onConfigChange(){return y.configChanged.event}get pythonPath(){return this._pythonPath}set pythonPath(e){if(this._pythonPath!==e)try{this._pythonPath=this.getPythonExecutable(e)}catch(t){this._pythonPath=e}}get defaultInterpreterPath(){return this._defaultInterpreterPath}set defaultInterpreterPath(e){if(this._defaultInterpreterPath!==e)try{this._defaultInterpreterPath=this.getPythonExecutable(e)}catch(t){this._defaultInterpreterPath=e}}static getInstance(e,t,n,r,i){n=n||new d.WorkspaceService;const o=y.getSettingsUriAndTarget(e,n).uri,s=o?o.fsPath:"";if(!y.pythonSettings.has(s)){const a=new y(o,t,n,r,i);y.pythonSettings.set(s,a),a.onDidChange((e=>y.debounceConfigChangeNotification(e)));const u=n.getConfiguration("editor",e||null),d=!!u&&u.get("formatOnType",!1);(0,c.sendTelemetryEvent)(l.EventName.FORMAT_ON_TYPE,void 0,{enabled:d})}return y.pythonSettings.get(s)}static debounceConfigChangeNotification(e){y.configChanged.fire(e)}static getSettingsUriAndTarget(e,t){t=t||new d.WorkspaceService;const n=e?t.getWorkspaceFolder(e):void 0;let r=n?n.uri:void 0;return!r&&Array.isArray(t.workspaceFolders)&&t.workspaceFolders.length>0&&(r=t.workspaceFolders[0].uri),{uri:r,target:r?s.ConfigurationTarget.WorkspaceFolder:s.ConfigurationTarget.Global}}static dispose(){if(!(0,p.isTestExecution)())throw new Error("Dispose can only be called from unit tests");y.pythonSettings.forEach((e=>e&&e.dispose())),y.pythonSettings.clear()}static toSerializable(e){const t={};return Object.entries(e).forEach((e=>{const[n,r]=e;n.includes("Manager")||n.includes("Service")||n.includes("onDid")||(t[n]=r)})),t}dispose(){this.disposables.forEach((e=>e&&e.dispose())),this.disposables=[]}update(e){var t,n,r,i,o;const s=null===(t=this.workspaceRoot)||void 0===t?void 0:t.fsPath,c=new f.SystemVariables(void 0,s,this.workspace);this.pythonPath=this.getPythonPath(c,s);const l=c.resolveAny(e.get("defaultInterpreterPath"));if(this.defaultInterpreterPath=l||p.DEFAULT_INTERPRETER_SETTING,this.defaultInterpreterPath===p.DEFAULT_INTERPRETER_SETTING){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);this.defaultInterpreterPath=null!==(n=null==e?void 0:e.path)&&void 0!==n?n:this.defaultInterpreterPath}this.defaultInterpreterPath=b(this.defaultInterpreterPath,s),this.venvPath=c.resolveAny(e.get("venvPath")),this.venvFolders=c.resolveAny(e.get("venvFolders"));const d=c.resolveAny(e.get("activeStateToolPath"));this.activeStateToolPath=d&&d.length>0?b(d,s):d;const h=c.resolveAny(e.get("condaPath"));this.condaPath=h&&h.length>0?b(h,s):h;const g=c.resolveAny(e.get("pipenvPath"));this.pipenvPath=g&&g.length>0?b(g,s):g;const m=c.resolveAny(e.get("poetryPath"));this.poetryPath=m&&m.length>0?b(m,s):m,this.interpreter=null!==(r=e.get("interpreter"))&&void 0!==r?r:{infoVisibility:"onPythonRelated"};let v=e.get("languageServer");v=c.resolveAny(v),v&&"Default"!==v&&"Microsoft"!==v&&Object.values(a.LanguageServerType).includes(v)?"JediLSP"===v?(this.languageServer=a.LanguageServerType.Jedi,this.languageServerIsDefault=!1):(this.languageServer=v,this.languageServerIsDefault=!1):(this.languageServer=null!==(o=null===(i=this.defaultLS)||void 0===i?void 0:i.defaultLSType)&&void 0!==o?o:a.LanguageServerType.None,this.languageServerIsDefault=!0);const y=c.resolveAny(e.get("autoComplete"));this.autoComplete?Object.assign(this.autoComplete,y):this.autoComplete=y;const S=e.get("envFile");this.envFile=c.resolveAny(S),(0,u.sendSettingTelemetry)(this.workspace,S),this.devOptions=c.resolveAny(e.get("devOptions")),this.devOptions=Array.isArray(this.devOptions)?this.devOptions:[],this.globalModuleInstallation=!0===e.get("globalModuleInstallation");const _=c.resolveAny(e.get("testing"));this.testing?Object.assign(this.testing,_):(this.testing=_,(0,p.isTestExecution)()&&!this.testing&&(this.testing={pytestArgs:[],unittestArgs:[],promptToConfigure:!0,debugPort:3e3,pytestEnabled:!1,unittestEnabled:!1,pytestPath:"pytest",autoTestDiscoverOnSaveEnabled:!0})),this.testing=this.testing?this.testing:{promptToConfigure:!0,debugPort:3e3,pytestArgs:[],pytestEnabled:!1,pytestPath:"pytest",unittestArgs:[],unittestEnabled:!1,autoTestDiscoverOnSaveEnabled:!0},this.testing.pytestPath=b(c.resolveAny(this.testing.pytestPath),s),this.testing.cwd&&(this.testing.cwd=b(c.resolveAny(this.testing.cwd),s)),this.testing.pytestArgs=this.testing.pytestArgs.map((e=>c.resolveAny(e))),this.testing.unittestArgs=this.testing.unittestArgs.map((e=>c.resolveAny(e)));const E=c.resolveAny(e.get("terminal"));this.terminal?Object.assign(this.terminal,E):(this.terminal=E,(0,p.isTestExecution)()&&!this.terminal&&(this.terminal={})),this.terminal=this.terminal?this.terminal:{executeInFileDir:!0,focusAfterLaunch:!1,launchArgs:[],activateEnvironment:!0,activateEnvInCurrentTerminal:!1},this.REPL=e.get("REPL");const w=e.get("experiments");this.experiments?Object.assign(this.experiments,w):this.experiments=w,this.experiments=this.experiments?this.experiments:{enabled:!0,optInto:[],optOutFrom:[]};const T=c.resolveAny(e.get("tensorBoard"));this.tensorBoard=T||{logDirectory:""},this.tensorBoard.logDirectory&&(this.tensorBoard.logDirectory=b(this.tensorBoard.logDirectory,s))}getPythonExecutable(e){return function(e){if("python"===(e=v(e))||-1===e.indexOf(i.sep)||i.basename(e)===i.dirname(e))return e;if(S(e))return e;const t=["python","python4","python3.6","python3.5","python3","python2.7","python2","python3.7","python3.8","python3.9"];for(let n of t)if((0,m.isWindows)()){if(n=`${n}.exe`,S(i.join(e,n)))return i.join(e,n);if(S(i.join(e,"Scripts",n)))return i.join(e,"Scripts",n)}else{if(S(i.join(e,n)))return i.join(e,n);if(S(i.join(e,"bin",n)))return i.join(e,"bin",n)}return e}(e)}onWorkspaceFoldersChanged(){const e=this.workspace.workspaceFolders.map((e=>e.uri.fsPath)),t=Array.from(y.pythonSettings.keys()).filter((t=>e.indexOf(t)<0));if(t.length>0)for(const e of t)y.pythonSettings.delete(e)}register(){y.pythonSettings=new Map,this.initialize()}onDidChanged(e){const t=this.workspace.getConfiguration("python",this.workspaceRoot);this.update(t),this.debounceChangeNotification(e)}initialize(){this.disposables.push(this.workspace.onDidChangeWorkspaceFolders(this.onWorkspaceFoldersChanged,this)),this.disposables.push(this.interpreterAutoSelectionService.onDidChangeAutoSelectedInterpreter((()=>{this.onDidChanged()}))),this.disposables.push(this.workspace.onDidChangeConfiguration((e=>{e.affectsConfiguration("python")&&this.onDidChanged(e)}))),this.interpreterPathService&&this.disposables.push(this.interpreterPathService.onDidChange((()=>{this.onDidChanged()})));const e=this.workspace.getConfiguration("python",this.workspaceRoot);e&&this.update(e)}debounceChangeNotification(e){this.changed.fire(e)}getPythonPath(e,t){if(this.pythonPath=e.resolveAny(this.interpreterPathService.get(this.workspaceRoot)),!process.env.CI_DISABLE_AUTO_SELECTION&&(0===this.pythonPath.length||"python"===this.pythonPath)&&this.interpreterAutoSelectionService){const e=this.interpreterAutoSelectionService.getAutoSelectedInterpreter(this.workspaceRoot);e&&(this.pythonPath=e.path,this.workspaceRoot&&this.interpreterAutoSelectionService.setWorkspaceInterpreter(this.workspaceRoot,e).ignoreErrors())}return b(this.pythonPath,t)}}function b(e,t){return t||(t=__dirname),e=v(e),(0,p.isTestExecution)()&&!e?t:-1===e.indexOf(i.sep)||i.isAbsolute(e)?e:i.resolve(t,e)}function S(e){return o.existsSync(e)&&i.basename((0,g.getOSType)()===g.OSType.Windows?e.toLowerCase():e).startsWith("python")}y.pythonSettings=new Map,y.configChanged=new s.EventEmitter,r([(0,h.debounceSync)(1)],y.prototype,"debounceChangeNotification",null),r([(0,h.debounceSync)(1)],y,"debounceConfigChangeNotification",null),t.PythonSettings=y},15797:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvExecutionPath=void 0;const o=n(86700),s=n(61684);let a=class{constructor(e){this.configService=e}get executable(){return this.configService.getSettings().pipenvPath}};a=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IConfigurationService))],a),t.PipEnvExecutionPath=a},30751:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ConfigurationService=void 0;const o=n(86700),s=n(66828),a=n(87282),c=n(77498),l=n(17585),u=n(89515),d=n(77570),p=n(61684);let h=class{constructor(e){this.serviceContainer=e,this.workspaceService=this.serviceContainer.get(l.IWorkspaceService)}get onDidChange(){return u.PythonSettings.onConfigChange()}getSettings(e){const t=this.serviceContainer.get(a.IInterpreterAutoSelectionService),n=this.serviceContainer.get(p.IInterpreterPathService),r=this.serviceContainer.tryGet(p.IDefaultLanguageServer);return u.PythonSettings.getInstance(e,t,this.workspaceService,n,r)}async updateSectionSetting(e,t,n,r,i){let o={uri:r,target:i||s.ConfigurationTarget.WorkspaceFolder};"python"===e&&i!==s.ConfigurationTarget.Global&&(o=u.PythonSettings.getSettingsUriAndTarget(r,this.workspaceService)),i=i||o.target;const a=this.workspaceService.getConfiguration(e,o.uri),c=a.inspect(t);void 0!==c&&(i===s.ConfigurationTarget.Global&&c.globalValue===n||i===s.ConfigurationTarget.Workspace&&c.workspaceValue===n||i===s.ConfigurationTarget.WorkspaceFolder&&c.workspaceFolderValue===n)||(await a.update(t,n,i),await this.verifySetting(a,i,t,n))}async updateSetting(e,t,n,r){return this.updateSectionSetting("python",e,t,n,r)}isTestExecution(){return"1"===process.env.VSC_PYTHON_CI_TEST}async verifySetting(e,t,n,r){if(this.isTestExecution()&&!(0,d.isUnitTestExecution)()){let i=0;do{const o=e.inspect(n);if(!o&&void 0===r)break;if(o&&void 0!==r){let e;if(e=t===s.ConfigurationTarget.Global?o.globalValue:t===s.ConfigurationTarget.Workspace?o.workspaceValue:o.workspaceFolderValue,e===r)break}await new Promise((e=>setTimeout(e,250))),i+=1}while(i<20)}}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],h),t.ConfigurationService=h},77570:function(e,t,n){"use strict";var r,i,o,s,a=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),c=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};function l(){return"1"===process.env.VSC_PYTHON_UNIT_TEST}Object.defineProperty(t,"__esModule",{value:!0}),t.UseProposedApi=t.isUnitTestExecution=t.isTestExecution=t.isCI=t.DEFAULT_INTERPRETER_SETTING=t.ThemeIcons=t.Octicons=t.Commands=t.CommandSource=t.AppinsightsKey=t.TENSORBOARD_EXTENSION_ID=t.JUPYTER_EXTENSION_ID=t.PYLANCE_EXTENSION_ID=t.PVSC_EXTENSION_ID=t.PYTHON_NOTEBOOKS=t.PYTHON=t.InteractiveScheme=t.InteractiveInputScheme=t.NotebookCellScheme=t.PYTHON_WARNINGS=t.PYTHON_LANGUAGE=void 0,t.PYTHON_LANGUAGE="python",t.PYTHON_WARNINGS="PYTHONWARNINGS",t.NotebookCellScheme="vscode-notebook-cell",t.InteractiveInputScheme="vscode-interactive-input",t.InteractiveScheme="vscode-interactive",t.PYTHON=[{scheme:"file",language:t.PYTHON_LANGUAGE},{scheme:"untitled",language:t.PYTHON_LANGUAGE},{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE}],t.PYTHON_NOTEBOOKS=[{scheme:"vscode-notebook",language:t.PYTHON_LANGUAGE},{scheme:t.NotebookCellScheme,language:t.PYTHON_LANGUAGE},{scheme:t.InteractiveInputScheme,language:t.PYTHON_LANGUAGE}],t.PVSC_EXTENSION_ID="ms-python.python",t.PYLANCE_EXTENSION_ID="ms-python.vscode-pylance",t.JUPYTER_EXTENSION_ID="ms-toolsai.jupyter",t.TENSORBOARD_EXTENSION_ID="ms-toolsai.tensorboard",t.AppinsightsKey="0c6ae279ed8443289764825290e4f9e2-1a736e7c-1324-4338-be46-fc2a58ae4d14-7255",(s=t.CommandSource||(t.CommandSource={})).ui="ui",s.commandPalette="commandpalette",(o=t.Commands||(t.Commands={})).ClearStorage="python.clearCacheAndReload",o.CreateNewFile="python.createNewFile",o.ClearWorkspaceInterpreter="python.clearWorkspaceInterpreter",o.Create_Environment="python.createEnvironment",o.Create_Environment_Button="python.createEnvironment-button",o.Create_Environment_Check="python.createEnvironmentCheck",o.Create_Terminal="python.createTerminal",o.Debug_In_Terminal="python.debugInTerminal",o.Enable_SourceMap_Support="python.enableSourceMapSupport",o.Exec_In_Terminal="python.execInTerminal",o.Exec_In_Terminal_Icon="python.execInTerminal-icon",o.Exec_In_Separate_Terminal="python.execInDedicatedTerminal",o.Exec_In_REPL="python.execInREPL",o.Exec_Selection_In_Django_Shell="python.execSelectionInDjangoShell",o.Exec_In_REPL_Enter="python.execInREPLEnter",o.Exec_Selection_In_Terminal="python.execSelectionInTerminal",o.GetSelectedInterpreterPath="python.interpreterPath",o.InstallJupyter="python.installJupyter",o.InstallPython="python.installPython",o.InstallPythonOnLinux="python.installPythonOnLinux",o.InstallPythonOnMac="python.installPythonOnMac",o.LaunchTensorBoard="python.launchTensorBoard",o.PickLocalProcess="python.pickLocalProcess",o.RefreshTensorBoard="python.refreshTensorBoard",o.ReportIssue="python.reportIssue",o.Set_Interpreter="python.setInterpreter",o.Set_ShebangInterpreter="python.setShebangInterpreter",o.Start_REPL="python.startREPL",o.Tests_Configure="python.configureTests",o.TriggerEnvironmentSelection="python.triggerEnvSelection",o.ViewOutput="python.viewOutput",(i=t.Octicons||(t.Octicons={})).Add="$(add)",i.Test_Pass="$(check)",i.Test_Fail="$(alert)",i.Test_Error="$(x)",i.Test_Skip="$(circle-slash)",i.Downloading="$(cloud-download)",i.Installing="$(desktop-download)",i.Search="$(search)",i.Search_Stop="$(search-stop)",i.Star="$(star-full)",i.Gear="$(gear)",i.Warning="$(warning)",i.Error="$(error)",i.Lightbulb="$(lightbulb)",i.Folder="$(folder)",(r=t.ThemeIcons||(t.ThemeIcons={})).Refresh="refresh",r.SpinningLoader="loading~spin",t.DEFAULT_INTERPRETER_SETTING="python",t.isCI="true"===process.env.TRAVIS||void 0!==process.env.TF_BUILD||"true"===process.env.GITHUB_ACTIONS,t.isTestExecution=function(){return"1"===process.env.VSC_PYTHON_CI_TEST||l()},t.isUnitTestExecution=l,t.UseProposedApi=Symbol("USE_VSC_PROPOSED_API"),c(n(63281),t)},94316:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContextKey=void 0,t.ContextKey=class{constructor(e,t){this.name=e,this.commandManager=t}get value(){return this.lastValue}async set(e){this.lastValue!==e&&(this.lastValue=e,await this.commandManager.executeCommand("setContext",this.name,this.lastValue))}}},26804:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedError=t.ErrorUtils=void 0;const r=n(22037);t.ErrorUtils=class{static outputHasModuleNotInstalledError(e,t){return!(!t||!(t.indexOf(`No module named ${e}`)>0||t.indexOf(`No module named '${e}'`)>0))}};class i extends Error{constructor(e,t){super(e),this.stack=`${new Error("").stack}${r.EOL}${r.EOL}${t.stack}`}}t.WrappedError=i},97300:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleNotInstalledError=void 0;class n extends Error{constructor(e){super(`Module '${e}' not installed.`)}}t.ModuleNotInstalledError=n},60717:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateEnvOnPipInstallTrigger=t.RecommendTensobardExtension=t.EnableTestAdapterRewrite=t.DiscoveryUsingWorkers=t.TerminalEnvVarActivation=t.ShowToolsExtensionPrompt=t.ShowExtensionSurveyPrompt=void 0,(t.ShowExtensionSurveyPrompt||(t.ShowExtensionSurveyPrompt={})).experiment="pythonSurveyNotification",(t.ShowToolsExtensionPrompt||(t.ShowToolsExtensionPrompt={})).experiment="pythonPromptNewToolsExt",(t.TerminalEnvVarActivation||(t.TerminalEnvVarActivation={})).experiment="pythonTerminalEnvVarActivation",(t.DiscoveryUsingWorkers||(t.DiscoveryUsingWorkers={})).experiment="pythonDiscoveryUsingWorkers",(t.EnableTestAdapterRewrite||(t.EnableTestAdapterRewrite={})).experiment="pythonTestAdapter",(t.RecommendTensobardExtension||(t.RecommendTensobardExtension={})).experiment="pythonRecommendTensorboardExt",(t.CreateEnvOnPipInstallTrigger||(t.CreateEnvOnPipInstallTrigger={})).experiment="pythonCreateEnvOnPipInstall"},46747:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inTerminalEnvVarExperiment=void 0;const r=n(66828),i=n(60717),o=n(77570),s=n(19735);t.inTerminalEnvVarExperiment=function(e){return!(0,o.isTestExecution)()&&r.env.remoteName&&r.workspace.workspaceFolders&&r.workspace.workspaceFolders.length>1?((0,s.traceInfo)("Not enabling terminal env var experiment in multiroot remote workspaces"),!1):!!e.inExperimentSync(i.TerminalEnvVarActivation.experiment)}},12474:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentService=t.TargetPopulation=void 0;const o=n(86700),s=n(66828),a=n(59035),c=n(19735),l=n(54813),u=n(61522),d=n(17585),p=n(77570),h=n(61684),f=n(31373),g="vscode";var m;!function(e){e.Insiders="python-insider",e.Public="python-public"}(m=t.TargetPopulation||(t.TargetPopulation={}));let v=class{constructor(e,t,n){this.workspaceService=e,this.appEnvironment=t,this.persistentState=n,this._optInto=[],this._optOutFrom=[],this.experiments=this.persistentState.createGlobalPersistentState("VSCode.ABExp.FeatureData",{features:[]});const r=this.workspaceService.getConfiguration("python"),i=r.get("experiments.optInto")||[],o=r.get("experiments.optOutFrom")||[];if(this._optInto=i.filter((e=>!e.endsWith("control"))),this._optOutFrom=o.filter((e=>!e.endsWith("control"))),this._optOutFrom.includes("All")||!1===r.get("experiments.enabled")?this.enabled=!1:this.enabled=!0,!this.enabled)return;let s;s="insiders"===this.appEnvironment.extensionChannel?m.Insiders:m.Public;const c=new f.ExperimentationTelemetry;this.experimentationService=(0,a.getExperimentationService)(p.PVSC_EXTENSION_ID,this.appEnvironment.packageJson.version,s,c,this.experiments.storage)}async activate(){if(this.experimentationService){const e=Date.now();await this.experimentationService.initializePromise,0===this.experiments.value.features.length&&(await this.experimentationService.initialFetch,(0,l.sendTelemetryEvent)(u.EventName.PYTHON_EXPERIMENTS_INIT_PERFORMANCE,Date.now()-e)),this.logExperiments()}!function(e,t,n){const r=y("python.experiments.optInto",n),i=y("python.experiments.optOutFrom",n),o=e.filter((e=>r.includes(e))),s=t.filter((e=>i.includes(e)));JSON.stringify(o.sort()),(0,l.sendTelemetryEvent)(u.EventName.PYTHON_EXPERIMENTS_OPT_IN_OPT_OUT_SETTINGS,void 0,{optedInto:JSON.stringify(o.sort()),optedOutFrom:JSON.stringify(s.sort())})}(this._optInto,this._optOutFrom,this.appEnvironment.packageJson)}async inExperiment(e){return this.inExperimentSync(e)}inExperimentSync(e){return!!this.experimentationService&&(!this._optOutFrom.includes("All")&&!this._optOutFrom.includes(e)&&(this._optInto.includes("All")||this._optInto.includes(e)?(this.experimentationService.getTreatmentVariable(g,e),!0):!0===this.experimentationService.getTreatmentVariable(g,e)))}async getExperimentValue(e){if(this.experimentationService&&!this._optOutFrom.includes("All")&&!this._optOutFrom.includes(e))return this.experimentationService.getTreatmentVariable(g,e)}logExperiments(){const e=this.workspaceService.getConfiguration("telemetry");let t=!1;e&&!1===e.get("enableTelemetry")&&((0,c.traceLog)("Telemetry is disabled"),t=!0),e&&"off"===e.get("telemetryLevel")&&((0,c.traceLog)("Telemetry level is off"),t=!0),t&&(0,c.traceLog)("Experiments are disabled, only manually opted experiments are active."),this._optOutFrom.includes("All")?(0,c.traceLog)(s.l10n.t("Experiment '{0}' is inactive","All")):this._optInto.includes("All")?(0,c.traceLog)(s.l10n.t("Experiment '{0}' is active","All")):(this._optOutFrom.filter((e=>"All"!==e&&e.toLowerCase().startsWith("python"))).forEach((e=>{(0,c.traceLog)(s.l10n.t("Experiment '{0}' is inactive",e))})),this._optInto.filter((e=>"All"!==e&&e.toLowerCase().startsWith("python"))).forEach((e=>{(0,c.traceLog)(s.l10n.t("Experiment '{0}' is active",e))})),t||this.experiments.value.features.forEach((e=>{!e.toLowerCase().startsWith("python")||this._optOutFrom.includes(e)||this._optInto.includes(e)||(0,c.traceLog)(s.l10n.t("Experiment '{0}' is active",e))})))}};function y(e,t){var n;const r=t.contributes.configuration.properties[e];return r&&null!==(n=r.items.enum)&&void 0!==n?n:[]}v=r([(0,o.injectable)(),i(0,(0,o.inject)(d.IWorkspaceService)),i(1,(0,o.inject)(d.IApplicationEnvironment)),i(2,(0,o.inject)(h.IPersistentStateFactory))],v),t.ExperimentService=v},31373:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExperimentationTelemetry=void 0;const r=n(54813);t.ExperimentationTelemetry=class{setSharedProperty(e,t){(0,r.setSharedProperty)(e,t)}postEvent(e,t){const n={};t.forEach(((e,t)=>{n[t]=e})),(0,r.sendTelemetryEvent)(e,void 0,n)}}},32727:()=>{"use strict";String.prototype.toCommandArgumentForPythonExt=function(){return this?!(this.indexOf(" ")>=0||this.indexOf("&")>=0||this.indexOf("(")>=0||this.indexOf(")")>=0)||this.startsWith('"')||this.endsWith('"')?this.toString():`"${this}"`:this},String.prototype.fileToCommandArgumentForPythonExt=function(){return this?this.toCommandArgumentForPythonExt().replace(/\\/g,"/"):this},String.prototype.trimQuotes=function(){return this?this.replace(/(^['"])|(['"]$)/g,""):this},Promise.prototype.ignoreErrors=function(){return this.catch((()=>{}))},String.prototype.format||(String.prototype.format=function(){const e=arguments;return this.replace(/{(\d+)}/g,((t,n)=>void 0===e[n]?t:e[n]))})},95939:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InstallationChannelManager=void 0;const o=n(86700),s=n(18639),a=n(77498),c=n(81387),l=n(17585),u=n(84974),d=n(67098),p=n(3481),h=n(92674),f=n(59747);let g=class{constructor(e){this.serviceContainer=e}async getInstallationChannel(e,t){const n=await this.getInstallationChannels(t);if(1===n.length)return n[0];const r=h.ProductNames.get(e),i=this.serviceContainer.get(l.IApplicationShell);if(0===n.length)return void await this.showNoInstallersMessage((0,p.isResource)(t)?t:void 0);const o=`Select an option to install ${r}`,s=n.map((e=>({label:`Install using ${e.displayName}`,description:"",installer:e}))),a=await i.showQuickPick(s,{matchOnDescription:!0,matchOnDetail:!0,placeHolder:o});return a?a.installer:void 0}async getInstallationChannels(e){const t=this.serviceContainer.getAll(f.IModuleInstaller),n=[];if(0===t.length)return[];t.sort(((e,t)=>t.priority-e.priority));let r=t[0].priority;for(const i of t){if(i.priority!==r){if(n.length>0)break;r=i.priority}await i.isSupported(e)&&n.push(i)}return n}async showNoInstallersMessage(e){const t=this.serviceContainer.get(s.IInterpreterService),n=await t.getActiveInterpreter(e);if(!n)return;const r=this.serviceContainer.get(l.IApplicationShell);let i;if(i=n.envType===c.EnvironmentType.Conda?await r.showErrorMessage(d.Installer.noCondaOrPipInstaller,d.Installer.searchForHelp):await r.showErrorMessage(d.Installer.noPipInstaller,d.Installer.searchForHelp),"Search for help"===i){const e=this.serviceContainer.get(u.IPlatformService),t=e.isWindows?"Windows":e.isMac?"MacOS":"Linux";r.openUrl(`https://www.bing.com/search?q=Install Pip ${t} ${n.envType===c.EnvironmentType.Conda?"Conda":""}`)}}};g=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],g),t.InstallationChannelManager=g},5181:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CondaInstaller=void 0;const o=n(86700),s=n(18639),a=n(77498),c=n(44773),l=n(81387),u=n(61684),d=n(3481),p=n(30135),h=n(59747);let f=class extends p.ModuleInstaller{constructor(e){super(e)}get name(){return"Conda"}get displayName(){return"Conda"}get type(){return l.ModuleInstallerType.Conda}get priority(){return 10}async isSupported(e){if(!1===this._isCondaAvailable)return!1;const t=this.serviceContainer.get(s.ICondaService);return this._isCondaAvailable=await t.isCondaAvailable(),!!this._isCondaAvailable&&this.isCurrentEnvironmentACondaEnvironment(e)}async getExecutionInfo(e,t,n=0){var r;const i=this.serviceContainer.get(s.ICondaService),o=await i.getCondaFile(!0),a=(0,d.isResource)(t)?this.serviceContainer.get(u.IConfigurationService).getSettings(t).pythonPath:null!==(r=(0,c.getEnvPath)(t.path,t.envPath).path)&&void 0!==r?r:"",l=this.serviceContainer.get(s.IComponentAdapter),f=await l.getCondaEnvironment(a),g=[n&h.ModuleInstallFlags.upgrade?"update":"install"];return[u.Product.tensorboard].map(p.translateProductToModule).includes(e)&&g.push("-c","conda-forge"),f&&f.name?(g.push("--name"),g.push(f.name.toCommandArgumentForPythonExt())):f&&f.path&&(g.push("--prefix"),g.push(f.path.fileToCommandArgumentForPythonExt())),n&h.ModuleInstallFlags.updateDependencies&&g.push("--update-deps"),n&h.ModuleInstallFlags.reInstall&&g.push("--force-reinstall"),g.push(e),g.push("-y"),{args:g,execPath:o,useShell:!0}}async isCurrentEnvironmentACondaEnvironment(e){var t;const n=this.serviceContainer.get(s.IComponentAdapter),r=(0,d.isResource)(e)?this.serviceContainer.get(u.IConfigurationService).getSettings(e).pythonPath:null!==(t=(0,c.getEnvPath)(e.path,e.envPath).path)&&void 0!==t?t:"";return n.isCondaEnvironment(r)}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],f),t.CondaInstaller=f},30135:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.translateProductToModule=t.ModuleInstaller=void 0;const i=n(86700),o=n(71017),s=n(66828),a=n(18639),c=n(19735),l=n(81387),u=n(54813),d=n(61522),p=n(17585),h=n(29979),f=n(84974),g=n(31776),m=n(29983),v=n(58400),y=n(61684),b=n(3481),S=n(92674);let _=class{constructor(e){this.serviceContainer=e}async installModule(e,t,n,r,i){const c=!(null==i?void 0:i.installAsProcess),m="string"==typeof e?e:E(e),v="string"==typeof e?m:S.ProductNames.get(e);(0,u.sendTelemetryEvent)(d.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:this.displayName,productName:v});const _=(0,b.isResource)(t)?t:void 0,w=await this.getExecutionInfo(m,t,r),T=async e=>{var n;const r=await this.processInstallArgs(w.args,t);if(w.moduleName){const i=this.serviceContainer.get(y.IConfigurationService).getSettings(_),s=this.serviceContainer.get(a.IInterpreterService),u=(0,b.isResource)(t)?await s.getActiveInterpreter(t):t,d=null!==(n=null==u?void 0:u.path)&&void 0!==n?n:i.pythonPath,p=(0,b.isResource)(t)?d:t.path,h=g.execModule(w.moduleName,r);if(u&&u.envType===l.EnvironmentType.Unknown)if(i.globalModuleInstallation){const n=this.serviceContainer.get(f.IFileSystem);await n.isDirReadonly(o.dirname(p)).catch((e=>!0))?this.elevatedInstall(p,h):await this.executeCommand(c,t,p,h,e,w.useShell)}else m===E(y.Product.pip)||l.virtualEnvTypes.includes(u.envType)?await this.executeCommand(c,t,p,h,e,w.useShell):await this.executeCommand(c,t,p,h.concat(["--user"]),e,w.useShell);else await this.executeCommand(c,t,p,h,e,w.useShell)}else await this.executeCommand(c,t,w.execPath,r,e,w.useShell)};if(n){const e=this.serviceContainer.get(p.IApplicationShell),t={location:s.ProgressLocation.Notification,cancellable:!0,title:s.l10n.t("Installing {0}",m)};await e.withProgress(t,(async(e,t)=>T((0,h.wrapCancellationTokens)(t,n))))}else await T(n)}elevatedInstall(e,t){const r=this.serviceContainer.get(y.ILogOutputChannel),i=`"${e.replace(/\\/g,"/")}" ${t.join(" ")}`;(0,c.traceLog)(`[Elevated] ${i}`),n(65425).exec(i,{name:"VS Code Python"},(async(e,t,n)=>{if(e){const t=this.serviceContainer.get(p.IApplicationShell);await t.showErrorMessage(e)}else r.show(),t&&(0,c.traceLog)(t),n&&(0,c.traceError)(`Warning: ${n}`)}))}async processInstallArgs(e,t){const n=e.findIndex((e=>"PYLINT"===e.toUpperCase()));if(-1===n)return e;const r=this.serviceContainer.get(a.IInterpreterService),i=(0,b.isResource)(t)?await r.getActiveInterpreter(t):t;if(i&&i.version&&2===i.version.major){const t=[...e];return t[n]='"pylint<2.0.0"',t}return e}async executeCommand(e,t,n,r,i,o){const s={};if((0,b.isResource)(t)?s.resource=t:s.interpreter=t,e)this.serviceContainer.get(v.ITerminalServiceFactory).getTerminalService(s).sendCommand(n,r,i);else{const e=this.serviceContainer.get(m.IProcessServiceFactory),t=await e.create(s.resource);if(o){const e=[n,...r].reduce(((e,t)=>e?`${e} ${t.toCommandArgumentForPythonExt()}`:`${t.toCommandArgumentForPythonExt()}`),"");await t.shellExec(e)}else await t.exec(n,r)}}};function E(e){switch(e){case y.Product.pytest:return"pytest";case y.Product.unittest:return"unittest";case y.Product.tensorboard:return"tensorboard";case y.Product.torchProfilerInstallName:return"torch-tb-profiler";case y.Product.torchProfilerImportName:return"torch_tb_profiler";case y.Product.pip:return"pip";case y.Product.ensurepip:return"ensurepip";case y.Product.python:return"python";default:throw new Error(`Product ${e} cannot be installed as a Python Module.`)}}_=r([(0,i.injectable)()],_),t.ModuleInstaller=_,t.translateProductToModule=E},22577:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvInstaller=t.pipenvName=void 0;const o=n(86700),s=n(18639),a=n(77498),c=n(37924),l=n(81387),u=n(17585),d=n(3481),p=n(30135),h=n(59747);t.pipenvName="pipenv";let f=class extends p.ModuleInstaller{get name(){return"pipenv"}get type(){return l.ModuleInstallerType.Pipenv}get displayName(){return t.pipenvName}get priority(){return 10}constructor(e){super(e)}async isSupported(e){if((0,d.isResource)(e)){const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e),n=e?this.serviceContainer.get(u.IWorkspaceService).getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==l.EnvironmentType.Pipenv)&&(0,c.isPipenvEnvironmentRelatedToFolder)(t.path,n.uri.fsPath)}return e.envType===l.EnvironmentType.Pipenv}async getExecutionInfo(e,n,r=0){return{args:[r&h.ModuleInstallFlags.reInstall||r&h.ModuleInstallFlags.updateDependencies||r&h.ModuleInstallFlags.upgrade?"update":"install",e,"--dev"],execPath:t.pipenvName}}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],f),t.PipEnvInstaller=f},36352:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipInstaller=void 0;const o=n(86700),s=n(77498),a=n(81387),c=n(17585),l=n(29983),u=n(61684),d=n(3481),p=n(30135),h=n(59747),f=n(71017),g=n(48266),m=n(92674),v=n(54813),y=n(61522),b=n(18639),S=n(48431);let _=class extends p.ModuleInstaller{get name(){return"Pip"}get type(){return a.ModuleInstallerType.Pip}get displayName(){return"Pip"}get priority(){return 0}constructor(e){super(e)}async isSupported(e){return!1!==await async function(e,t){var n;const r=e.get(b.IInterpreterService),i=(0,d.isResource)(t)?await r.getActiveInterpreter(t):t;if(i)return!((null===(n=i.envPath)||void 0===n?void 0:n.length)&&i.envType===a.EnvironmentType.Conda&&!(0,S.isParentPath)(null==i?void 0:i.path,i.envPath))}(this.serviceContainer,e)&&this.isPipAvailable(e)}async getExecutionInfo(e,t,n=0){var r,i,o;if(e===(0,p.translateProductToModule)(u.Product.pip)){const e=(0,d.isResource)(t)?"":`${(null===(r=t.version)||void 0===r?void 0:r.major)||""}.${(null===(i=t.version)||void 0===i?void 0:i.minor)||""}.${(null===(o=t.version)||void 0===o?void 0:o.patch)||""}`,n=(0,d.isResource)(t)?void 0:t.envType;(0,v.sendTelemetryEvent)(y.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:a.ModuleInstallerType.Pip,productName:m.ProductNames.get(u.Product.pip),version:e,envType:n});const s=this.serviceContainer.get(u.IInstaller);if(await s.isInstalled(u.Product.ensurepip,t))return{args:[],moduleName:"ensurepip"};(0,v.sendTelemetryEvent)(y.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:a.ModuleInstallerType.Pip,productName:m.ProductNames.get(u.Product.ensurepip),version:e,envType:n});const c=this.serviceContainer.get(b.IInterpreterService),l=(0,d.isResource)(t)?await c.getActiveInterpreter(t):t;return{execPath:l?l.path:"python",args:[f.join(g._SCRIPTS_DIR,"get-pip.py")]}}const s=[],l=this.serviceContainer.get(c.IWorkspaceService).getConfiguration("http").get("proxy","");return l.length>0&&(s.push("--proxy"),s.push(l)),s.push("install","-U"),n&h.ModuleInstallFlags.reInstall&&s.push("--force-reinstall"),{args:[...s,e],moduleName:"pip"}}isPipAvailable(e){const t=this.serviceContainer.get(l.IPythonExecutionFactory),n=(0,d.isResource)(e)?e:void 0,r=(0,d.isResource)(e)?void 0:e.path;return t.create({resource:n,pythonPath:r}).then((e=>e.isModuleInstalled("pip"))).catch((()=>!1))}};_=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],_),t.PipInstaller=_},73300:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PoetryInstaller=t.poetryName=void 0;const o=n(86700),s=n(18639),a=n(77498),c=n(13298),l=n(81387),u=n(17585),d=n(61684),p=n(3481),h=n(30135);t.poetryName="poetry";let f=class extends h.ModuleInstaller{constructor(e,t,n){super(e),this.workspaceService=t,this.configurationService=n}get name(){return"poetry"}get type(){return l.ModuleInstallerType.Poetry}get displayName(){return t.poetryName}get priority(){return 10}async isSupported(e){if(!e)return!1;if(!(0,p.isResource)(e))return!1;const t=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e),n=e?this.workspaceService.getWorkspaceFolder(e):void 0;return!(!t||!n||t.envType!==l.EnvironmentType.Poetry)&&(0,c.isPoetryEnvironmentRelatedToFolder)(t.path,n.uri.fsPath,this.configurationService.getSettings(e).poetryPath)}async getExecutionInfo(e,t){return{args:["add","--group","dev",e],execPath:this.configurationService.getSettings((0,p.isResource)(t)?t:void 0).poetryPath}}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer)),i(1,(0,o.inject)(u.IWorkspaceService)),i(2,(0,o.inject)(d.IConfigurationService))],f),t.PoetryInstaller=f},80819:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInstaller=t.PythonInstaller=t.DataScienceInstaller=t.TestFrameworkInstaller=t.Product=void 0;const o=n(86700),s=n(81249),a=n(66828);n(32727);const c=n(18639),l=n(77498),u=n(81387),d=n(54813),p=n(61522),h=n(17585),f=n(29983),g=n(61684),m=n(67098),v=n(3481),y=n(30135),b=n(92674),S=n(59747),_=n(19735),E=n(48431);var w=n(61684);Object.defineProperty(t,"Product",{enumerable:!0,get:function(){return w.Product}});const T=new Map([[g.Product.torchProfilerInstallName,new Set([u.EnvironmentType.Conda])]]);class C{constructor(e){this.serviceContainer=e,this.appShell=e.get(h.IApplicationShell),this.configService=e.get(g.IConfigurationService),this.workspaceService=e.get(h.IWorkspaceService),this.productService=e.get(S.IProductService),this.persistentStateFactory=e.get(g.IPersistentStateFactory)}promptToInstall(e,t,n,r){const i=t&&(0,v.isResource)(t)?this.workspaceService.getWorkspaceFolder(t):void 0,o=`${e}${i?i.uri.fsPath:""}`;if(C.PromptPromises.has(o))return C.PromptPromises.get(o);const s=this.promptToInstallImplementation(e,t,n,r);return C.PromptPromises.set(o,s),s.then((()=>C.PromptPromises.delete(o))).ignoreErrors(),s.catch((()=>C.PromptPromises.delete(o))).ignoreErrors(),s}async install(e,t,n,r,i){if(e===g.Product.unittest)return g.InstallerResponse.Installed;const o=this.serviceContainer.get(S.IInstallationChannelManager),s=await o.getInstallationChannel(e,t);return s?(await s.installModule(e,t,n,r,i).catch((t=>(0,_.traceError)(`Error in installing the product '${b.ProductNames.get(e)}', ${t}`))),this.isInstalled(e,t).then((t=>((0,d.sendTelemetryEvent)(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:s.displayName,productName:b.ProductNames.get(e),isInstalled:t}),t?g.InstallerResponse.Installed:g.InstallerResponse.Ignore)))):((0,d.sendTelemetryEvent)(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",productName:b.ProductNames.get(e)}),g.InstallerResponse.Ignore)}async isProductVersionCompatible(e,t,n){const r=await this.getProductSemVer(e,n);return r?s.satisfies(r,t)?g.ProductInstallStatus.Installed:g.ProductInstallStatus.NeedsUpgrade:g.ProductInstallStatus.NotInstalled}async getProductSemVer(e,t){const n=(0,v.isResource)(t)?void 0:t,r=(0,v.isResource)(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);let o;if(this.isExecutableAModule(e,r)){const e=await this.serviceContainer.get(f.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0});o=await e.getModuleVersion(i)}else{const e=await this.serviceContainer.get(f.IProcessServiceFactory).create(r);o=(await e.exec(i,["--version"],{mergeStdOutErr:!0})).stdout.trim()}if(!o)return null;try{return s.coerce(o)}catch(t){return(0,_.traceError)(`Unable to parse version ${o} for product ${e}: `,t),null}}async isInstalled(e,t){if(e===g.Product.unittest)return!0;const n=(0,v.isResource)(t)?void 0:t,r=(0,v.isResource)(t)?t:void 0,i=this.getExecutableNameFromSettings(e,r);return this.isExecutableAModule(e,r)?(await this.serviceContainer.get(f.IPythonExecutionFactory).createActivatedEnvironment({resource:r,interpreter:n,allowEnvironmentFetchExceptions:!0})).isModuleInstalled(i):(await this.serviceContainer.get(f.IProcessServiceFactory).create(r)).exec(i,["--version"],{mergeStdOutErr:!0}).then((()=>!0)).catch((()=>!1))}getExecutableNameFromSettings(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(S.IProductPathService,n).getExecutableNameFromSettings(e,t)}isExecutableAModule(e,t){const n=this.productService.getProductType(e);return this.serviceContainer.get(S.IProductPathService,n).isExecutableAModule(e,t)}}C.PromptPromises=new Map;class P extends C{async promptToInstallImplementation(e,t,n,r){const i=b.ProductNames.get(e),o=[];let s=a.l10n.t("Test framework {0} is not installed. Install?",i);if(this.isExecutableAModule(e,t))o.push(m.Common.bannerLabelYes,m.Common.bannerLabelNo);else{const n=this.getExecutableNameFromSettings(e,t);s=a.l10n.t("Path to the {0} test framework is invalid ({1})",i,n)}return await this.appShell.showErrorMessage(s,...o)===m.Common.bannerLabelYes?this.install(e,t,n):g.InstallerResponse.Ignore}}t.TestFrameworkInstaller=P;class x extends C{async install(e,t,n,r){var i,o,s,c;if((0,v.isResource)(t))throw new Error("All data science packages require an interpreter be passed in");const l=t;let h=await this.serviceContainer.get(S.IInstallationChannelManager).getInstallationChannels(l);const f=(0,y.translateProductToModule)(e),m=`${(null===(i=l.version)||void 0===i?void 0:i.major)||""}.${(null===(o=l.version)||void 0===o?void 0:o.minor)||""}.${(null===(s=l.version)||void 0===s?void 0:s.patch)||""}`;if(r&&r&S.ModuleInstallFlags.installPipIfRequired&&l.envType!==u.EnvironmentType.Conda&&!h.some((e=>e.type===u.ModuleInstallerType.Pip))){const e=this.serviceContainer.getAll(S.IModuleInstaller).find((e=>e.type===u.ModuleInstallerType.Pip));e?((0,_.traceInfo)(`Installing pip as its not available to install ${f}.`),await e.installModule(g.Product.pip,l,n).catch((e=>(0,_.traceError)(`Error in installing the module '${f} as Pip could not be installed', ${e}`))),await this.isInstalled(g.Product.pip,l).then((t=>{(0,d.sendTelemetryEvent)(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:e.displayName,requiredInstaller:u.ModuleInstallerType.Pip,version:m,envType:l.envType,isInstalled:t,productName:b.ProductNames.get(g.Product.pip)})})).catch(v.noop),h=await this.serviceContainer.get(S.IInstallationChannelManager).getInstallationChannels(l)):((0,d.sendTelemetryEvent)(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:u.ModuleInstallerType.Pip,productName:b.ProductNames.get(g.Product.pip),version:m,envType:l.envType}),(0,_.traceError)("Unable to install pip when its required."))}const E=!(null===(c=T.get(e))||void 0===c?void 0:c.has(u.EnvironmentType.Conda));let w=u.ModuleInstallerType.Unknown;if(l.envType===u.EnvironmentType.Conda&&E)w=u.ModuleInstallerType.Conda;else if(l.envType!==u.EnvironmentType.Conda||E)switch(l.envType){case u.EnvironmentType.Pipenv:w=u.ModuleInstallerType.Pipenv;break;case u.EnvironmentType.Poetry:w=u.ModuleInstallerType.Poetry;break;default:w=u.ModuleInstallerType.Pip}else(0,_.traceInfo)(`Interpreter type is conda but package ${f} is not available through conda, using pip instead.`),w=u.ModuleInstallerType.Pip;const C=h.find((e=>e.type===w));return C?(await C.installModule(e,l,n,r).catch((e=>(0,_.traceError)(`Error in installing the module '${f}', ${e}`))),this.isInstalled(e,l).then((t=>((0,d.sendTelemetryEvent)(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:C.displayName||"",requiredInstaller:w,version:m,envType:l.envType,isInstalled:t,productName:b.ProductNames.get(e)}),t?g.InstallerResponse.Installed:g.InstallerResponse.Ignore)))):(this.appShell.showErrorMessage(a.l10n.t("Could not install {0}. If pip is not available, please use the package manager of your choice to manually install this library into your Python environment.",f)).then(v.noop,v.noop),(0,d.sendTelemetryEvent)(p.EventName.PYTHON_INSTALL_PACKAGE,void 0,{installer:"unavailable",requiredInstaller:w,productName:b.ProductNames.get(e),version:m,envType:l.envType}),g.InstallerResponse.Ignore)}async promptToInstallImplementation(e,t,n,r){const i=b.ProductNames.get(e);return await this.appShell.showErrorMessage(a.l10n.t("Data Science library {0} is not installed. Install?",i),m.Common.bannerLabelYes,m.Common.bannerLabelNo)===m.Common.bannerLabelYes?this.install(e,t,n):g.InstallerResponse.Ignore}}t.DataScienceInstaller=x;let I=class{constructor(e){this.serviceContainer=e}async isInstalled(e,t){var n;if(e!==g.Product.python)throw new Error(`${e} cannot be installed via conda python installer`);const r=this.serviceContainer.get(c.IInterpreterService),i=(0,v.isResource)(t)?await r.getActiveInterpreter(t):t;return!i||!((null===(n=i.envPath)||void 0===n?void 0:n.length)&&i.envType===u.EnvironmentType.Conda&&!(0,E.isParentPath)(null==i?void 0:i.path,i.envPath))}async install(e,t,n,r){if(e!==g.Product.python)throw new Error(`${e} cannot be installed via python installer`);const i=this.serviceContainer.getAll(S.IModuleInstaller).find((e=>e.type===u.ModuleInstallerType.Conda));if(!i||!await i.isSupported(t))return(0,_.traceError)("Conda installer not available for installing python in the given environment"),g.InstallerResponse.Ignore;const o=(0,y.translateProductToModule)(e);return await i.installModule(g.Product.python,t,void 0,void 0,{installAsProcess:!0}).catch((e=>(0,_.traceError)(`Error in installing the module '${o}', ${e}`))),this.isInstalled(e,t).then((e=>e?g.InstallerResponse.Installed:g.InstallerResponse.Ignore))}async promptToInstall(e,t,n,r){return g.InstallerResponse.Ignore}async isProductVersionCompatible(e,t,n){return g.ProductInstallStatus.Installed}};I=r([i(0,(0,o.inject)(l.IServiceContainer))],I),t.PythonInstaller=I;let R=class{constructor(e){this.serviceContainer=e,this.productService=e.get(S.IProductService),this.interpreterService=this.serviceContainer.get(c.IInterpreterService)}dispose(){}async promptToInstall(e,t,n,r){return((0,v.isResource)(t)?await this.interpreterService.getActiveInterpreter(t):t)?this.createInstaller(e).promptToInstall(e,t,n,r):g.InstallerResponse.Ignore}async isProductVersionCompatible(e,t,n){return this.createInstaller(e).isProductVersionCompatible(e,t,n)}async install(e,t,n,r,i){return this.createInstaller(e).install(e,t,n,r,i)}async isInstalled(e,t){return this.createInstaller(e).isInstalled(e,t)}translateProductToModuleName(e){return(0,y.translateProductToModule)(e)}createInstaller(e){switch(this.productService.getProductType(e)){case g.ProductType.TestFramework:return new P(this.serviceContainer);case g.ProductType.DataScience:return new x(this.serviceContainer);case g.ProductType.Python:return new I(this.serviceContainer)}throw new Error(`Unknown product ${e}`)}};R=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IServiceContainer))],R),t.ProductInstaller=R},92674:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductNames=void 0;const r=n(61684);t.ProductNames=new Map,t.ProductNames.set(r.Product.pytest,"pytest"),t.ProductNames.set(r.Product.tensorboard,"tensorboard"),t.ProductNames.set(r.Product.torchProfilerInstallName,"torch-tb-profiler"),t.ProductNames.set(r.Product.torchProfilerImportName,"torch_tb_profiler"),t.ProductNames.set(r.Product.pip,"pip"),t.ProductNames.set(r.Product.ensurepip,"ensurepip")},43942:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.DataScienceProductPathService=t.TestFrameworkProductPathService=t.BaseProductPathsService=void 0;const o=n(86700),s=n(71017),a=n(77498),c=n(40704),l=n(61684);let u=class{constructor(e){this.serviceContainer=e,this.configService=e.get(l.IConfigurationService),this.productInstaller=e.get(l.IInstaller)}isExecutableAModule(e,t){let n;try{n=this.productInstaller.translateProductToModuleName(e)}catch(e){}const r=this.getExecutableNameFromSettings(e,t);return"string"==typeof n&&n.length>0&&s.basename(r)===r}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],u),t.BaseProductPathsService=u;let d=class extends u{constructor(e){super(e)}getExecutableNameFromSettings(e,t){const n=this.serviceContainer.get(c.ITestingService).getSettingsPropertyNames(e);return n.pathName?this.configService.getSettings(t).testing[n.pathName]:this.productInstaller.translateProductToModuleName(e)}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],d),t.TestFrameworkProductPathService=d;let p=class extends u{constructor(e){super(e)}getExecutableNameFromSettings(e,t){return this.productInstaller.translateProductToModuleName(e)}};p=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],p),t.DataScienceProductPathService=p},23202:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.ProductService=void 0;const i=n(86700),o=n(61684);let s=class{constructor(){this.ProductTypes=new Map,this.ProductTypes.set(o.Product.pytest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.unittest,o.ProductType.TestFramework),this.ProductTypes.set(o.Product.tensorboard,o.ProductType.DataScience),this.ProductTypes.set(o.Product.torchProfilerInstallName,o.ProductType.DataScience),this.ProductTypes.set(o.Product.torchProfilerImportName,o.ProductType.DataScience),this.ProductTypes.set(o.Product.pip,o.ProductType.DataScience),this.ProductTypes.set(o.Product.ensurepip,o.ProductType.DataScience),this.ProductTypes.set(o.Product.python,o.ProductType.Python)}getProductType(e){return this.ProductTypes.get(e)}};s=r([(0,i.injectable)()],s),t.ProductService=s},34061:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(61684),i=n(95939),o=n(5181),s=n(22577),a=n(36352),c=n(73300),l=n(43942),u=n(23202),d=n(59747);t.registerTypes=function(e){e.addSingleton(d.IModuleInstaller,o.CondaInstaller),e.addSingleton(d.IModuleInstaller,a.PipInstaller),e.addSingleton(d.IModuleInstaller,s.PipEnvInstaller),e.addSingleton(d.IModuleInstaller,c.PoetryInstaller),e.addSingleton(d.IInstallationChannelManager,i.InstallationChannelManager),e.addSingleton(d.IProductService,u.ProductService),e.addSingleton(d.IProductPathService,l.TestFrameworkProductPathService,r.ProductType.TestFramework),e.addSingleton(d.IProductPathService,l.DataScienceProductPathService,r.ProductType.DataScience)}},59747:(e,t)=>{"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleInstallFlags=t.IProductPathService=t.IProductService=t.IInstallationChannelManager=t.IPythonInstallation=t.IBaseInstaller=t.IModuleInstaller=void 0,t.IModuleInstaller=Symbol("IModuleInstaller"),t.IBaseInstaller=Symbol("IBaseInstaller"),t.IPythonInstallation=Symbol("IPythonInstallation"),t.IInstallationChannelManager=Symbol("IInstallationChannelManager"),t.IProductService=Symbol("IProductService"),t.IProductPathService=Symbol("IProductPathService"),(n=t.ModuleInstallFlags||(t.ModuleInstallFlags={}))[n.upgrade=1]="upgrade",n[n.updateDependencies=2]="updateDependencies",n[n.reInstall=4]="reInstall",n[n.installPipIfRequired=8]="installPipIfRequired"},97469:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.InterpreterPathService=t.getCIPythonPath=t.defaultInterpreterPathSetting=t.isRemoteGlobalSettingCopiedKey=t.remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key=t.remoteWorkspaceKeysForWhichTheCopyIsDone_Key=void 0;const o=n(55674),s=n(86700),a=n(66828),c=n(19735),l=n(17585),u=n(89515),d=n(77570),p=n(48431),h=n(61684),f=n(48683);t.remoteWorkspaceKeysForWhichTheCopyIsDone_Key="remoteWorkspaceKeysForWhichTheCopyIsDone_Key",t.remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key="remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key",t.isRemoteGlobalSettingCopiedKey="isRemoteGlobalSettingCopiedKey",t.defaultInterpreterPathSetting="defaultInterpreterPath";const g=m();function m(){return process.env.CI_PYTHON_PATH&&o.existsSync(process.env.CI_PYTHON_PATH)?process.env.CI_PYTHON_PATH:"python"}t.getCIPythonPath=m;let v=class{constructor(e,t,n,r){this.persistentStateFactory=e,this.workspaceService=t,this.appEnvironment=r,this._didChangeInterpreterEmitter=new a.EventEmitter,n.push(this.workspaceService.onDidChangeConfiguration(this.onDidChangeConfiguration.bind(this))),this.fileSystemPaths=p.FileSystemPaths.withDefaults()}get onDidChange(){return this._didChangeInterpreterEmitter.event}async onDidChangeConfiguration(e){e.affectsConfiguration(`python.${t.defaultInterpreterPathSetting}`)&&(this._didChangeInterpreterEmitter.fire({uri:void 0,configTarget:a.ConfigurationTarget.Global}),(0,c.traceVerbose)("Interpreter Path updated",`python.${t.defaultInterpreterPathSetting}`))}inspect(e,t=!1){var n,r;let i,o;(e=u.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri)&&(i=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,a.ConfigurationTarget.WorkspaceFolder,t),void 0),o=this.persistentStateFactory.createGlobalPersistentState(this.getSettingKey(e,a.ConfigurationTarget.Workspace,t),void 0));const s=null!==(r=null===(n=this.workspaceService.getConfiguration("python",e))||void 0===n?void 0:n.inspect("defaultInterpreterPath"))&&void 0!==r?r:{};return{globalValue:s.globalValue,workspaceFolderValue:(null==i?void 0:i.value)&&"python"!==(null==i?void 0:i.value)?i.value:s.workspaceFolderValue,workspaceValue:(null==o?void 0:o.value)&&"python"!==(null==o?void 0:o.value)?o.value:s.workspaceValue}}get(e){var t;const n=this.inspect(e),r=n.workspaceFolderValue||n.workspaceValue||n.globalValue||((0,d.isTestExecution)()?g:"python");return new f.SystemVariables(void 0,null===(t=this.workspaceService.getWorkspaceFolder(e))||void 0===t?void 0:t.uri.fsPath,this.workspaceService).resolveAny(r)}async update(e,t,n){if(e=u.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri,t===a.ConfigurationTarget.Global){const e=this.workspaceService.getConfiguration("python");return void(e.inspect("defaultInterpreterPath").globalValue!==n&&await e.update("defaultInterpreterPath",n,!0))}if(!e)return void(0,c.traceError)("Cannot update workspace settings as no workspace is opened");const r=this.getSettingKey(e,t),i=this.persistentStateFactory.createGlobalPersistentState(r,void 0);i.value!==n&&(await i.updateValue(n),this._didChangeInterpreterEmitter.fire({uri:e,configTarget:t}),(0,c.traceVerbose)("Interpreter Path updated",r,n))}getSettingKey(e,t,n=!1){let r;const i=this.workspaceService.getWorkspaceFolderIdentifier(e);return r=t===a.ConfigurationTarget.WorkspaceFolder?`WORKSPACE_FOLDER_INTERPRETER_PATH_${i}`:this.workspaceService.workspaceFile?`WORKSPACE_INTERPRETER_PATH_${this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath)}`:`WORKSPACE_FOLDER_INTERPRETER_PATH_${i}`,!n&&this.appEnvironment.remoteName?`${this.appEnvironment.remoteName}_${r}`:r}async copyOldInterpreterStorageValuesToNew(e){e=u.PythonSettings.getSettingsUriAndTarget(e,this.workspaceService).uri;const t=this.inspect(e,!0);await Promise.all([this._copyWorkspaceFolderValueToNewStorage(e,t.workspaceFolderValue),this._copyWorkspaceValueToNewStorage(e,t.workspaceValue),this._moveGlobalSettingValueToNewStorage(t.globalValue)])}async _copyWorkspaceFolderValueToNewStorage(e,n){const r=this.workspaceService.getWorkspaceFolderIdentifier(e,"");if(""===r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.remoteWorkspaceFolderKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,a.ConfigurationTarget.WorkspaceFolder,n),await i.updateValue([r,...o]))}async _copyWorkspaceValueToNewStorage(e,n){const r=this.workspaceService.workspaceFile?this.fileSystemPaths.normCase(this.workspaceService.workspaceFile.fsPath):void 0;if(!r)return;const i=this.persistentStateFactory.createGlobalPersistentState(t.remoteWorkspaceKeysForWhichTheCopyIsDone_Key,[]),o=i.value;!o.includes(r)&&(await this.update(e,a.ConfigurationTarget.Workspace,n),await i.updateValue([r,...o]))}async _moveGlobalSettingValueToNewStorage(e){const n=this.persistentStateFactory.createGlobalPersistentState(t.isRemoteGlobalSettingCopiedKey,!1);!n.value&&(await this.update(void 0,a.ConfigurationTarget.Global,e),await n.updateValue(!0))}};v=r([(0,s.injectable)(),i(0,(0,s.inject)(h.IPersistentStateFactory)),i(1,(0,s.inject)(l.IWorkspaceService)),i(2,(0,s.inject)(h.IDisposableRegistry)),i(3,(0,s.inject)(l.IApplicationEnvironment))],v),t.InterpreterPathService=v},21621:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserService=t.launch=void 0;const i=n(86700),o=n(66828);function s(e){o.env.openExternal(o.Uri.parse(e))}t.launch=s;let a=class{launch(e){s(e)}};a=r([(0,i.injectable)()],a),t.BrowserService=a},73766:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalStorage=t.PersistentStateFactory=t.GLOBAL_PERSISTENT_KEYS=t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED=t.GLOBAL_PERSISTENT_KEYS_DEPRECATED=t.PersistentState=t.updateWorkspaceStateValue=t.getWorkspaceStateValue=t.initializePersistentStateForTriggers=void 0;const o=n(86700),s=n(19735),a=n(17585),c=n(77570),l=n(61684),u=n(36952),d=n(3481);let p;const h=[];function f(e,t){if(!p)throw new Error("Workspace state not initialized");return void 0===t?p.get(e):p.get(e,t)}async function g(e,t){if(!p)throw new Error("Workspace state not initialized");try{h.push(e),await p.update(e,t);const n=f(e);JSON.stringify(n)!==JSON.stringify(t)&&(await p.update(e,void 0),await p.update(e,t),(0,s.traceError)("Error while updating workspace state for key:",e))}catch(t){(0,s.traceError)(`Error while updating workspace state for key [${e}]:`,t)}}t.initializePersistentStateForTriggers=function(e){p=e.workspaceState},t.getWorkspaceStateValue=f,t.updateWorkspaceStateValue=g;class m{constructor(e,t,n,r){this.storage=e,this.key=t,this.defaultValue=n,this.expiryDurationMs=r}get value(){if(this.expiryDurationMs){const e=this.storage.get(this.key,{data:this.defaultValue});return!e||!e.expiry||e.expiry<Date.now()?this.defaultValue:e.data}return this.storage.get(this.key,this.defaultValue)}async updateValue(e,t=!0){try{this.expiryDurationMs?await this.storage.update(this.key,{data:e,expiry:Date.now()+this.expiryDurationMs}):await this.storage.update(this.key,e),t&&JSON.stringify(this.value)!=JSON.stringify(e)&&(await this.updateValue(void 0,!1),await this.updateValue(e,!1))}catch(e){(0,s.traceError)("Error while updating storage for key:",this.key,e)}}}t.PersistentState=m,t.GLOBAL_PERSISTENT_KEYS_DEPRECATED="PYTHON_EXTENSION_GLOBAL_STORAGE_KEYS",t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED="PYTHON_EXTENSION_WORKSPACE_STORAGE_KEYS",t.GLOBAL_PERSISTENT_KEYS="PYTHON_GLOBAL_STORAGE_KEYS";let v=class{constructor(e,n,r){this.globalState=e,this.workspaceState=n,this.cmdManager=r,this.supportedWorkspaceTypes={untrustedWorkspace:!1,virtualWorkspace:!0},this._globalKeysStorage=new m(this.globalState,t.GLOBAL_PERSISTENT_KEYS,[]),this._workspaceKeysStorage=new m(this.workspaceState,"PYTHON_WORKSPACE_STORAGE_KEYS",[])}async activate(){var e;null===(e=this.cmdManager)||void 0===e||e.registerCommand(c.Commands.ClearStorage,(async()=>{await async function(){void 0!==p&&await Promise.all(h.map((e=>g(e,void 0))))}(),await this.cleanAllPersistentStates()}));const n=this.createGlobalPersistentState(t.GLOBAL_PERSISTENT_KEYS_DEPRECATED,[]),r=this.createWorkspacePersistentState(t.WORKSPACE_PERSISTENT_KEYS_DEPRECATED,[]);n.value.length>0&&n.updateValue([]).ignoreErrors(),r.value.length>0&&r.updateValue([]).ignoreErrors()}createGlobalPersistentState(e,t,n){return this.addKeyToStorage("global",e,t).ignoreErrors(),new m(this.globalState,e,t,n)}createWorkspacePersistentState(e,t,n){return this.addKeyToStorage("workspace",e,t).ignoreErrors(),new m(this.workspaceState,e,t,n)}async addKeyToStorage(e,t,n){const r="global"===e?this._globalKeysStorage:this._workspaceKeysStorage;r.value.find((e=>e.key===t))||await r.updateValue([{key:t,defaultValue:n},...r.value])}async cleanAllPersistentStates(){var e;await Promise.all(this._globalKeysStorage.value.map((async e=>{const t=this.createGlobalPersistentState(e.key);await t.updateValue(e.defaultValue)}))),await Promise.all(this._workspaceKeysStorage.value.map((async e=>{const t=this.createWorkspacePersistentState(e.key);await t.updateValue(e.defaultValue)}))),await this._globalKeysStorage.updateValue([]),await this._workspaceKeysStorage.updateValue([]),null===(e=this.cmdManager)||void 0===e||e.executeCommand("workbench.action.reloadWindow").then(d.noop)}};r([(0,u.cache)(-1,!0)],v.prototype,"addKeyToStorage",null),v=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IMemento)),i(0,(0,o.named)(l.GLOBAL_MEMENTO)),i(1,(0,o.inject)(l.IMemento)),i(1,(0,o.named)(l.WORKSPACE_MEMENTO)),i(2,(0,o.inject)(a.ICommandManager))],v),t.PersistentStateFactory=v,t.getGlobalStorage=function(e,n,r){const i=new m(e.globalState,t.GLOBAL_PERSISTENT_KEYS,[]);if(!i.value.find((e=>e.key===n))){const e=[{key:n,defaultValue:r},...i.value];i.updateValue(e).ignoreErrors()}const o=new m(e.globalState,n,r);return{get:()=>o.value,set:e=>o.updateValue(e)}}},91291:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.namedPipeClient=t.generateRandomPipeName=t.createNamedPipeServer=void 0;const r=n(6113),i=n(41808),o=n(22037),s=n(71017),a=n(95028),c=n(19735);t.createNamedPipeServer=function(e,t){(0,c.traceVerbose)(`Creating named pipe server on ${e}`);let n=0;return new Promise(((r,o)=>{const s=i.createServer((r=>{n+=1,(0,c.traceVerbose)("new client is connected to the socket, connectionCount: ",n,e),r.on("close",(()=>{n-=1,(0,c.traceVerbose)("client emitted close event, connectionCount: ",n),n<=0&&((0,c.traceVerbose)("connection count is <= 0, closing the server: ",e),s.close())})),t([new a.SocketMessageReader(r,"utf-8"),new a.SocketMessageWriter(r,"utf-8")])})),l=new Promise((e=>{s.on("close",e)}));s.on("error",o),s.listen(e,(()=>{s.removeListener("error",o),r({serverOnClosePromise:()=>l})}))}))};const{XDG_RUNTIME_DIR:l}=process.env;t.generateRandomPipeName=function(e){const t=r.randomBytes(10).toString("hex");if(0===e.length&&(e="python-ext-rpc"),"win32"===process.platform)return`\\\\.\\pipe\\${e}-${t}-sock`;let n;return n=l?s.join(l,`${e}-${t}.sock`):s.join(o.tmpdir(),`${e}-${t}.sock`),n},t.namedPipeClient=function(e){const t=i.connect(e);return[new a.SocketMessageReader(t,"utf-8"),new a.SocketMessageWriter(t,"utf-8")]}},95311:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNoPermissionsError=t.isNotDirError=t.isFileIsDirError=t.isFileExistsError=t.isFileNotFoundError=t.createDirNotEmptyError=void 0;const r=n(66828);var i;function o(e,t){const n=e.code;if(n)return n===t}!function(e){const t=r.FileSystemError.FileNotFound().name,n=r.FileSystemError.FileExists().name,i=r.FileSystemError.FileIsADirectory().name,o=r.FileSystemError.FileNotADirectory().name,s=r.FileSystemError.NoPermissions().name,a=[t,n,i,o,s];function c(e,t){if(a.includes(e.name))return e.name===t}e.isFileNotFound=function(e){return c(e,t)},e.isFileExists=function(e){return c(e,n)},e.isFileIsDir=function(e){return c(e,i)},e.isNotDir=function(e){return c(e,o)},e.isNoPermissions=function(e){return c(e,s)}}(i||(i={})),t.createDirNotEmptyError=function(e){const t=new Error(`directory "${e}" not empty`);return t.name="SystemError",t.code="ENOTEMPTY",t.path=e,t.syscall="rmdir",t},t.isFileNotFoundError=function(e){const t=e,n=i.isFileNotFound(t);return void 0!==n?n:o(t,"ENOENT")},t.isFileExistsError=function(e){const t=e,n=i.isFileExists(t);return void 0!==n?n:o(t,"EEXIST")},t.isFileIsDirError=function(e){const t=i.isFileIsDir(e);return void 0!==t?t:o(e,"EISDIR")},t.isNotDirError=function(e){const t=i.isNotDir(e);return void 0!==t?t:o(e,"ENOTDIR")},t.isNoPermissionsError=function(e){const t=e,n=i.isNoPermissions(t);return void 0!==n?n:o(t,"EACCES")}},90209:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.FileSystem=t.getHashString=t.FileSystemUtils=t.RawFileSystem=t.convertStat=void 0;const i=n(6113),o=n(55674),s=n(12884),a=n(86700),c=n(73837),l=n(66828),u=n(19735);n(32727);const d=n(56091),p=n(95311),h=n(48431),f=n(22512),g=n(84974),m="utf8";function v(e,t){return{type:t,size:e.size,ctime:Math.round(e.ctimeMs),mtime:Math.round(e.mtimeMs)}}function y(e,t){return t===g.FileType.Unknown?e.filter((([e,t])=>t===g.FileType.Unknown||t===(g.FileType.SymbolicLink&g.FileType.Unknown))):e.filter((([e,n])=>(n&t)>0))}t.convertStat=v;class b{constructor(e,t,n){this.paths=e,this.vscfs=t,this.fsExtra=n}static withDefaults(e,t,n){return new b(e||h.FileSystemPaths.withDefaults(),t||l.workspace.fs,n||o)}async pathExists(e){return this.fsExtra.pathExists(e)}async stat(e){const t=l.Uri.file(e);return this.vscfs.stat(t)}async lstat(e){const t=await this.fsExtra.lstat(e);return v(t,(0,d.convertFileType)(t))}async chmod(e,t){return this.fsExtra.chmod(e,t)}async move(e,t){const n=l.Uri.file(e),r=l.Uri.file(t);await this.vscfs.stat(l.Uri.file(this.paths.dirname(t)));const i={overwrite:!1};try{await this.vscfs.rename(n,r,i)}catch(e){if(!(0,p.isFileExistsError)(e))throw e;if((await this.vscfs.stat(r)).type===g.FileType.Directory)throw e;i.overwrite=!0,await this.vscfs.rename(n,r,i)}}async readData(e){const t=l.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n)}async readText(e){const t=l.Uri.file(e),n=await this.vscfs.readFile(t);return Buffer.from(n).toString(m)}async writeText(e,t){const n=l.Uri.file(e),r=Buffer.from(t);await this.vscfs.writeFile(n,r)}async appendText(e,t){return this.fsExtra.appendFile(e,t)}async copyFile(e,t){const n=l.Uri.file(e),r=l.Uri.file(t);await this.vscfs.stat(l.Uri.file(this.paths.dirname(t))),await this.vscfs.copy(n,r,{overwrite:!0})}async rmfile(e){const t=l.Uri.file(e);return this.vscfs.delete(t,{recursive:!1,useTrash:!1})}async rmdir(e){const t=l.Uri.file(e),n=await this.vscfs.readDirectory(t);if(n&&n.length>0)throw(0,p.createDirNotEmptyError)(e);return this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async rmtree(e){const t=l.Uri.file(e);return await this.vscfs.stat(t),this.vscfs.delete(t,{recursive:!0,useTrash:!1})}async mkdirp(e){const t=l.Uri.file(e);await this.vscfs.createDirectory(t)}async listdir(e){const t=l.Uri.file(e);return(await this.vscfs.readDirectory(t)).map((([t,n])=>[this.paths.join(e,t),n]))}statSync(e){let t=this.fsExtra.lstatSync(e),n=g.FileType.Unknown;return t.isSymbolicLink()&&(n=g.FileType.SymbolicLink,t=this.fsExtra.statSync(e)),n|=(0,d.convertFileType)(t),v(t,n)}readTextSync(e){return this.fsExtra.readFileSync(e,m)}createReadStream(e){return this.fsExtra.createReadStream(e)}createWriteStream(e){return this.fsExtra.createWriteStream(e)}}t.RawFileSystem=b;class S{constructor(e,t,n,r,i,o){this.raw=e,this.pathUtils=t,this.paths=n,this.tmp=r,this.getHash=i,this.globFiles=o}static withDefaults(e,t,n,r,i){return t=t||h.FileSystemPathUtils.withDefaults(),new S(e||b.withDefaults(t.paths),t,t.paths,n||f.TemporaryFileSystem.withDefaults(),r||_,i||(0,c.promisify)(s))}async createDirectory(e){return this.raw.mkdirp(e)}async deleteDirectory(e){return this.raw.rmdir(e)}async deleteFile(e){return this.raw.rmfile(e)}async pathExists(e,t){if(void 0===t)return this.raw.pathExists(e);let n;try{n=await this.raw.stat(e)}catch(t){return(0,p.isFileNotFoundError)(t)||(0,u.traceError)(`stat() failed for "${e}"`,t),!1}return t===g.FileType.Unknown?n.type===g.FileType.Unknown:(n.type&t)===t}async fileExists(e){return this.pathExists(e,g.FileType.File)}async directoryExists(e){return this.pathExists(e,g.FileType.Directory)}async listdir(e){try{return await this.raw.listdir(e)}catch(t){if(!await this.pathExists(e))return[];throw t}}async getSubDirectories(e){return y(await this.listdir(e),g.FileType.Directory).map((([e,t])=>e))}async getFiles(e){return y(await this.listdir(e),g.FileType.File).map((([e,t])=>e))}async isDirReadonly(e){const t=`${e}${this.paths.sep}___vscpTest___`;try{await this.raw.stat(e),await this.raw.writeText(t,"")}catch(e){if((0,p.isNoPermissionsError)(e))return!0;throw e}return this.raw.rmfile(t).ignoreErrors(),!1}async getFileHash(e){const t=await this.raw.lstat(e),n=`${t.ctime}-${t.mtime}`;return this.getHash(n)}async search(e,t,n){let r;t&&(r={...r,cwd:t}),n&&(r={...r,dot:n});const i=await this.globFiles(e,r);return Array.isArray(i)?i:[]}fileExistsSync(e){try{this.raw.statSync(e)}catch(e){if((0,p.isFileNotFoundError)(e))return!1;throw e}return!0}}function _(e){const t=(0,i.createHash)("sha512");return t.update(e),t.digest("hex")}t.FileSystemUtils=S,t.getHashString=_;let E=class{constructor(){this.utils=S.withDefaults()}get directorySeparatorChar(){return this.utils.paths.sep}arePathsSame(e,t){return this.utils.pathUtils.arePathsSame(e,t)}getDisplayName(e){return this.utils.pathUtils.getDisplayName(e)}async stat(e){return this.utils.raw.stat(e)}async createDirectory(e){return this.utils.createDirectory(e)}async deleteDirectory(e){return this.utils.deleteDirectory(e)}async listdir(e){return this.utils.listdir(e)}async readFile(e){return this.utils.raw.readText(e)}async readData(e){return this.utils.raw.readData(e)}async writeFile(e,t){return this.utils.raw.writeText(e,t)}async appendFile(e,t){return this.utils.raw.appendText(e,t)}async copyFile(e,t){return this.utils.raw.copyFile(e,t)}async deleteFile(e){return this.utils.deleteFile(e)}async chmod(e,t){return this.utils.raw.chmod(e,t)}async move(e,t){await this.utils.raw.move(e,t)}readFileSync(e){return this.utils.raw.readTextSync(e)}createReadStream(e){return this.utils.raw.createReadStream(e)}createWriteStream(e){return this.utils.raw.createWriteStream(e)}async fileExists(e){return this.utils.fileExists(e)}pathExists(e){return this.utils.pathExists(e)}fileExistsSync(e){return this.utils.fileExistsSync(e)}async directoryExists(e){return this.utils.directoryExists(e)}async getSubDirectories(e){return this.utils.getSubDirectories(e)}async getFiles(e){return this.utils.getFiles(e)}async getFileHash(e){return this.utils.getFileHash(e)}async search(e,t,n){return this.utils.search(e,t,n)}async createTemporaryFile(e,t){return this.utils.tmp.createFile(e,t)}async isDirReadonly(e){return this.utils.isDirReadonly(e)}};E=r([(0,a.injectable)()],E),t.FileSystem=E},88409:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.watchLocationForPattern=t.FileChangeType=void 0;const r=n(66828),i=n(19735),o=n(81837);var s;!function(e){e.Changed="changed",e.Created="created",e.Deleted="deleted"}(s=t.FileChangeType||(t.FileChangeType={})),t.watchLocationForPattern=function(e,t,n){const a=new r.RelativePattern(e,t),c=new o.Disposables;(0,i.traceVerbose)(`Start watching: ${e} with pattern ${t} using VSCode API`);const l=r.workspace.createFileSystemWatcher(a);return c.push(l.onDidCreate((e=>n(s.Created,e.fsPath)))),c.push(l.onDidChange((e=>n(s.Changed,e.fsPath)))),c.push(l.onDidDelete((e=>n(s.Deleted,e.fsPath)))),c}},48431:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createFile=t.pathExists=t.copyFile=t.arePathsSame=t.isParentPath=t.normCase=t.normCasePath=t.FileSystemPathUtils=t.Executables=t.FileSystemPaths=void 0;const r=n(71017),i=n(47237),o=n(55674),s=n(87450),a=n(58967);class c{constructor(e,t){this.isCaseInsensitive=e,this.raw=t}static withDefaults(e){return void 0===e&&(e=(0,s.getOSType)()===s.OSType.Windows),new c(e,r)}get sep(){return this.raw.sep}join(...e){return this.raw.join(...e)}dirname(e){return this.raw.dirname(e)}basename(e,t){return this.raw.basename(e,t)}normalize(e){return this.raw.normalize(e)}normCase(e){return e=this.raw.normalize(e),this.isCaseInsensitive?e.toUpperCase():e}}t.FileSystemPaths=c;class l{constructor(e,t){this.delimiter=e,this.osType=t}static withDefaults(){return new l(r.delimiter,(0,s.getOSType)())}get envVar(){return(0,i.getSearchPathEnvVarNames)(this.osType)[0]}}t.Executables=l;class u{constructor(e,t,n,r){this.home=e,this.paths=t,this.executables=n,this.raw=r}static withDefaults(e){return void 0===e&&(e=c.withDefaults()),new u(a("~"),e,l.withDefaults(),r)}arePathsSame(e,t){return(e=this.paths.normCase(e))===this.paths.normCase(t)}getDisplayName(e,t){return t&&h(e,t)?`.${this.paths.sep}${this.raw.relative(t,e)}`:h(e,this.home)?`~${this.paths.sep}${this.raw.relative(this.home,e)}`:e}}function d(e){return p(r.normalize(e))}function p(e){return(0,s.getOSType)()===s.OSType.Windows?e.toUpperCase():e}function h(e,t){return t.endsWith(r.sep)||(t+=r.sep),e.endsWith(r.sep)||(e+=r.sep),d(e).startsWith(d(t))}t.FileSystemPathUtils=u,t.normCasePath=d,t.normCase=p,t.isParentPath=h,t.arePathsSame=function(e,t){return d(e)===d(t)},t.copyFile=async function(e,t){const n=r.dirname(t);await o.pathExists(n)||await o.mkdirp(n),await o.copy(e,t,{overwrite:!0})},t.pathExists=function(e){return o.pathExists(e)},t.createFile=function(e){return o.createFile(e)}},22512:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TemporaryFileSystem=void 0;const r=n(36276);class i{constructor(e){this.raw=e}static withDefaults(){return new i(r)}createFile(e,t){const n={postfix:e,mode:t};return new Promise(((e,t)=>{this.raw.file(n,((n,r,i,o)=>{if(n)return t(n);e({filePath:r,dispose:o})}))}))}}t.TemporaryFileSystem=i},79434:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PathUtils=void 0;const o=n(86700),s=n(71017),a=n(61684),c=n(87450),l=n(48431),u=n(58967);let d=class{constructor(e){const t=e?c.OSType.Windows:c.OSType.Unknown;this.utils=new l.FileSystemPathUtils(u("~"),l.FileSystemPaths.withDefaults(),new l.Executables(s.delimiter,t),s)}get home(){return this.utils.home}get delimiter(){return this.utils.executables.delimiter}get separator(){return this.utils.paths.sep}getPathVariableName(){return this.utils.executables.envVar}getDisplayName(e,t){return this.utils.getDisplayName(e,t)}basename(e,t){return this.utils.paths.basename(e,t)}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IsWindows))],d),t.PathUtils=d},65243:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.isWindows=t.PlatformService=void 0;const i=n(86700),o=n(22037),s=n(81249),a=n(47237),c=n(87450),l=n(52439);let u=class{constructor(){this.osType=(0,c.getOSType)()}get pathVariableName(){return(0,a.getSearchPathEnvVarNames)(this.osType)[0]}get virtualEnvBinName(){return this.isWindows?"Scripts":"bin"}async getVersion(){if(this.version)return this.version;switch(this.osType){case c.OSType.Windows:case c.OSType.OSX:try{const e=(0,s.coerce)(o.release());if(e)return this.version=e,this.version;throw new Error("Unable to parse version")}catch(e){return(0,l.parseSemVerSafe)(o.release())}default:throw new Error("Not Supported")}}get isWindows(){return d()}get isMac(){return this.osType===c.OSType.OSX}get isLinux(){return this.osType===c.OSType.Linux}get osRelease(){return o.release()}get is64bit(){return(0,c.getArchitecture)()===c.Architecture.x64}};function d(){return(0,c.getOSType)()===c.OSType.Windows}u=r([(0,i.injectable)()],u),t.PlatformService=u,t.isWindows=d},3522:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.getArchitectureDisplayName=t.RegistryImplementation=void 0;const i=n(86700),o=n(19735),s=n(87450),a=n(84974);var c;!function(e){e.x86="x86",e.x64="x64"}(c||(c={}));let l=class{async getKeys(e,t,r){return async function(e){const t=n(1283);return new Promise((n=>{new t(e).keys(((e,t)=>{if(e||!Array.isArray(t))return n([]);n(t.filter((e=>"string"==typeof e.key)).map((e=>e.key)))}))}))}({hive:d(t),arch:u(r),key:e}).catch((e=>((0,o.traceError)("Fetching keys from windows registry resulted in an error",e),[])))}async getValue(e,t,r,i=""){return async function(e,t=""){const r=n(1283);return new Promise((n=>{new r(e).get(t,((e,t)=>{if(e||!t||"string"!=typeof t.value)return n(void 0);n(t.value)}))}))}({hive:d(t),arch:u(r),key:e},i).catch((e=>{(0,o.traceError)("Fetching key value from windows registry resulted in an error",e)}))}};function u(e){switch(e){case s.Architecture.x86:return c.x86;case s.Architecture.x64:return c.x64;default:return}}function d(e){const t=n(1283);switch(e){case a.RegistryHive.HKCU:return t.HKCU;case a.RegistryHive.HKLM:return t.HKLM;default:return}}l=r([(0,i.injectable)()],l),t.RegistryImplementation=l,t.getArchitectureDisplayName=function(e){switch(e){case s.Architecture.x64:return"64-bit";case s.Architecture.x86:return"32-bit";default:return""}}},29992:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(90209),i=n(65243),o=n(3522),s=n(84974);t.registerTypes=function(e){e.addSingleton(s.IPlatformService,i.PlatformService),e.addSingleton(s.IFileSystem,r.FileSystem),e.addSingleton(s.IRegistry,o.RegistryImplementation)}},84974:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IFileSystem=t.IFileSystemPathUtils=t.IPlatformService=t.IRegistry=t.RegistryHive=t.FileType=void 0;const r=n(66828);var i;t.FileType=r.FileType,(i=t.RegistryHive||(t.RegistryHive={}))[i.HKCU=0]="HKCU",i[i.HKLM=1]="HKLM",t.IRegistry=Symbol("IRegistry"),t.IPlatformService=Symbol("IPlatformService"),t.IFileSystemPathUtils=Symbol("IFileSystemPathUtils"),t.IFileSystem=Symbol("IFileSystem")},93289:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_ENCODING=void 0,t.DEFAULT_ENCODING="utf8"},20900:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentProcess=void 0;const i=n(86700);let o=class{constructor(){this.on=(e,t)=>(process.on(e,t),process)}get env(){return process.env}get argv(){return process.argv}get stdout(){return process.stdout}get stdin(){return process.stdin}get execPath(){return process.execPath}};o=r([(0,i.injectable)()],o),t.CurrentProcess=o},73153:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decodeBuffer=void 0;const r=n(4914),i=n(93289);t.decodeBuffer=function(e,t=i.DEFAULT_ENCODING){return t=r.encodingExists(t)?t:i.DEFAULT_ENCODING,r.decode(Buffer.concat(e),t)}},31776:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getModuleVersion=t.isModuleInstalled=t.isValid=t.getUserSitePackages=t.getSitePackages=t.getExecutable=t.execModule=t.execCode=void 0,t.execCode=function(e){return["-c",e]},t.execModule=function(e,t){return["-m",e,...t]},t.getExecutable=function(){return[["-c","import sys;print(sys.executable)"],function(e){return e.trim()}]},t.getSitePackages=function(){return[["-c","from distutils.sysconfig import get_python_lib; print(get_python_lib())"],function(e){return e.trim()}]},t.getUserSitePackages=function(){return[["site","--user-site"],function(e){return e.trim()}]},t.isValid=function(){return[["-c","print(1234)"],function(e){return e.startsWith("1234")}]},t.isModuleInstalled=function(e){return[["-c",`import ${e}`],function(e){return!0}]},t.getModuleVersion=function(e){return[["-c",`import ${e}; print(${e}.__version__)`],function(e){return e.trim()}]}},48266:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._SCRIPTS_DIR=void 0;const r=n(71017),i=n(77570);t._SCRIPTS_DIR=r.join(i.EXTENSION_ROOT_DIR,"python_files")},4057:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.installedCheckScript=t.createCondaScript=t.createVenvScript=t.linterScript=t.tensorboardLauncher=t.execution_py_testlauncher=t.visualstudio_py_testlauncher=t.pytestlauncher=t.testlauncher=t.shell_exec=t.printEnvVariables=t.normalizeSelection=t.interpreterInfo=t.OUTPUT_MARKER_SCRIPT=t.testingTools=void 0;const r=n(71017),i=n(48266),o=i._SCRIPTS_DIR;t.testingTools=n(81036),t.OUTPUT_MARKER_SCRIPT=r.join(i._SCRIPTS_DIR,"get_output_via_markers.py"),t.interpreterInfo=function(){const e=[r.join(o,"interpreterInfo.py")];return[e,function(t){try{return JSON.parse(t)}catch(n){throw Error(`python ${e} returned bad JSON (${t}) (${n})`)}}]},t.normalizeSelection=function(){return[[r.join(o,"normalizeSelection.py")],function(e){return e}]},t.printEnvVariables=function(){return[[r.join(o,"printEnvVariables.py").fileToCommandArgumentForPythonExt()],function(e){return JSON.parse(e)}]},t.shell_exec=function(e,t,n){return[r.join(o,"shell_exec.py"),e.fileToCommandArgumentForPythonExt(),...n,t.fileToCommandArgumentForPythonExt()]},t.testlauncher=function(e){return[r.join(o,"testlauncher.py"),...e]},t.pytestlauncher=function(e){return[r.join(o,"vscode_pytest","run_pytest_script.py"),...e]},t.visualstudio_py_testlauncher=function(e){return[r.join(o,"visualstudio_py_testlauncher.py"),...e]},t.execution_py_testlauncher=function(e){return[r.join(o,"unittestadapter","execution.py"),...e]},t.tensorboardLauncher=function(e){return[r.join(o,"tensorboard_launcher.py"),...e]},t.linterScript=function(){return r.join(o,"linter.py")},t.createVenvScript=function(){return r.join(o,"create_venv.py")},t.createCondaScript=function(){return r.join(o,"create_conda.py")},t.installedCheckScript=function(){return r.join(o,"installed_check.py")}},81036:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unittestDiscovery=t.runAdapter=void 0;const r=n(71017),i=n(48266),o=r.join(i._SCRIPTS_DIR,"testing_tools");t.runAdapter=function(e){return[r.join(o,"run_adapter.py"),...e]},t.unittestDiscovery=function(e){return[r.join(o,"unittest_discovery.py"),...e]}},34581:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessLogger=void 0;const o=n(86700),s=n(19735),a=n(17585),c=n(77570),l=n(87450),u=n(96486),d=n(94146),p=n(89465);let h=class{constructor(e){this.workspaceService=e}logProcess(e,t,n){var r;if(!(0,c.isTestExecution)()&&c.isCI&&process.env.UITEST_DISABLE_PROCESS_LOGGING)return;let i=t?[e,...t].map((e=>e.trimQuotes().toCommandArgumentForPythonExt())).join(" "):e;const o=[`> ${this.getDisplayCommands(i)}`];if(null==n?void 0:n.cwd){const e="string"==typeof(null==n?void 0:n.cwd)?null==n?void 0:n.cwd:null===(r=null==n?void 0:n.cwd)||void 0===r?void 0:r.toString();o.push(`cwd: ${this.getDisplayCommands(e)}`)}"string"==typeof(null==n?void 0:n.shell)&&o.push(`shell: ${(0,p.identifyShellFromShellPath)(null==n?void 0:n.shell)}`),o.forEach((e=>{(0,s.traceLog)(e)}))}getDisplayCommands(e){this.workspaceService.workspaceFolders&&1===this.workspaceService.workspaceFolders.length&&(e=f(e,this.workspaceService.workspaceFolders[0].uri.fsPath,"."));const t=(0,l.getUserHomeDir)();return t&&(e=f(e,t,"~")),e}};function f(e,t,n){function r(e){let t=(0,u.escapeRegExp)(e);return(0,l.getOSType)()===l.OSType.Windows&&(t=(0,d.replaceAll)(t,"\\\\","(\\\\|/)")),new RegExp(t,"ig")}let i=e.split(" ");for(let e=0;e<i.length;e++){let o=r(t);const s=o.exec(i[e]);if(s){const a=s.index;a>0&&i[e][a-1].match(/[a-z]/)&&(o=r(t.substring(1))),i[e]=i[e].replace(o,n)}}return i.join(" ")}h=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IWorkspaceService))],h),t.ProcessLogger=h},66462:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessService=void 0;const r=n(82361),i=n(19735),o=n(18699),s=n(76239);class a extends r.EventEmitter{constructor(e){super(),this.env=e,this.processesToKill=new Set}static isAlive(e){try{return process.kill(e,0),!0}catch(e){return!1}}static kill(e){(0,o.killPid)(e)}dispose(){this.removeAllListeners(),this.processesToKill.forEach((e=>{try{e.dispose()}catch(e){}}))}execObservable(e,t,n={}){const r={...n,doNotLog:!0},i=(0,o.execObservable)(e,t,r,this.env,this.processesToKill);return this.emit("exec",e,t,n),i}exec(e,t,n={}){if(this.emit("exec",e,t,n),n.useWorker)return(0,s.workerPlainExec)(e,t,n);const r={...n,doNotLog:!0};return(0,o.plainExec)(e,t,r,this.env,this.processesToKill)}shellExec(e,t={}){if(this.emit("exec",e,void 0,t),t.useWorker)return(0,s.workerShellExec)(e,t);const n=new Set,r={...t,doNotLog:!0};return(0,o.shellExec)(e,r,this.env,n).finally((()=>{n.forEach((t=>{try{t.dispose()}catch(t){(0,i.traceError)(`Unable to kill process for ${e}`)}}))}))}}t.ProcessService=a},98065:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ProcessServiceFactory=void 0;const o=n(86700),s=n(61684),a=n(19909),c=n(66462),l=n(29983);let u=class{constructor(e,t,n){this.envVarsService=e,this.processLogger=t,this.disposableRegistry=n}async create(e,t){const n=(null==t?void 0:t.doNotUseCustomEnvs)?void 0:await this.envVarsService.getEnvironmentVariables(e),r=new c.ProcessService(n);return this.disposableRegistry.push(r),r.on("exec",this.processLogger.logProcess.bind(this.processLogger))}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IEnvironmentVariablesProvider)),i(1,(0,o.inject)(l.IProcessLogger)),i(2,(0,o.inject)(s.IDisposableRegistry))],u),t.ProcessServiceFactory=u},3672:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMicrosoftStoreEnv=t.createCondaEnv=t.createPythonEnv=void 0;const r=n(71017),i=n(19735),o=n(75470),s=n(24708),a=n(93400),c=n(69554),l=n(77570),u=n(31776),d=new Map;class p{constructor(e,t){this.pythonPath=e,this.deps=t,this.cachedInterpreterInformation=null}getExecutionInfo(e=[],t){const n=this.deps.getPythonArgv(this.pythonPath);return(0,s.buildPythonExecInfo)(n,e,t)}getExecutionObservableInfo(e=[],t){const n=this.deps.getObservablePythonArgv(this.pythonPath);return(0,s.buildPythonExecInfo)(n,e,t)}async getInterpreterInformation(){return null===this.cachedInterpreterInformation&&(this.cachedInterpreterInformation=await this.getInterpreterInformationImpl()),this.cachedInterpreterInformation}async getExecutablePath(){if(await this.deps.isValidExecutable(this.pythonPath))return this.pythonPath;const e=d.get(this.pythonPath);if(void 0!==e&&!(0,l.isTestExecution)())return e;const t=this.getExecutionInfo(),n=(0,a.getExecutablePath)(t,this.deps.shellExec);return d.set(this.pythonPath,n),n}async getModuleVersion(e){const[t,n]=u.getModuleVersion(e),r=this.getExecutionInfo(t);let o;try{o=await this.deps.exec(r.command,r.args)}catch(t){return void(0,i.traceVerbose)(`Error when getting version of module ${e}`,t)}return n(o.stdout)}async isModuleInstalled(e){const[t]=u.isModuleInstalled(e),n=this.getExecutionInfo(t);try{await this.deps.exec(n.command,n.args)}catch(t){return(0,i.traceVerbose)(`Error when checking if module is installed ${e}`,t),!1}return!0}async getInterpreterInformationImpl(){try{const e=this.getExecutionInfo();return await(0,c.getInterpreterInfo)(e,this.deps.shellExec,{verbose:i.traceVerbose,error:i.traceError})}catch(e){(0,i.traceError)(`Failed to get interpreter information for '${this.pythonPath}'`,e)}}}function h(e,t,n,i,o){return{getPythonArgv:e=>(r.basename(e)===e&&(t=e.split(" ")),t||[e]),getObservablePythonArgv:e=>(r.basename(e)===e&&(n=e.split(" ")),n||[e]),isValidExecutable:e,exec:async(e,t)=>i(e,t,{throwOnStdErr:!0}),shellExec:o}}t.createPythonEnv=function(e,t,n){const r=h((async e=>n.pathExists(e)),void 0,void 0,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n)));return new p(e,r)},t.createCondaEnv=async function(e,t,n){const r=await o.Conda.getConda(),i=await(null==r?void 0:r.getRunPythonArgs({name:e.name,prefix:e.path}));if(!i)return;const s=h((async e=>n.pathExists(e)),i,i,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n))),a=await(null==r?void 0:r.getInterpreterPathForEnvironment({name:e.name,prefix:e.path}));return a?new p(a,s):void 0},t.createMicrosoftStoreEnv=function(e,t){const n=h((async e=>!0),void 0,void 0,((e,n,r)=>t.exec(e,n,r)),((e,n)=>t.shellExec(e,n)));return new p(e,n)}},51625:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonExecutionFactory=void 0;const o=n(86700),s=n(80351),a=n(18639),c=n(77498),l=n(54813),u=n(61522),d=n(84974),p=n(61684),h=n(66462),f=n(3672),g=n(29672),m=n(29983),v=n(87282),y=n(59314),b=n(19735);let S=class{constructor(e,t,n,r,i,o,s){this.serviceContainer=e,this.activationHelper=t,this.processServiceFactory=n,this.configService=r,this.pyenvs=i,this.autoSelection=o,this.interpreterPathExpHelper=s,this.disposables=this.serviceContainer.get(p.IDisposableRegistry),this.logger=this.serviceContainer.get(m.IProcessLogger),this.fileSystem=this.serviceContainer.get(d.IFileSystem)}async create(e){let{pythonPath:t}=e;if(!t||"python"===t){const n=this.serviceContainer.get(a.IActivatedEnvironmentLaunch);await n.selectIfLaunchedViaActivatedEnv();const r=this.interpreterPathExpHelper.get(e.resource);r&&"python"!==r||await Promise.race([this.autoSelection.autoSelectInterpreter(e.resource).then((()=>!0)),(0,y.sleep)(5e4).then((()=>!1))])||(0,b.traceError)("Autoselection timeout out, this is likely a issue with how consumer called execution factory API. Using default python to execute."),t=this.configService.getSettings(e.resource).pythonPath}const n=await this.processServiceFactory.create(e.resource),r=await this.createCondaExecutionService(t,n);if(r)return r;const i=this.pyenvs.isMicrosoftStoreInterpreter.bind(this.pyenvs);return _(n,await i(t)?(0,f.createMicrosoftStoreEnv)(t,n):(0,f.createPythonEnv)(t,n,this.fileSystem))}async createActivatedEnvironment(e){const t=await this.activationHelper.getActivatedEnvironmentVariables(e.resource,e.interpreter,e.allowEnvironmentFetchExceptions),n=t&&Object.keys(t).length>0;if((0,l.sendTelemetryEvent)(u.EventName.PYTHON_INTERPRETER_ACTIVATION_ENVIRONMENT_VARIABLES,void 0,{hasEnvVars:n}),!n)return this.create({resource:e.resource,pythonPath:e.interpreter?e.interpreter.path:void 0});const r=e.interpreter?e.interpreter.path:this.configService.getSettings(e.resource).pythonPath,i=new h.ProcessService({...t});i.on("exec",this.logger.logProcess.bind(this.logger)),this.disposables.push(i);const o=await this.createCondaExecutionService(r,i);return o||_(i,(0,f.createPythonEnv)(r,i,this.fileSystem))}async createCondaExecutionService(e,t){const n=this.serviceContainer.get(a.IComponentAdapter),[r]=await Promise.all([n.getCondaEnvironment(e)]);if(!r)return;const i=await(0,f.createCondaEnv)(r,t,this.fileSystem);return i?_(t,i):void 0}};function _(e,t){const n=(0,g.createPythonProcessService)(e,t);return{getInterpreterInformation:()=>t.getInterpreterInformation(),getExecutablePath:()=>t.getExecutablePath(),isModuleInstalled:e=>t.isModuleInstalled(e),getModuleVersion:e=>t.getModuleVersion(e),getExecutionInfo:e=>t.getExecutionInfo(e),execObservable:(e,t)=>n.execObservable(e,t),execModuleObservable:(e,t,r)=>n.execModuleObservable(e,t,r),exec:(e,t)=>n.exec(e,t),execModule:(e,t,r)=>n.execModule(e,t,r),execForLinter:(e,t,r)=>n.execForLinter(e,t,r)}}S=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer)),i(1,(0,o.inject)(s.IEnvironmentActivationService)),i(2,(0,o.inject)(m.IProcessServiceFactory)),i(3,(0,o.inject)(p.IConfigurationService)),i(4,(0,o.inject)(a.IComponentAdapter)),i(5,(0,o.inject)(v.IInterpreterAutoSelectionService)),i(6,(0,o.inject)(p.IInterpreterPathService))],S),t.PythonExecutionFactory=S},29672:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPythonProcessService=void 0;const r=n(26804),i=n(97300),o=n(31776);class s{constructor(e){this.deps=e}execObservable(e,t){const n={...t},r=this.deps.getExecutionObservableInfo(e);return this.deps.execObservable(r.command,r.args,n)}execModuleObservable(e,t,n){const r=o.execModule(e,t),i={...n},s=this.deps.getExecutionObservableInfo(r);return this.deps.execObservable(s.command,s.args,i)}async exec(e,t){const n={...t},r=this.deps.getExecutionInfo(e);return this.deps.exec(r.command,r.args,n)}async execModule(e,t,n){const s=o.execModule(e,t),a={...n},c=this.deps.getExecutionInfo(s),l=await this.deps.exec(c.command,c.args,a);if(e&&r.ErrorUtils.outputHasModuleNotInstalledError(e,l.stderr)&&!await this.deps.isModuleInstalled(e))throw new i.ModuleNotInstalledError(e);return l}async execForLinter(e,t,n){const o={...n},s=this.deps.getExecutionInfo(t),a=await this.deps.exec(s.command,s.args,o);if(e&&r.ErrorUtils.outputHasModuleNotInstalledError(e,a.stderr)&&!await this.deps.isModuleInstalled(e))throw new i.ModuleNotInstalledError(e);return a}}t.createPythonProcessService=function(e,t){return new s({isModuleInstalled:async e=>t.isModuleInstalled(e),getExecutionInfo:e=>t.getExecutionInfo(e),getExecutionObservableInfo:e=>t.getExecutionObservableInfo(e),exec:async(t,n,r)=>e.exec(t,n,r),execObservable:(t,n,r)=>e.execObservable(t,n,r)})}},91950:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PythonToolExecutionService=void 0;const o=n(86700),s=n(77498),a=n(29983);let c=class{constructor(e){this.serviceContainer=e}async execObservable(e,t,n){if(t.env)throw new Error("Environment variables are not supported");return e.moduleName&&e.moduleName.length>0?(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModuleObservable(e.moduleName,e.args,t):(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).execObservable(e.execPath,e.args,{...t})}async exec(e,t,n){if(t.env)throw new Error("Environment variables are not supported");return e.moduleName&&e.moduleName.length>0?(await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n})).execModule(e.moduleName,e.args,t):(await this.serviceContainer.get(a.IProcessServiceFactory).create(n)).exec(e.execPath,e.args,{...t})}async execForLinter(e,t,n){if(t.env)throw new Error("Environment variables are not supported");const r=await this.serviceContainer.get(a.IPythonExecutionFactory).create({resource:n});return e.execPath?r.exec(e.args,t):r.execForLinter(e.moduleName,e.args,t)}};c=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IServiceContainer))],c),t.PythonToolExecutionService=c},18699:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.killPid=t.execObservable=t.plainExec=t.shellExec=void 0;const r=n(32081),i=n(95100),o=n(59314),s=n(93289),a=n(29983),c=n(3481),l=n(73153),u=n(19735),d=n(56792),p=n(34581),h=/your [0-9]+x[0-9]+ screen size is bogus\. expect trouble/;function f(e,t){const n={...e},r=n;if(r){r.encoding="string"==typeof r.encoding&&r.encoding.length>0?r.encoding:s.DEFAULT_ENCODING;const{encoding:e}=r;delete r.encoding,r.encoding=e}if(n.env&&0!==Object.keys(n.env).length)n.env={...n.env};else{const e=t||process.env;n.env={...e}}return r&&r.extraVariables&&(n.env={...n.env,...r.extraVariables}),n.env.PYTHONUNBUFFERED="1",n.env.PYTHONIOENCODING||(n.env.PYTHONIOENCODING="utf-8"),n}function g(e){const t=e.match(/>>>PYTHON-EXEC-OUTPUT([\s\S]*)<<<PYTHON-EXEC-OUTPUT/),n=null!==t&&t.length>=2?t[1].trim():void 0;return void 0!==n?n:e}function m(e){try{"win32"===process.platform?(0,r.execSync)(`taskkill /pid ${e} /T /F`):process.kill(e)}catch(t){(0,u.traceVerbose)("Unable to kill process with pid",e)}}t.shellExec=function(e,t={},n,i){const o=f(t,n);return t.doNotLog||new p.ProcessLogger(new d.WorkspaceService).logProcess(e,void 0,o),new Promise(((t,n)=>{let s=!1;const a=(0,r.exec)(e,o,((e,r,i)=>{e&&null!==e?n(e):o.throwOnStdErr&&i&&i.length?n(new Error(i)):(r=g(r),t({stderr:i&&i.length>0?i:void 0,stdout:r}))}));a.once("close",(()=>{s=!0})),a.once("exit",(()=>{s=!0})),a.once("error",(()=>{s=!0}));const c={dispose:()=>{s||a.killed||(a.pid?m(a.pid):a.kill())}};i&&i.add(c)}))},t.plainExec=function(e,t,n={},i,s){var u,v;const y=f(n,i),b=y.encoding?y.encoding:"utf8";n.doNotLog||new p.ProcessLogger(new d.WorkspaceService).logProcess(e,t,n);const S=(0,r.spawn)(e,t,y);null===(u=S.stdout)||void 0===u||u.on("error",c.noop),null===(v=S.stderr)||void 0===v||v.on("error",c.noop);const _=(0,o.createDeferred)(),E={dispose:()=>{S.killed||_.completed||(S.pid?m(S.pid):S.kill())}};null==s||s.add(E);const w=[],T=(e,t,n)=>{null==e||e.on(t,n),w.push({dispose:()=>null==e?void 0:e.removeListener(t,n)})};n.token&&w.push(n.token.onCancellationRequested(E.dispose));const C=[];T(S.stdout,"data",(e=>{var t;C.push(e),null===(t=n.outputChannel)||void 0===t||t.append(e.toString())}));const P=[];return T(S.stderr,"data",(e=>{var t;n.mergeStdOutErr?(C.push(e),P.push(e)):P.push(e),null===(t=n.outputChannel)||void 0===t||t.append(e.toString())})),S.once("close",(()=>{if(_.completed)return;const e=0===P.length?void 0:(0,l.decodeBuffer)(P,b);if(e&&e.length>0&&n.throwOnStdErr&&(!h.test(e)||0!==e.replace(h,"").trim().length))_.reject(new a.StdErrError(e));else{let t=(0,l.decodeBuffer)(C,b);t=g(t),_.resolve({stdout:t,stderr:e})}w.forEach((e=>e.dispose())),E.dispose()})),S.once("error",(e=>{_.reject(e),w.forEach((e=>e.dispose())),E.dispose()})),_.promise},t.execObservable=function(e,t,n={},o,s){const c=f(n,o),u=c.encoding?c.encoding:"utf8";n.doNotLog||new p.ProcessLogger(new d.WorkspaceService).logProcess(e,t,n);const h=(0,r.spawn)(e,t,c);let g=!1;const v={dispose(){h&&h.pid&&!h.killed&&!g&&m(h.pid),h&&h.unref()}};null==s||s.add(v);const y=new i.Observable((e=>{var t,r;const i=[],o=(e,t,n)=>{null==e||e.on(t,n),i.push({dispose:()=>null==e?void 0:e.removeListener(t,n)})};n.token&&i.push(n.token.onCancellationRequested((()=>{g||h.killed||(h.pid?m(h.pid):h.kill(),g=!0)})));const s=(t,r)=>{let i=(0,l.decodeBuffer)([r],u);"stderr"===t&&n.throwOnStdErr?e.error(new a.StdErrError(i)):(i=function(e){return(e=e.replace(">>>PYTHON-EXEC-OUTPUT\r\n","").replace(">>>PYTHON-EXEC-OUTPUT\n","")).replace("<<<PYTHON-EXEC-OUTPUT\r\n","").replace("<<<PYTHON-EXEC-OUTPUT\n","")}(i),e.next({source:t,out:i}))};o(h.stdout,"data",(e=>s("stdout",e))),o(h.stderr,"data",(e=>s("stderr",e))),h.once("close",(()=>{g=!0,e.complete(),i.forEach((e=>e.dispose()))})),h.once("exit",(()=>{g=!0,e.complete(),i.forEach((e=>e.dispose()))})),h.once("error",(t=>{g=!0,e.error(t),i.forEach((e=>e.dispose()))})),void 0!==n.stdinStr&&(null===(t=h.stdin)||void 0===t||t.write(n.stdinStr),null===(r=h.stdin)||void 0===r||r.end())}));return{proc:h,out:y,dispose:v.dispose}},t.killPid=m},52615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(98065),i=n(51625),o=n(91950),s=n(29983);t.registerTypes=function(e){e.addSingleton(s.IProcessServiceFactory,r.ProcessServiceFactory),e.addSingleton(s.IPythonExecutionFactory,i.PythonExecutionFactory),e.addSingleton(s.IPythonToolExecutionService,o.PythonToolExecutionService)}},29983:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IPythonToolExecutionService=t.StdErrError=t.IPythonExecutionService=t.IPythonExecutionFactory=t.IProcessServiceFactory=t.IProcessLogger=void 0,t.IProcessLogger=Symbol("IProcessLogger"),t.IProcessServiceFactory=Symbol("IProcessServiceFactory"),t.IPythonExecutionFactory=Symbol("IPythonExecutionFactory"),t.IPythonExecutionService=Symbol("IPythonExecutionService");class n extends Error{constructor(e){super(e)}}t.StdErrError=n,t.IPythonToolExecutionService=Symbol("IPythonToolRunnerService")},13018:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.executeWorkerFile=void 0;const r=n(71267),i=n(71017),o=n(19735);t.executeWorkerFile=async function(e,t){if(!e.endsWith(".worker.js"))throw new Error('Worker file must end with ".worker.js" for webpack to bundle webworkers');return new Promise(((n,s)=>{const a=new r.Worker(e,{workerData:t}),c=a.threadId;(0,o.traceVerbose)(`Worker id ${c} for file ${i.basename(e)} with data ${JSON.stringify(t)}`),a.on("message",(e=>{e.err&&s(e.err),n(e.res)})),a.on("error",(t=>{(0,o.traceError)(`Error in worker ${e}`,t),s(t)})),a.on("exit",(t=>{(0,o.traceVerbose)(`Worker id ${c} exited with code ${t}`),0!==t&&s(new Error(`Worker ${e} stopped with exit code ${t}`))}))}))}},76239:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.workerPlainExec=t.workerShellExec=void 0;const r=n(71017),i=n(13018);t.workerShellExec=function(e,t){return(0,i.executeWorkerFile)(r.join(__dirname,"shellExec.worker.js"),{command:e,options:t})},t.workerPlainExec=function(e,t,n={}){return(0,i.executeWorkerFile)(r.join(__dirname,"plainExec.worker.js"),{file:e,args:t,options:n})}},39702:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.registerTypes=void 0;const r=n(90819),i=n(61684),o=n(11272),s=n(15036),a=n(78838),c=n(17792),l=n(18718),u=n(13706),d=n(77633),p=n(17381),h=n(30651),f=n(5869),g=n(54144),m=n(67808),v=n(72874),y=n(13578),b=n(64991),S=n(53314),_=n(17585),E=n(56792),w=n(30751),T=n(15797),C=n(12474),P=n(80819),x=n(97469),I=n(21621),R=n(73766),D=n(79434),O=n(20900),k=n(34581),A=n(29983),N=n(32237),M=n(80484),L=n(14744),j=n(92298),F=n(8572),U=n(78625),q=n(79152),V=n(78558),H=n(546),W=n(86678),B=n(55928),$=n(81731),K=n(67482),G=n(80656),z=n(58400),Y=n(22207),J=n(10195),Q=n(54094),X=n(32907),Z=n(35657),ee=n(65243);t.registerTypes=function(e){e.addSingletonInstance(i.IsWindows,(0,ee.isWindows)()),e.addSingleton(_.IActiveResourceService,c.ActiveResourceService),e.addSingleton(i.IInterpreterPathService,x.InterpreterPathService),e.addSingleton(i.IExtensions,y.Extensions),e.addSingleton(i.IRandom,J.Random),e.addSingleton(i.IPersistentStateFactory,R.PersistentStateFactory),e.addBinding(i.IPersistentStateFactory,r.IExtensionSingleActivationService),e.addSingleton(z.ITerminalServiceFactory,H.TerminalServiceFactory),e.addSingleton(i.IPathUtils,D.PathUtils),e.addSingleton(_.IApplicationShell,u.ApplicationShell),e.addSingleton(_.IClipboard,d.ClipboardService),e.addSingleton(i.ICurrentProcess,O.CurrentProcess),e.addSingleton(i.IInstaller,P.ProductInstaller),e.addSingleton(_.IJupyterExtensionDependencyManager,o.JupyterExtensionDependencyManager),e.addSingleton(r.IExtensionSingleActivationService,Z.RequireJupyterPrompt),e.addSingleton(r.IExtensionSingleActivationService,X.CreatePythonFileCommandHandler),e.addSingleton(_.ICommandManager,p.CommandManager),e.addSingleton(_.IContextKeyManager,Q.ContextKeyManager),e.addSingleton(i.IConfigurationService,w.ConfigurationService),e.addSingleton(_.IWorkspaceService,E.WorkspaceService),e.addSingleton(A.IProcessLogger,k.ProcessLogger),e.addSingleton(_.IDocumentManager,v.DocumentManager),e.addSingleton(_.ITerminalManager,S.TerminalManager),e.addSingleton(_.IDebugService,g.DebugService),e.addSingleton(_.IApplicationEnvironment,l.ApplicationEnvironment),e.addSingleton(_.ILanguageService,b.LanguageService),e.addSingleton(i.IBrowserService,I.BrowserService),e.addSingleton(z.ITerminalActivator,N.TerminalActivator),e.addSingleton(z.ITerminalActivationHandler,M.PowershellTerminalActivationFailedHandler),e.addSingleton(i.IExperimentService,C.ExperimentService),e.addSingleton(z.ITerminalHelper,W.TerminalHelper),e.addSingleton(z.ITerminalActivationCommandProvider,L.Bash,z.TerminalActivationProviders.bashCShellFish),e.addSingleton(z.ITerminalActivationCommandProvider,F.CommandPromptAndPowerShell,z.TerminalActivationProviders.commandPromptAndPowerShell),e.addSingleton(z.ITerminalActivationCommandProvider,j.Nushell,z.TerminalActivationProviders.nushell),e.addSingleton(z.ITerminalActivationCommandProvider,V.PyEnvActivationCommandProvider,z.TerminalActivationProviders.pyenv),e.addSingleton(z.ITerminalActivationCommandProvider,U.CondaActivationCommandProvider,z.TerminalActivationProviders.conda),e.addSingleton(z.ITerminalActivationCommandProvider,q.PipEnvActivationCommandProvider,z.TerminalActivationProviders.pipenv),e.addSingleton(i.IToolExecutionPath,T.PipEnvExecutionPath,i.ToolExecutionPath.pipenv),e.addSingleton(Y.IMultiStepInputFactory,Y.MultiStepInputFactory),e.addSingleton(a.IImportTracker,s.ImportTracker),e.addBinding(a.IImportTracker,r.IExtensionSingleActivationService),e.addSingleton(z.IShellDetector,$.TerminalNameShellDetector),e.addSingleton(z.IShellDetector,B.SettingsShellDetector),e.addSingleton(z.IShellDetector,K.UserEnvironmentShellDetector),e.addSingleton(z.IShellDetector,G.VSCEnvironmentShellDetector),e.addSingleton(r.IExtensionSingleActivationService,h.ReloadVSCodeCommandHandler),e.addSingleton(r.IExtensionSingleActivationService,f.ReportIssueCommandHandler),e.addSingleton(r.IExtensionSingleActivationService,m.DebugSessionTelemetry)}},94146:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.replaceAll=t.splitLines=void 0,t.splitLines=function(e,t={removeEmptyEntries:!0,trim:!0}){let n=e.split(/\r?\n/g);return(null==t?void 0:t.trim)&&(n=n.map((e=>e.trim()))),(null==t?void 0:t.removeEmptyEntries)&&(n=n.filter((e=>e.length>0))),n},t.replaceAll=function(e,t,n){return e?e.replace(new RegExp(t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),n):e}},57563:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseTerminalActivator=void 0;const r=n(19735),i=n(59314);t.BaseTerminalActivator=class{constructor(e){this.helper=e,this.activatedTerminals=new Map}async activateEnvironmentInTerminal(e,t){if(this.activatedTerminals.has(e))return this.activatedTerminals.get(e);const n=(0,i.createDeferred)();this.activatedTerminals.set(e,n.promise);const o=this.helper.identifyTerminalShell(e),s=await this.helper.getEnvironmentActivationCommands(o,null==t?void 0:t.resource,null==t?void 0:t.interpreter);let a=!1;if(s)for(const n of s)e.show(null==t?void 0:t.preserveFocus),(0,r.traceVerbose)(`Command sent to terminal: ${n}`),e.sendText(n),await this.waitForCommandToProcess(o),a=!0;return n.resolve(a),a}async waitForCommandToProcess(e){await(0,i.sleep)(500)}}},32237:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalActivator=void 0;const o=n(86700),s=n(61684),a=n(58400),c=n(57563),l=n(46747);let u=class{constructor(e,t,n,r){this.helper=e,this.handlers=t,this.configurationService=n,this.experimentService=r,this.pendingActivations=new WeakMap,this.initialize()}async activateEnvironmentInTerminal(e,t){let n=this.pendingActivations.get(e);return n||(n=this.activateEnvironmentInTerminalImpl(e,t),this.pendingActivations.set(e,n),n)}async activateEnvironmentInTerminalImpl(e,t){if(!this.configurationService.getSettings(null==t?void 0:t.resource).terminal.activateEnvironment||(0,l.inTerminalEnvVarExperiment)(this.experimentService)||(null==t?void 0:t.hideFromUser))return!1;const n=await this.baseActivator.activateEnvironmentInTerminal(e,t);return this.handlers.forEach((r=>r.handleActivation(e,null==t?void 0:t.resource,!0===(null==t?void 0:t.preserveFocus),n).ignoreErrors())),n}initialize(){this.baseActivator=new c.BaseTerminalActivator(this.helper)}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ITerminalHelper)),i(1,(0,o.multiInject)(a.ITerminalActivationHandler)),i(2,(0,o.inject)(s.IConfigurationService)),i(3,(0,o.inject)(s.IExperimentService))],u),t.TerminalActivator=u},80484:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PowershellTerminalActivationFailedHandler=void 0;const o=n(86700),s=n(54205),a=n(93971),c=n(84974),l=n(58400);let u=class{constructor(e,t,n){this.helper=e,this.platformService=t,this.diagnosticService=n}async handleActivation(e,t,n,r){if(r||!this.platformService.isWindows)return;const i=this.helper.identifyTerminalShell(e);if(i!==l.TerminalShellType.powershell&&i!==l.TerminalShellType.powershellCore)return;const o=await this.helper.getEnvironmentActivationCommands(l.TerminalShellType.commandPrompt,t);o&&Array.isArray(o)&&0!==o.length&&this.diagnosticService.handle([new s.PowershellActivationNotAvailableDiagnostic(t)]).ignoreErrors()}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(l.ITerminalHelper)),i(1,(0,o.inject)(c.IPlatformService)),i(2,(0,o.inject)(a.IDiagnosticsService)),i(2,(0,o.named)(s.PowerShellActivationHackDiagnosticsServiceId))],u),t.PowershellTerminalActivationFailedHandler=u},87688:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useCommandPromptAsDefaultShell=t.getCommandPromptLocation=void 0;const r=n(71017),i=n(66828);function o(e){const t=e.env.hasOwnProperty("PROCESSOR_ARCHITEW6432"),n=r.join(e.env.windir,t?"Sysnative":"System32");return r.join(n,"cmd.exe")}t.getCommandPromptLocation=o,t.useCommandPromptAsDefaultShell=async function(e,t){const n=o(e);await t.updateSectionSetting("terminal","integrated.shell.windows",n,void 0,i.ConfigurationTarget.Global)}},86575:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.VenvBaseActivationCommandProvider=void 0;const o=n(86700),s=n(71017),a=n(18639),c=n(77498),l=n(84974);let u=class{constructor(e){this.serviceContainer=e}async getActivationCommands(e,t){const n=await this.serviceContainer.get(a.IInterpreterService).getActiveInterpreter(e);if(n)return this.getActivationCommandsForInterpreter(n.path,t)}};u=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer))],u),t.VenvBaseActivationCommandProvider=class extends u{isShellSupported(e){return void 0!==this.scripts[e]}async findScriptFile(e,t){const n=this.serviceContainer.get(l.IFileSystem),r=this.scripts[t];if(r)return function(e,t,r,i){const o="string"==typeof e?[e]:e;return async e=>{const i=t(e);for(const e of o){const t=r(i,e);if(await(s=t,n.fileExists(s)))return t}var s}}(r,s.dirname,s.join)(e)}}},14744:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Bash=t.getAllScripts=void 0;const i=n(86700);n(32727);const o=n(58400),s=n(86575),a={[o.TerminalShellType.wsl]:["activate.sh","activate"],[o.TerminalShellType.ksh]:["activate.sh","activate"],[o.TerminalShellType.zsh]:["activate.sh","activate"],[o.TerminalShellType.gitbash]:["activate.sh","activate"],[o.TerminalShellType.bash]:["activate.sh","activate"],[o.TerminalShellType.tcshell]:["activate.csh"],[o.TerminalShellType.cshell]:["activate.csh"],[o.TerminalShellType.fish]:["activate.fish"]};t.getAllScripts=function(){const e=[];for(const t of Object.values(a))for(const n of t)e.includes(n)||e.push(n);return e};let c=class extends s.VenvBaseActivationCommandProvider{constructor(){super(...arguments),this.scripts=a}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return[`source ${n.fileToCommandArgumentForPythonExt()}`]}};c=r([(0,i.injectable)()],c),t.Bash=c},8572:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.CommandPromptAndPowerShell=t.getAllScripts=void 0;const o=n(86700),s=n(71017),a=n(77498);n(32727);const c=n(58400),l=n(86575),u={[c.TerminalShellType.commandPrompt]:["activate.bat","Activate.ps1"],[c.TerminalShellType.powershell]:["Activate.ps1","activate.bat"],[c.TerminalShellType.powershellCore]:["Activate.ps1","activate.bat"]};t.getAllScripts=function(e){const t=[];for(const n of Object.values(u))for(const r of n)t.includes(r)||t.push(r,e("Scripts",r),e("scripts",r));return t};let d=class extends l.VenvBaseActivationCommandProvider{constructor(e){super(e),this.scripts={};for(const[e,t]of Object.entries(u)){const n=e,r=[];for(const e of t)r.push(e,s.join("Scripts",e),s.join("scripts",e));this.scripts[n]=r}}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return t===c.TerminalShellType.commandPrompt&&n.endsWith("activate.bat")?[n.fileToCommandArgumentForPythonExt()]:t!==c.TerminalShellType.powershell&&t!==c.TerminalShellType.powershellCore||!n.endsWith("Activate.ps1")?t===c.TerminalShellType.commandPrompt&&n.endsWith("Activate.ps1")?[]:void 0:[`& ${n.fileToCommandArgumentForPythonExt()}`]}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],d),t.CommandPromptAndPowerShell=d},78625:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t._getPowershellCommands=t.CondaActivationCommandProvider=void 0,n(32727);const o=n(86700),s=n(71017),a=n(18639),c=n(84974),l=n(61684),u=n(58400);let d=class{constructor(e,t,n,r){this.condaService=e,this.platform=t,this.configService=n,this.pyenvs=r}isShellSupported(){return!0}getActivationCommands(e,t){const{pythonPath:n}=this.configService.getSettings(e);return this.getActivationCommandsForInterpreter(n,t)}async getActivationCommandsForInterpreter(e,t){const n=await this.pyenvs.getCondaEnvironment(e);if(!n)return;const r=n.name.length>0?n.name:n.path,i=await this.condaService.getInterpreterPathForEnvironment(n),o=await this.condaService.getActivationScriptFromInterpreter(i,n.name);if(null==o?void 0:o.path){if(this.platform.isWindows&&t!==u.TerminalShellType.bash&&t!==u.TerminalShellType.gitbash)return[o.path,`conda activate ${r.toCommandArgumentForPythonExt()}`];const e=await this.condaService.getCondaInfo();return"global"!==o.type||void 0===(null==e?void 0:e.conda_shlvl)||-1===e.conda_shlvl?"activate"===o.path?[`source ${o.path}`,`conda activate ${r.toCommandArgumentForPythonExt()}`]:[`source ${o.path} ${r.toCommandArgumentForPythonExt()}`]:[`conda activate ${r.toCommandArgumentForPythonExt()}`]}switch(t){case u.TerminalShellType.powershell:case u.TerminalShellType.powershellCore:return p(r);case u.TerminalShellType.fish:return async function(e,t){return[`${t.fileToCommandArgumentForPythonExt()} activate ${e.toCommandArgumentForPythonExt()}`]}(r,await this.condaService.getCondaFile());default:return this.platform.isWindows?this.getWindowsCommands(r):async function(e,t){const n=s.dirname(t);return[`source ${s.join(n,"activate").fileToCommandArgumentForPythonExt()} ${e.toCommandArgumentForPythonExt()}`]}(r,await this.condaService.getCondaFile())}}async getWindowsActivateCommand(){let e="activate";const t=await this.condaService.getCondaFile();if(t&&s.basename(t)!==t){const n=s.dirname(t);e=s.join(n,e),e=e.toCommandArgumentForPythonExt()}return e}async getWindowsCommands(e){return[`${await this.getWindowsActivateCommand()} ${e.toCommandArgumentForPythonExt()}`]}};async function p(e){return[`conda activate ${e.toCommandArgumentForPythonExt()}`]}d=r([(0,o.injectable)(),i(0,(0,o.inject)(a.ICondaService)),i(1,(0,o.inject)(c.IPlatformService)),i(2,(0,o.inject)(l.IConfigurationService)),i(3,(0,o.inject)(a.IComponentAdapter))],d),t.CondaActivationCommandProvider=d,t._getPowershellCommands=p},92298:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.Nushell=t.getAllScripts=void 0;const i=n(86700);n(32727);const o=n(58400),s=n(86575),a={[o.TerminalShellType.nushell]:["activate.nu"]};t.getAllScripts=function(){const e=[];for(const t of Object.values(a))for(const n of t)e.includes(n)||e.push(n);return e};let c=class extends s.VenvBaseActivationCommandProvider{constructor(){super(...arguments),this.scripts=a}async getActivationCommandsForInterpreter(e,t){const n=await this.findScriptFile(e,t);if(n)return[`overlay use ${n.fileToCommandArgumentForPythonExt()}`]}};c=r([(0,i.injectable)()],c),t.Nushell=c},79152:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PipEnvActivationCommandProvider=void 0;const o=n(86700);n(32727);const s=n(18639),a=n(37924),c=n(81387),l=n(17585),u=n(61684);let d=class{constructor(e,t,n){this.interpreterService=e,this.pipEnvExecution=t,this.workspaceService=n}isShellSupported(){return!1}async getActivationCommands(e){const t=await this.interpreterService.getActiveInterpreter(e);if(!t||t.envType!==c.EnvironmentType.Pipenv)return;const n=e?this.workspaceService.getWorkspaceFolder(e):void 0;return!n||await(0,a.isPipenvEnvironmentRelatedToFolder)(t.path,null==n?void 0:n.uri.fsPath)?[`${this.pipEnvExecution.executable.fileToCommandArgumentForPythonExt()} shell`]:void 0}async getActivationCommandsForInterpreter(e){const t=await this.interpreterService.getInterpreterDetails(e);if(t&&t.envType===c.EnvironmentType.Pipenv)return[`${this.pipEnvExecution.executable.fileToCommandArgumentForPythonExt()} shell`]}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IInterpreterService)),i(1,(0,o.inject)(u.IToolExecutionPath)),i(1,(0,o.named)(u.ToolExecutionPath.pipenv)),i(2,(0,o.inject)(l.IWorkspaceService))],d),t.PipEnvActivationCommandProvider=d},78558:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.PyEnvActivationCommandProvider=void 0;const o=n(86700),s=n(18639),a=n(77498),c=n(81387);let l=class{constructor(e){this.serviceContainer=e}isShellSupported(e){return!0}async getActivationCommands(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getActiveInterpreter(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return[`pyenv shell ${n.envName.toCommandArgumentForPythonExt()}`]}async getActivationCommandsForInterpreter(e,t){const n=await this.serviceContainer.get(s.IInterpreterService).getInterpreterDetails(e);if(n&&n.envType===c.EnvironmentType.Pyenv&&n.envName)return[`pyenv shell ${n.envName.toCommandArgumentForPythonExt()}`]}};l=r([(0,o.injectable)(),i(0,(0,o.inject)(a.IServiceContainer))],l),t.PyEnvActivationCommandProvider=l},546:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalServiceFactory=void 0;const o=n(86700),s=n(71017),a=n(18639),c=n(77498),l=n(17585),u=n(84974),d=n(97207),p=n(88624);let h=class{constructor(e,t,n){this.serviceContainer=e,this.fs=t,this.interpreterService=n,this.terminalServices=new Map}getTerminalService(e){const t=null==e?void 0:e.resource,n=null==e?void 0:e.title;let r="string"==typeof n&&n.trim().length>0?n.trim():"Python";const i=null==e?void 0:e.interpreter,o=this.getTerminalId(r,t,i,e.newTerminalPerFile);if(!this.terminalServices.has(o)){t&&e.newTerminalPerFile&&(r=`${r}: ${s.basename(t.fsPath).replace(".py","")}`),e.title=r;const n=new d.TerminalService(this.serviceContainer,e);this.terminalServices.set(o,n)}return new p.SynchronousTerminalService(this.fs,this.interpreterService,this.terminalServices.get(o),i)}createTerminalService(e,t){return t="string"==typeof t&&t.trim().length>0?t.trim():"Python",new d.TerminalService(this.serviceContainer,{resource:e,title:t})}getTerminalId(e,t,n,r){if(!t&&!n)return e;const i=this.serviceContainer.get(l.IWorkspaceService).getWorkspaceFolder(t||void 0),o=t&&r?t.fsPath:"";return`${e}:${(null==i?void 0:i.uri.fsPath)||""}:${null==n?void 0:n.path}:${o}`}};h=r([(0,o.injectable)(),i(0,(0,o.inject)(c.IServiceContainer)),i(1,(0,o.inject)(u.IFileSystem)),i(2,(0,o.inject)(a.IInterpreterService))],h),t.TerminalServiceFactory=h},86678:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalHelper=void 0;const o=n(86700),s=n(18639),a=n(77498),c=n(19735),l=n(81387),u=n(54813),d=n(61522),p=n(17585);n(32727);const h=n(84974),f=n(61684),g=n(87450),m=n(71791),v=n(58400);let y=class{constructor(e,t,n,r,i,o,s,a,c,l,u,d){this.platform=e,this.terminalManager=t,this.serviceContainer=n,this.interpreterService=r,this.configurationService=i,this.conda=o,this.bashCShellFish=s,this.commandPromptAndPowerShell=a,this.nushell=c,this.pyenv=l,this.pipenv=u,this.shellDetector=new m.ShellDetector(this.platform,d)}createTerminal(e){return this.terminalManager.createTerminal({name:e})}identifyTerminalShell(e){return this.shellDetector.identifyTerminalShell(e)}buildCommandForTerminal(e,t,n){const r=e===v.TerminalShellType.powershell||e===v.TerminalShellType.powershellCore?"& ":"",i=n.map((e=>e.toCommandArgumentForPythonExt()));return`${r}${t.fileToCommandArgumentForPythonExt()} ${i.join(" ")}`.trim()}async getEnvironmentActivationCommands(e,t,n){const r=[this.pipenv,this.pyenv,this.bashCShellFish,this.commandPromptAndPowerShell,this.nushell],i=this.getActivationCommands(t||void 0,n,e,r);return this.sendTelemetry(e,d.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_TERMINAL,n,i).ignoreErrors(),i}async getEnvironmentActivationShellCommands(e,t,n){if(this.platform.osType===g.OSType.Unknown)return;const r=[this.bashCShellFish,this.commandPromptAndPowerShell,this.nushell],i=this.getActivationCommands(e,n,t,r);return this.sendTelemetry(t,d.EventName.PYTHON_INTERPRETER_ACTIVATION_FOR_RUNNING_CODE,n,i).ignoreErrors(),i}async sendTelemetry(e,t,n,r){let i=!1,o=!1;try{const e=await r;i=Array.isArray(e)&&e.length>0}catch(e){o=!0,(0,c.traceError)("Failed to get activation commands",e)}const s=n&&n.version?n.version.raw:void 0,a={failed:o,hasCommands:i,interpreterType:n?n.envType:l.EnvironmentType.Unknown,terminal:e,pythonVersion:s};(0,u.sendTelemetryEvent)(t,void 0,a)}async getActivationCommands(e,t,n,r){const i=this.configurationService.getSettings(e),o=this.serviceContainer.get(s.IComponentAdapter);if(t?t.envType===l.EnvironmentType.Conda:await o.isCondaEnvironment(i.pythonPath)){const r=t?await this.conda.getActivationCommandsForInterpreter(t.path,n):await this.conda.getActivationCommands(e,n);if(Array.isArray(r))return r}const a=r.filter((e=>e.isShellSupported(n)));for(const r of a){const i=t?await r.getActivationCommandsForInterpreter(t.path,n):await r.getActivationCommands(e,n);if(Array.isArray(i)&&i.length>0)return i}}};r([(0,c.traceDecoratorError)("Failed to capture telemetry")],y.prototype,"sendTelemetry",null),y=r([(0,o.injectable)(),i(0,(0,o.inject)(h.IPlatformService)),i(1,(0,o.inject)(p.ITerminalManager)),i(2,(0,o.inject)(a.IServiceContainer)),i(3,(0,o.inject)(s.IInterpreterService)),i(4,(0,o.inject)(f.IConfigurationService)),i(5,(0,o.inject)(v.ITerminalActivationCommandProvider)),i(5,(0,o.named)(v.TerminalActivationProviders.conda)),i(6,(0,o.inject)(v.ITerminalActivationCommandProvider)),i(6,(0,o.named)(v.TerminalActivationProviders.bashCShellFish)),i(7,(0,o.inject)(v.ITerminalActivationCommandProvider)),i(7,(0,o.named)(v.TerminalActivationProviders.commandPromptAndPowerShell)),i(8,(0,o.inject)(v.ITerminalActivationCommandProvider)),i(8,(0,o.named)(v.TerminalActivationProviders.nushell)),i(9,(0,o.inject)(v.ITerminalActivationCommandProvider)),i(9,(0,o.named)(v.TerminalActivationProviders.pyenv)),i(10,(0,o.inject)(v.ITerminalActivationCommandProvider)),i(10,(0,o.named)(v.TerminalActivationProviders.pipenv)),i(11,(0,o.multiInject)(v.IShellDetector))],y),t.TerminalHelper=y},97207:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalService=void 0;const o=n(86700),s=n(71017),a=n(66828);n(32727);const c=n(18639),l=n(77498),u=n(54813),d=n(61522),p=n(43200),h=n(17585),f=n(77570),g=n(61684),m=n(58400);let v=class{constructor(e,t){this.serviceContainer=e,this.options=t,this.terminalClosed=new a.EventEmitter,this.envVarScript=s.join(f.EXTENSION_ROOT_DIR,"python_files","pythonrc.py");const n=this.serviceContainer.get(g.IDisposableRegistry);n.push(this),this.terminalHelper=this.serviceContainer.get(m.ITerminalHelper),this.terminalManager=this.serviceContainer.get(h.ITerminalManager),this.terminalAutoActivator=this.serviceContainer.get(p.ITerminalAutoActivation),this.terminalManager.onDidCloseTerminal(this.terminalCloseHandler,this,n),this.terminalActivator=this.serviceContainer.get(m.ITerminalActivator)}get onDidCloseTerminal(){return this.terminalClosed.event.bind(this.terminalClosed)}dispose(){this.terminal&&this.terminal.dispose()}async sendCommand(e,t,n){var r;await this.ensureTerminal();const i=this.terminalHelper.buildCommandForTerminal(this.terminalShellType,e,t);(null===(r=this.options)||void 0===r?void 0:r.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(i,!0)}async sendText(e){var t;await this.ensureTerminal(),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(!0),this.terminal.sendText(e)}async show(e=!0){var t;await this.ensureTerminal(e),(null===(t=this.options)||void 0===t?void 0:t.hideFromUser)||this.terminal.show(e)}async ensureTerminal(e=!0){var t,n,r,i,o,s;this.terminal||(this.terminalShellType=this.terminalHelper.identifyTerminalShell(this.terminal),this.terminal=this.terminalManager.createTerminal({name:(null===(t=this.options)||void 0===t?void 0:t.title)||"Python",env:{PYTHONSTARTUP:this.envVarScript},hideFromUser:null===(n=this.options)||void 0===n?void 0:n.hideFromUser}),this.terminalAutoActivator.disableAutoActivation(this.terminal),await new Promise((e=>setTimeout(e,100))),await this.terminalActivator.activateEnvironmentInTerminal(this.terminal,{resource:null===(r=this.options)||void 0===r?void 0:r.resource,preserveFocus:e,interpreter:null===(i=this.options)||void 0===i?void 0:i.interpreter,hideFromUser:null===(o=this.options)||void 0===o?void 0:o.hideFromUser}),(null===(s=this.options)||void 0===s?void 0:s.hideFromUser)||this.terminal.show(e),this.sendTelemetry().ignoreErrors())}terminalCloseHandler(e){e===this.terminal&&(this.terminalClosed.fire(),this.terminal=void 0)}async sendTelemetry(){var e,t;const n=this.serviceContainer.get(g.IConfigurationService).getSettings(null===(e=this.options)||void 0===e?void 0:e.resource).pythonPath,r=(null===(t=this.options)||void 0===t?void 0:t.interpreter)||await this.serviceContainer.get(c.IInterpreterService).getInterpreterDetails(n),i=r&&r.version?r.version.raw:void 0,o=r?r.envType:void 0;(0,u.captureTelemetry)(d.EventName.TERMINAL_CREATE,{terminal:this.terminalShellType,pythonVersion:i,interpreterType:o})}};v=r([(0,o.injectable)(),i(0,(0,o.inject)(l.IServiceContainer))],v),t.TerminalService=v},71791:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.ShellDetector=void 0;const o=n(86700),s=n(66828),a=n(19735),c=n(54813),l=n(61522);n(32727);const u=n(84974),d=n(87450),p=n(58400),h={[d.OSType.Linux]:p.TerminalShellType.bash,[d.OSType.OSX]:p.TerminalShellType.bash,[d.OSType.Windows]:p.TerminalShellType.commandPrompt,[d.OSType.Unknown]:p.TerminalShellType.other};let f=class{constructor(e,t){this.platform=e,this.shellDetectors=t}identifyTerminalShell(e){let t;const n={failed:!0,shellIdentificationSource:"default",terminalProvided:!!e,hasCustomShell:void 0,hasShellInEnv:void 0},r=this.shellDetectors.slice().sort(((e,t)=>t.priority-e.priority));for(const i of r)if(t=i.identify(n,e),t&&t!==p.TerminalShellType.other){n.failed=!1;break}return(0,c.sendTelemetryEvent)(l.EventName.TERMINAL_SHELL_IDENTIFICATION,void 0,n),(0,a.traceVerbose)(`Shell identified as ${t} ${e?`(Terminal name is ${e.name})`:""}`),void 0!==t&&t!==p.TerminalShellType.other||((0,a.traceError)("Unable to identify shell",s.env.shell," for OS ",this.platform.osType),(0,a.traceVerbose)("Using default OS shell"),t=h[this.platform.osType]),t}};f=r([(0,o.injectable)(),i(0,(0,o.inject)(u.IPlatformService)),i(1,(0,o.multiInject)(p.IShellDetector))],f),t.ShellDetector=f},89465:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.identifyShellFromShellPath=t.BaseShellDetector=void 0;const o=n(86700),s=n(58400),a=new Map;a.set(s.TerminalShellType.powershell,/(powershell$)/i),a.set(s.TerminalShellType.gitbash,/(gitbash$)/i),a.set(s.TerminalShellType.bash,/(bash$)/i),a.set(s.TerminalShellType.wsl,/(wsl$)/i),a.set(s.TerminalShellType.zsh,/(zsh$)/i),a.set(s.TerminalShellType.ksh,/(ksh$)/i),a.set(s.TerminalShellType.commandPrompt,/(cmd$)/i),a.set(s.TerminalShellType.fish,/(fish$)/i),a.set(s.TerminalShellType.tcshell,/(tcsh$)/i),a.set(s.TerminalShellType.cshell,/(csh$)/i),a.set(s.TerminalShellType.nushell,/(nu$)/i),a.set(s.TerminalShellType.powershellCore,/(pwsh$)/i),a.set(s.TerminalShellType.xonsh,/(xonsh$)/i);let c=class{constructor(e){this.priority=e}identifyShellFromShellPath(e){return l(e)}};function l(e){const t=e.replace(/\.exe$/i,"");return Array.from(a.keys()).reduce(((e,n)=>{if(e===s.TerminalShellType.other){const e=a.get(n);if(e&&e.test(t))return n}return e}),s.TerminalShellType.other)}c=r([(0,o.injectable)(),i(0,(0,o.unmanaged)())],c),t.BaseShellDetector=c,t.identifyShellFromShellPath=l},55928:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},i=this&&this.__param||function(e,t){return function(n,r){t(n,r,e)}};Object.defineProperty(t,"__esModule",{value:!0}),t.SettingsShellDetector=void 0;const o=n(86700),s=n(17585),a=n(84974),c=n(87450),l=n(58400),u=n(89465);let d=class extends u.BaseShellDetector{constructor(e,t){super(2),this.workspace=e,this.platform=t}getTerminalShellPath(){const e=this.workspace.getConfiguration("terminal.integrated.shell");let t="";switch(this.platform.osType){case c.OSType.Windows:t="windows";break;case c.OSType.OSX:t="osx";break;case c.OSType.Linux:t="linux";break;default:return""}return e.get(t)}identify(e,t){const n=this.getTerminalShellPath();e.hasCustomShell=!!n;const r=n?this.identifyShellFromShellPath(n):l.TerminalShellType.other;return r!==l.TerminalShellType.other?e.shellIdentificationSource="environment":e.shellIdentificationSource="settings",r}};d=r([(0,o.injectable)(),i(0,(0,o.inject)(s.IWorkspaceService)),i(1,(0,o.inject)(a.IPlatformService))],d),t.SettingsShellDetector=d},81731:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s};Object.defineProperty(t,"__esModule",{value:!0}),t.TerminalNameShellDetector=void 0;const i=n(86700),o=n(19735),s=n(58400),a=n(89465);let c=class extends a.BaseShellDetector{constructor(){super(4)}identify(e,t){if(!t)return;const n=this.identifyShellFromShellPath(t.name);return(0,o.traceVerbose)(`Terminal name '${t.name}' identified as shell '${n}'`),e.shellIdentificationSource=n===s.TerminalShellType.other?e.shellIdentificationSource:"terminalName",n}};c=r([(0,i.injectable)()],c),t.TerminalNameShellDetector=c},67482:function(e,t,n){"use strict";var r=this